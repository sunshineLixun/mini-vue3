<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<div id="app"></div>
		<script type="module">
			// import { h, render, reactive } from '../../../node_modules/vue/dist/vue.esm-browser.js';
			import { h, render, reactive, toRefs, Fragment } from './runtime-core.esm-bundler.js';

			// demo 1. data
			// const ParentComponent = {
			// 	data() {
			// 		return {
			// 			name: '当前年龄',
			// 			age: 1
			// 		};
			// 	},
			// 	render() {
			// 		function onClick() {
			// 			console.log(this)
			// 			this.age++;
			// 		}

			// 		return h('button', { onClick: onClick.bind(this) }, `${this.name}+${this.age}`)
			// 	}
			// };
			// render(h(ParentComponent), app);

			// demo 2. setup return 响应式数据
			// const Com = {
			// 	setup() {
			// 		const state = reactive({
			// 			name: '当前年龄',
			// 			age: 1
			// 		});
			// 		const onClick = () => {
			// 			state.age++;
			// 		};

			// 		return {
			// 			...toRefs(state)
			// 		}

			// 	},
			// 	render(proxy) {
			// 		return h('button', `${proxy.name}+${proxy.age}`)
			// 	}
			// };
			// render(h(Com), app);

			// demo 3 setup return 渲染函数
			// const Com = {
			// 	setup() {
			// 		const state = reactive({
			// 			name: '当前年龄',
			// 			age: 1
			// 		});
			// 		const onClick = () => {
			// 			state.age++;
			// 		};

			// 		return () => h('button', { onClick }, `${state.name}+${state.age}`)
			// 	},
			// };
			// render(h(Com), app);

			// demo 4.1 child component
			// const Child = {
			// 	props: {
			// 		age: Number
			// 	},
			// 	render() {
			// 		return h('div', `${this.age}`);
			// 	}
			// };

			// const Com = {
			// 	setup() {
			// 		const state = reactive({
			// 			age: 1
			// 		});

			// 		const onClick = () => {
			// 			state.age++;
			// 		};

			// 		return () => h(Fragment, [h('button', { onClick }, '点我改变子组件的age'), h(Child, { age: state.age })]);
			// 	}
			// };
			// render(h(Com), app);

			// demo 4.2 child setup component props
			const Child = {
				props: {
					age: Number
				},
				setup(proxy) {
					return () => h('div', `${proxy.age}`);
				}
			};

			const Com = {
				setup(proxy) {
					const state = reactive({
						age: 1
					});

					const onClick = () => {
						state.age++;
					};
					return () => h(Fragment, [h('button', { onClick }, '点我改变子组件的age'), h(Child, { age: state.age })]);
				}
			};
			render(h(Com), app);
		</script>
	</body>
</html>
