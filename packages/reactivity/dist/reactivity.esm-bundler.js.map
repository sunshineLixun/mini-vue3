{
  "version": 3,
  "sources": ["../../shared/src/makeMap.ts", "../../shared/src/general.ts", "../src/dep.ts", "../src/effectScope.ts", "../src/effect.ts", "../src/ref.ts", "../src/baseHandlers.ts", "../src/reactive.ts", "../src/computed.ts", "../../runtime-core/src/errorHandling.ts", "../src/watch.ts"],
  "sourcesContent": ["export function makeMap(str: string): (key: string) => boolean {\n\tconst map: Record<string, boolean> = Object.create(null);\n\tconst strs = str.split(',');\n\tfor (let i = 0; i < strs.length; i++) {\n\t\tmap[strs[i]] = true;\n\t}\n\treturn val => !!map[val];\n}\n", "import { makeMap } from './makeMap';\n\nexport const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === 'object';\n\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue);\n\nexport const isFunction = (val: unknown): val is Function => typeof val === 'function';\n\nexport const NOOP = () => {};\n\nexport const NO = () => false;\n\nexport const isArray = Array.isArray;\nexport const isMap = (val: unknown): val is Map<any, any> => toTypeString(val) === '[object Map]';\nexport const isSet = (val: unknown): val is Set<any> => toTypeString(val) === '[object Set]';\nexport const isString = (val: unknown): val is String => typeof val === 'string';\n\nexport const objectToString = Object.prototype.toString;\nexport const toTypeString = (value: unknown): string => objectToString.call(value);\n\nexport const isPlainObject = (val: unknown): val is object => toTypeString(val) === '[object Object]';\n\nexport const isNoEmptyValue = (val: unknown) => val !== undefined || val !== null;\n\nexport const extend = Object.assign;\n\nexport const EMPTY_OBJ: { readonly [key: string]: any } = {};\n\n// \u4E8B\u4EF6 onXxxx \u6216\u8005\u4E5F\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A /^on[A-Z]/\nexport const onRE = /^on[^a-z]/;\n\nexport const isOn = (key: string) => onRE.test(key);\n\n// \u4E0B\u9762\u8FD9\u4E9Bkey\u662Fvue\u5185\u90E8\u4FDD\u7559\u7684\u5173\u952E\u5B57\uFF0C\u5143\u7D20\u81EA\u5B9A\u4E49\u5C5E\u6027props\u4E00\u822C\u4E0D\u5141\u8BB8\u7528\u4E0B\u9762\u7684key, \u7A7A\u5B57\u7B26\u4E32\u4E5F\u7B97\n// [\"\", \"key\", \"ref\"]\nexport const isReservedProp = makeMap(',key,ref');\n\nexport const hasOwn = (val: object, key: string): key is keyof typeof val =>\n\tObject.prototype.hasOwnProperty.call(val, key);\n", "import { ReactiveEffect } from './effect';\n\nexport type Dep = Set<ReactiveEffect>;\n\nexport const createDep = (effects?: ReactiveEffect[]): Dep => {\n\tconst dep = new Set<ReactiveEffect>(effects) as Dep;\n\treturn dep;\n};\n", "import { ReactiveEffect } from './effect';\n\nlet activeEffectScope: EffectScope | undefined;\n\ninterface EffectScope {\n\trun<T>(fn: () => T): T | undefined; // \u5982\u679C\u4F5C\u7528\u57DF\u4E0D\u6D3B\u8DC3\u5C31\u4E3A undefined\n\tstop(): void;\n}\n\n// EffectScope \u5B9E\u73B0\u65B9\u5F0F\u8DDFeffect\u4E00\u6837\u7684\u9053\u7406\uFF0Cscope\u5185\u90E8\u7684effect\u6536\u96C6\u5F53\u524D\u6B63\u5728\u6267\u884CeffectScope\u4F5C\u7528\u57DF\n\n/**\n * @example\n * ```js\n \t\t\tconst scope = effectScope();\n\t\t\tscope.run(() => {\n\t\t\t\tconst state = reactive({ name: 'xxx' });\n\n\t\t\t\t// \u5185\u90E8\u6536\u96C6\u4E86effect\uFF0C \u5F53\u8C03\u7528scope.stop\u65F6\uFF0C\u5176\u5185\u90E8\u4F1A\u628A\u6536\u96C6\u5230effect\u5168\u90E8stop\n\t\t\t\teffect(() => {\n\t\t\t\t\tconsole.log(state.name);\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tstate.name = 'kkkk';\n\t\t\t\t}, 1000);\n\n\t\t\t\tconst scope2 = effectScope();\n\t\t\t\tscope2.run(() => {\n\t\t\t\t\tconst state = reactive({ age: 10 });\n\n\t\t\t\t\teffect(() => console.log(state.age));\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstate.age++;\n\t\t\t\t\t}, 1000);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tscope.stop();\n * ```\n */\n\nclass EffectScope {\n\t// \u6807\u8BB0\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\n\tprivate _active = true;\n\n\t// \u8BB0\u5F55\u6536\u96C6\u5230\u7684effect\n\teffects: ReactiveEffect[];\n\n\tparent: EffectScope;\n\n\tcleanups: (() => void)[];\n\n\t// \u8BB0\u5F55\u5185\u90E8\u7684\u6240\u6709\u4F5C\u7528\u57DF\n\tscopes: EffectScope[] | undefined;\n\n\t// detached \u662F\u5426\u662F\u72EC\u7ACB\u7684\uFF0C\u9ED8\u8BA4\u4E0D\u662F\u72EC\u7ACB\u7684\uFF0C\u53D7\u7236\u4F5C\u7528\u57DF\u63A7\u5236\n\tconstructor(public detached: boolean = false) {\n\t\t// \u4E0D\u662F\u72EC\u7ACB\u7684\u5C31\u4F1A\u6536\u96C6\u8D77\u6765\uFF0C\u7236\u4F5C\u7528\u57DFstop\uFF0C\u5B50\u4F5C\u7528\u57DF\u4E5F\u4F1Astop\n\t\t// \u5982\u679C\u662F\u72EC\u7ACB\u7684\uFF0C\u5219\u4E0D\u4F1A\uFF0C\u5B50\u4F5C\u7528\u57DFscope\u5185\u90E8\u7684\u4EE3\u7801\u4E0D\u53D7\u5F71\u54CD\n\t\tif (!detached && activeEffectScope) {\n\t\t\t// \u6536\u96C6\u4F5C\u7528\u57DF\n\t\t\t(activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this);\n\t\t}\n\t}\n\n\trun<T>(fn: () => T): T | undefined {\n\t\tif (this._active) {\n\t\t\ttry {\n\t\t\t\tthis.parent = activeEffectScope;\n\t\t\t\tactiveEffectScope = this;\n\t\t\t\treturn fn();\n\t\t\t} finally {\n\t\t\t\tactiveEffectScope = this.parent;\n\t\t\t\tthis.parent = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t// \u5C06\u6536\u96C6\u5230\u7684effect\u5168\u90E8stop\n\tstop() {\n\t\tif (this._active) {\n\t\t\tif (this.effects) {\n\t\t\t\tthis.effects.forEach(effect => {\n\t\t\t\t\teffect.stop();\n\t\t\t\t});\n\t\t\t\tthis.effects.length = 0;\n\t\t\t}\n\n\t\t\tif (this.cleanups) {\n\t\t\t\tthis.cleanups.forEach(fn => fn());\n\t\t\t}\n\n\t\t\t// \u5982\u679C\u6709\u5B50\u4F5C\u7528\u57DF\uFF0C\u8868\u660E\u5B50\u4F5C\u7528\u57DF\u4E0D\u662F\u72EC\u7ACB\u7684\uFF0C\u6267\u884C\u5B50\u4F5C\u7528\u57DF\u7684stop\n\t\t\tif (this.scopes) {\n\t\t\t\tthis.scopes.forEach(self => {\n\t\t\t\t\tself.stop();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._active = false;\n\t\t}\n\t}\n}\n\nexport function effectScope(detached?: boolean): EffectScope {\n\treturn new EffectScope(detached);\n}\n\nexport function recordEffectScope(effect: ReactiveEffect) {\n\tif (activeEffectScope) {\n\t\t// \u6536\u96C6effect\n\t\t(activeEffectScope.effects || (activeEffectScope.effects = [])).push(effect);\n\t}\n}\n\nexport function getCurrentScope(): EffectScope | undefined {\n\treturn activeEffectScope;\n}\n\nexport function onScopeDispose(fn: () => void) {\n\tif (activeEffectScope) {\n\t\t(activeEffectScope.cleanups || (activeEffectScope.cleanups = [])).push(fn);\n\t}\n}\n", "import { isArray } from '@vue/shared';\nimport { Dep, createDep } from './dep';\nimport { recordEffectScope } from './effectScope';\n\n// \u5168\u5C40\u7684effect\nexport let activeEffect: ReactiveEffect | undefined;\n\n//  weakMap = {\n// \t \t\ttarget: {\n// \t \t\t\tkey: Set<ReactiveEffect, ReactiveEffect, ReactiveEffect>\n// \t \t\t}\n// \t }\nconst targetMap = new WeakMap<any, Map<any, Dep>>();\n\nexport type EffectScheduler = (...args: any[]) => any;\n\nexport interface ReactiveEffectRunner<T = any> {\n\t(): T;\n\teffect: ReactiveEffect;\n}\n\nexport interface ReactiveEffectOptions {\n\tscheduler?: EffectScheduler;\n}\n\n// \u57FA\u7C7B\uFF1A\u4F5C\u4E3A\u54CD\u5E94\u5F0F\u7CFB\u7EDF\u7684\u6700\u5E95\u5C42\u7684\u63D0\u4F9B\u8005\uFF0Ccomputed\u3001watch\u90FD\u662F\u57FA\u4E8EReactiveEffect\u6765\u505A\uFF0C\u5185\u90E8\u4FDD\u5B58\u7740\u5F53\u524D\u6536\u96C6\u4F9D\u8D56\u7684\u91CD\u8981\u5C5E\u6027deps\n// \u6838\u5FC3\u65B9\u6CD5\uFF1Arun\uFF0C\u8BB0\u5F55\u5F53\u524D\u7684activeEffect\uFF0C\u8868\u660Eproxy\u5BF9\u8C61get\u65B9\u6CD5\u662F\u5426\u662F\u5728effect\u4E2D\uFF0C\u662F\u5C31\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\u3002\nexport class ReactiveEffect<T = any> {\n\t// \u6807\u8BB0\u5F53\u524Deffect\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\uFF0C\u5982\u679C\u662F\u6FC0\u6D3B\u72B6\u6001\uFF0C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\tactive = true;\n\t// \u6536\u96C6\u5F53\u524D\u6FC0\u6D3B\u7684activeEffect\n\tdeps: Dep[] = [];\n\t// \u6807\u8BB0\u5F53\u524D\u7684effect\n\t/**\n\t * effect(() => {\n\t * \tthis.name e1\n\t * \t effect(() => {\n\t * \t\t\tthis.name  e2\n\t * \t })\n\t * \t this.name  \u8FD9\u91CC\u5FC5\u987B\u662F e1\n\t * })\n\t *\n\t * \u7B2C\u4E00\u4E2Aeffect\u6267\u884C\n\t * parent -> activeEffect -> this\n\t * \u51FD\u6570\u6267\u884C\u5B8C\u6210\n\t * activeEffect = this.parent\n\t * parent = undefined\n\t *\n\t * \u7B2C\u4E8C\u4E2Aeffect\u6267\u884C\n\t * parent -> activeEffect\n\t *\n\t * e1 -> e2 -> e1\n\t */\n\tparent: ReactiveEffect | undefined = undefined;\n\t// scheduler\u8BB0\u5F55\u7740\uFF1Aproxy\u5BF9\u8C61set\u4E86\u65B0\u7684\u503C\uFF0C\u4F1A\u89E6\u53D1scheduler\u56DE\u8C03\uFF0C\u63A7\u5236\u4F9D\u8D56\u66F4\u65B0\u65F6\u673A\n\t// \u8FD9\u91CC\u4E5F\u53EF\u4EE5\u8BA4\u4E3A\u662F proxy\u5BF9\u8C61\u7684\u5C5E\u6027\u53D1\u751F\u4E86\u53D8\u5316\n\n\tconstructor(public fn: () => T, public scheduler: EffectScheduler | null = null) {\n\t\t// effectScope\u6536\u96C6effect\n\t\trecordEffectScope(this);\n\t}\n\n\trun() {\n\t\t// \u5982\u679C\u4E0D\u662F\u6FC0\u6D3B\u6001\uFF0C\u76F4\u63A5\u8FD4\u56DE\u56DE\u8C03\u51FD\u6570\u6267\u884C\u7ED3\u679C\n\t\tif (!this.active) {\n\t\t\treturn this.fn();\n\t\t}\n\n\t\ttry {\n\t\t\tthis.parent = activeEffect;\n\t\t\tactiveEffect = this;\n\n\t\t\t// \u6267\u884C\u4F9D\u8D56\u56DE\u8C03\u4E4B\u524D\uFF0C\u5148\u6E05\u7A7A\u6536\u96C6\u7684effects\n\t\t\tcleanupEffect(this);\n\t\t\treturn this.fn();\n\t\t} finally {\n\t\t\t// e1\n\t\t\tactiveEffect = this.parent;\n\t\t\tthis.parent = undefined;\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.active) {\n\t\t\tcleanupEffect(this);\n\t\t\tthis.active = false;\n\t\t}\n\t}\n}\n\nexport function effect<T = any>(fn: () => T, options?: ReactiveEffectOptions) {\n\tconst _effect = new ReactiveEffect(fn, options?.scheduler);\n\n\tif (!options) {\n\t\t_effect.run();\n\t}\n\n\tconst runner = _effect.run.bind(_effect) as ReactiveEffectRunner;\n\trunner.effect = _effect;\n\treturn runner;\n}\n\nexport function stop(runner: ReactiveEffectRunner) {\n\trunner.effect.stop();\n}\n\n/**\n * \u6536\u96C6\u4F9D\u8D56\n * \u6536\u96C6\u6570\u636E\u683C\u5F0F\u5982\u4E0B\uFF1A\n * weakMap = {\n * \t\ttarget: {\n * \t\t\tkey: Set<ReactiveEffect, ReactiveEffect, ReactiveEffect>\n * \t\t}\n * }\n *\n * \u56E0\u4E3A\u4E00\u4E2A\u53D6\u503C\u64CD\u4F5C\u53EF\u4EE5\u53D1\u751F\u5728\u591A\u4E2Aeffect\u4E2D\uFF0C\u6240\u4EE5Set\u91CC\u9762\u4F1A\u6709\u591A\u4E2AReactiveEffect\n *\n * @param target\n * @param key\n */\nexport function track(target: object, key: unknown) {\n\tif (activeEffect) {\n\t\t// \u8BF4\u660E\u5F53\u524D\u53D6\u503C\u64CD\u4F5C\u53D1\u751F\u5728effect\u4E2D\n\t\tlet depsMap = targetMap.get(target);\n\t\tif (!depsMap) {\n\t\t\t// \u4E0D\u5B58\u5728\uFF0C\u521B\u5EFA\u4E00\u4E2A\u7A7Amap\n\t\t\ttargetMap.set(target, (depsMap = new Map()));\n\t\t}\n\t\tlet dep = depsMap.get(key);\n\t\tif (!dep) {\n\t\t\tdepsMap.set(key, (dep = new Set<ReactiveEffect>()));\n\t\t}\n\t\ttrackEffects(dep);\n\t}\n}\n\nexport function trackEffects(dep: Dep) {\n\tlet shouldTrack = !dep.has(activeEffect);\n\tif (shouldTrack) {\n\t\t// \u5982\u679CSet\u4E2D\u6CA1\u6709\u5F53\u524D\u6FC0\u6D3B\u7684activeEffect\uFF0C\u9700\u8981\u505A\u6536\u96C6\n\t\tdep.add(activeEffect);\n\t\tactiveEffect.deps.push(dep);\n\t}\n}\n\n/**\n * \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n * @param target\n * @param key\n * @param newValue\n * @param oldValue\n */\nexport function trigger(target: object, key: unknown) {\n\tconst depsMap = targetMap.get(target);\n\t// \u6CA1\u6709\u6536\u96C6\u8BE5\u5BF9\u8C61\n\tif (!depsMap) {\n\t\treturn;\n\t}\n\n\tlet deps: (Dep | undefined)[] = [];\n\tif (key !== undefined) {\n\t\tdeps.push(depsMap.get(key));\n\t}\n\n\t// copy\u4E00\u4EFDdeps\uFF0C\u6E05\u7406\u4F9D\u8D56\u65F6\u5019\uFF0C\u9632\u6B62\u6B7B\u5FAA\u73AF\n\tconst effects: ReactiveEffect[] = [];\n\tfor (const dep of deps) {\n\t\tif (dep) {\n\t\t\teffects.push(...dep);\n\t\t}\n\t}\n\ttriggerEffects(createDep(effects));\n}\n\nexport function triggerEffects(dep: Dep | ReactiveEffect[]) {\n\tif (dep) {\n\t\tconst effects = isArray(dep) ? dep : [...dep];\n\t\tif (effects) {\n\t\t\teffects.forEach(effect => {\n\t\t\t\t/**\n\t\t\t\t * effect(() => {\n\t\t\t\t * \t\tstate.name = 123123\n\t\t\t\t * })\n\t\t\t\t *\n\t\t\t\t * \u4E3A\u4E86\u9632\u6B62\u5728\u4F9D\u8D56\u4E2D\u66F4\u65B0\u54CD\u5E94\u5F0F\u6570\u636E\uFF0C\u9020\u6210\u6B7B\u5FAA\u73AF\uFF0C\u8FD9\u91CC\u8981\u505A\u5224\u65AD\uFF0C\n\t\t\t\t * \u5982\u679C\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684effect === \u5168\u5C40\u4E2DactiveEffect\uFF0C\u8868\u660E\u6B64effect\u6B63\u5728\u6267\u884C\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tif (activeEffect !== effect) {\n\t\t\t\t\tif (effect.scheduler) {\n\t\t\t\t\t\teffect.scheduler();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \u66F4\u65B0\u4F9D\u8D56\n\t\t\t\t\t\teffect.run();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * \u6E05\u7406\u4F9D\u8D56\n * @param effect \u5F53\u524D\u7684effect\n */\nexport function cleanupEffect(effect: ReactiveEffect) {\n\tconst { deps } = effect;\n\tif (deps.length) {\n\t\tfor (let index = 0; index < deps.length; index++) {\n\t\t\tdeps[index].delete(effect);\n\t\t}\n\t\tdeps.length = 0;\n\t}\n}\n", "import { hasChanged, isArray, isObject } from '@vue/shared';\nimport { Dep, createDep } from './dep';\nimport { activeEffect, trackEffects, triggerEffects } from './effect';\nimport { isReactive, toRaw, toReactive } from './reactive';\n\nexport interface Ref<T = any> {\n\tdep: Dep;\n\tvalue: T;\n}\n\nexport type MaybeRef<T = any> = T | Ref<T>;\n\nexport function unref<T>(ref: MaybeRef<T>): T {\n\treturn isRef(ref) ? ref.value : ref;\n}\n\nexport function isRef<T>(ref: Ref<T> | unknown): ref is Ref<T>;\nexport function isRef(ref: any): ref is Ref {\n\treturn !!(ref && ref.__v_isRef === true);\n}\n\nexport function ref(value: unknown) {\n\treturn createRef(value, false);\n}\n\nexport function shallowRef(value: unknown) {\n\treturn createRef(value, true);\n}\n\nfunction createRef(value: unknown, shallow: boolean) {\n\t// ref(ref(true))\n\t// \u5982\u679C\u672C\u8EAB\u5C31\u662Fref, \u8FD4\u56DE\u5176\u672C\u8EAB\n\tif (isRef(value)) {\n\t\treturn value;\n\t}\n\treturn new RefImpl(value, shallow);\n}\n\nclass RefImpl<T> {\n\tpublic dep: Dep = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u7684\u503C,\u7528\u4F5Cget\u65B9\u6CD5\u653E\u56DE\u7684\u503C\n\tprivate _value: T = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u7684\u539F\u59CB\u503C\uFF0C\u7528\u4F5C\u65B0 \u8001\u503C\u53D8\u5316\u7684\u6BD4\u8F83\n\tprivate _rawValue: T = undefined;\n\n\tpublic readonly __v_isRef = true;\n\tconstructor(value: T, public readonly __v_isShallow: boolean) {\n\t\t// 1\uFF1A\u5982\u679C\u662Fshallow \u4FDD\u5B58\u539F\u59CB\u503C\n\t\t// 2\uFF1A\u5982\u679C\u662Fref, value\u6709\u53EF\u80FD\u4E5F\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61, \u4F1A\u5BF9\u5176\u89E3\u5305\uFF0C\u53D8\u4E3A\u666E\u901A\u5BF9\u8C61\n\t\tthis._rawValue = __v_isShallow ? value : toRaw(value);\n\t\t// 1\uFF1A\u5982\u679C\u662Fshallow\uFF0C\u4FDD\u5B58\u539F\u59CB\u503C\uFF0C\n\t\t// 2\uFF1A\u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u8F6C\u5316\u6210reactive\u5BF9\u8C61\uFF0C\u5982\u679C\u4E0D\u662F\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u539F\u59CB\u503C\n\t\t// 3\uFF1A\u652F\u6301\u4E0B\u9762\u4E24\u79CD\uFF1Aref(\u57FA\u672C\u6570\u636E\u7C7B\u578B)\u3001ref({})\u3001ref(reactive({}))\n\t\tthis._value = __v_isShallow ? value : toReactive(value);\n\t}\n\n\tget value() {\n\t\t// \u4F9D\u8D56\u6536\u96C6\n\t\ttrackRefValue(this);\n\t\treturn this._value;\n\t}\n\n\tset value(newValue) {\n\t\t/**\n\t\t * 1: shallowRef\u5BF9\u6BD4\u7684\u662F\u539F\u59CB\u503C\uFF0C\u56E0\u4E3A_vawValue _value\u4FDD\u5B58\u7684\u90FD\u662F\u539F\u59CB\u503C\n\t\t * @example\n\t\t * \tconst obj = {}\n\t\t *  const sRef = shallowRef(obj)\n\t\t *  sRef.value === obj  // true\n\t\t *\n\t\t * \tsRef.value = {a: 1}\n\t\t *\n\t\t * \t\u5BF9\u6BD4\u7684\u662F\u539F\u59CB\u503C\uFF1A {a: 1} === {}\n\t\t *\n\t\t *  \u6240\u4EE5shallowRef\u60F3\u8981\u76D1\u542C\u5176\u53D8\u5316\uFF0C\u5FC5\u987B\u8981\u66F4\u6539\u6574\u4E2A\u5BF9\u8C61 sRef.value = new Object\n\t\t */\n\n\t\t/**\n\t\t * 2: ref.value = xxx\n\t\t */\n\n\t\t// \u6709\u53EF\u80FD\u5916\u90E8\u4F20\u5165\u54CD\u5E94\u5F0F\u5BF9\u8C61 newValue = reactive\u3001 ref\n\t\t// \u73B0\u5BF9\u5176\u7ED3\u6784\u6210\u539F\u59CB\u503C\n\t\tnewValue = this.__v_isShallow ? newValue : toRaw(newValue);\n\t\tif (hasChanged(newValue, this._rawValue)) {\n\t\t\tthis._rawValue = newValue;\n\t\t\tthis._value = this.__v_isShallow ? newValue : toReactive(newValue);\n\t\t\t// \u89E6\u53D1\u66F4\u65B0\n\t\t\ttriggerRefValue(this);\n\t\t}\n\t}\n}\n\n// \u6536\u96C6\u4F9D\u8D56\nexport function trackRefValue(ref: Ref<any>) {\n\t// \u5982\u679C\u662F\u5728effect\u4E2D\u8BBF\u95EE\n\tif (activeEffect) {\n\t\ttrackEffects(ref.dep || (ref.dep = createDep()));\n\t}\n}\n\n// \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\nexport function triggerRefValue(ref: Ref<any>) {\n\tconst dep = ref.dep;\n\tif (dep) {\n\t\ttriggerEffects(dep);\n\t}\n}\n\nexport function toRef(source: Record<string, any> | MaybeRef, key?: string) {\n\tif (isRef(source)) {\n\t\treturn source;\n\t} else if (isObject(source)) {\n\t\treturn propertyToRef(source, key);\n\t} else {\n\t\t// \u5305\u88C5\u6210 ref\n\t\treturn ref(source);\n\t}\n}\n\nexport function toRefs<T extends object>(object: T) {\n\tconst res: any = isArray(object) ? new Array(object.length) : {};\n\tfor (const key in object) {\n\t\tres[key] = propertyToRef(object, key);\n\t}\n\treturn res;\n}\n\nfunction propertyToRef(source: Record<string, any> | MaybeRef, key?: string) {\n\tconst value = source[key];\n\treturn isRef(value) ? value : new ObjectRefImpl(source, key);\n}\n\nclass ObjectRefImpl<T extends object, K extends keyof T> {\n\tpublic readonly __v_isRef = true;\n\tconstructor(private readonly _object: T, private readonly _key: K) {}\n\n\t// ref.value\n\tget value() {\n\t\t// _object\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8FD9\u91CC\u53D6\u503C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\t\treturn this._object[this._key];\n\t}\n\n\tset value(newValue) {\n\t\t// \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n\t\tthis._object[this._key] = newValue;\n\t}\n}\n\n// \u5BF9ref\u505A\u89E3\u5305\nexport function proxyRefs<T>(objectWithRef: Ref<T>) {\n\t// \u5982\u679C\u662Freactive \u76F4\u63A5\u8FD4\u56DE\u672C\u8EAB\n\treturn isReactive(objectWithRef)\n\t\t? objectWithRef\n\t\t: new Proxy(objectWithRef, {\n\t\t\t\tget(target, key, receiver) {\n\t\t\t\t\treturn unref(Reflect.get(target, key, receiver));\n\t\t\t\t},\n\t\t\t\tset(target, key, newValue, receiver) {\n\t\t\t\t\tconst oldValue = target[key];\n\t\t\t\t\t// \u5982\u679C\u8001\u503C\u662Fref\uFF0C\u5E76\u4E14newValue\u4E0D\u80FD\u662Fref\n\t\t\t\t\tif (isRef(oldValue) && !isRef(newValue)) {\n\t\t\t\t\t\toldValue.value = newValue;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn Reflect.set(target, key, newValue, receiver);\n\t\t\t\t}\n\t\t  });\n}\n", "import { hasChanged, isObject } from '@vue/shared';\nimport { track, trigger } from './effect';\nimport { ReactiveFlags, reactive, readonly, readonlyMap, reactiveMap, shallowReactiveMap } from './reactive';\nimport { isRef } from './ref';\n\nconst set = createSetter();\nfunction createSetter() {\n\treturn function set(target: object, key: string | symbol, value: unknown, receiver: object) {\n\t\tconst oldValue = target[key];\n\t\t// Reflect\u53CD\u5C04 \u5904\u7406\u4E86this\u6307\u5411\u95EE\u9898\n\t\tconst result = Reflect.set(target, key, value, receiver);\n\n\t\t// \u65B0\u503C\u8001\u503C\u4E0D\u76F8\u7B49\uFF0C\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n\t\tif (hasChanged(value, oldValue)) {\n\t\t\t// \u89E6\u53D1\u66F4\u65B0\n\t\t\ttrigger(target, key);\n\t\t}\n\n\t\treturn result;\n\t};\n}\nconst get = createGetter(false, false);\n\nconst readonlyGet = createGetter(true, false);\n\nconst shallowReactiveGet = createGetter(false, true);\n\nfunction createGetter(isReadonly = false, shallow = false) {\n\treturn function get(target: object, key: string | symbol, receiver: object) {\n\t\tif (key === ReactiveFlags.IS_REACTIVE) {\n\t\t\t// \u8FD9\u91CC\u8868\u660Etarget\u662F\u4EE3\u7406\u5BF9\u8C61\n\t\t\treturn !isReadonly;\n\t\t} else if (key === ReactiveFlags.IS_READONLY) {\n\t\t\treturn isReadonly;\n\t\t} else if (\n\t\t\tkey === ReactiveFlags.RAW &&\n\t\t\treceiver === (isReadonly ? readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)\n\t\t) {\n\t\t\t// \u5982\u679C\u662F\u4EE3\u7406\u5BF9\u8C61 \u518D\u88AB\u4EE3\u7406\uFF0C\u5C31\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n\t\t\treturn target;\n\t\t}\n\n\t\tconst res = Reflect.get(target, key, receiver);\n\n\t\t// readonly \u4E0D\u6536\u96C6\u4F9D\u8D56\n\t\tif (!isReadonly) {\n\t\t\t// \u4F9D\u8D56\u6536\u96C6\n\t\t\tdebugger;\n\t\t\ttrack(target, key);\n\t\t}\n\n\t\tif (shallow) {\n\t\t\t// shallow\u4E0D\u505A\u6DF1\u5C42\u6B21\u4EE3\u7406\n\t\t\treturn res;\n\t\t}\n\n\t\tif (isRef(res)) {\n\t\t\t// \u5982\u679Cvalue\u662FRef\u7C7B\u578B\uFF0C \u89E3\u5305 Ref\n\t\t\treturn res.value;\n\t\t}\n\n\t\t// \u5904\u7406\u6DF1\u5C42\u6B21\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u5982\u679C\u8FD4\u56DE\u503C\u662F\u5BF9\u8C61\uFF0C\u9700\u8981\u518D\u5BF9 \u5BF9\u8C61 \u505A\u4E00\u6B21\u4EE3\u7406\n\t\tif (isObject(res)) {\n\t\t\treturn isReadonly ? readonly(res) : reactive(res);\n\t\t}\n\n\t\treturn res;\n\t};\n}\n\nexport const mutableHandlers: ProxyHandler<object> = {\n\tset,\n\tget\n};\n\nexport const shallowReactiveHandlers: ProxyHandler<object> = {\n\tset,\n\tget: shallowReactiveGet\n};\n\nexport const readonlyHandlers: ProxyHandler<object> = {\n\t// \u53EA\u8BFB\u5C5E\u6027\u4E0D\u80FD\u88ABset\n\tset(target, key) {\n\t\tconsole.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n\t\treturn true;\n\t},\n\t// \u53EA\u8BFB\u5C5E\u6027\u4E0D\u80FD\u88AB\u5220\u9664\n\tdeleteProperty(target, key) {\n\t\tconsole.warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\n\t\treturn true;\n\t},\n\tget: readonlyGet\n};\n", "import { isObject } from '@vue/shared';\nimport { mutableHandlers, readonlyHandlers, shallowReactiveHandlers } from './baseHandlers';\n\nexport const enum ReactiveFlags {\n\tSKIP = '__v_skip',\n\tIS_REACTIVE = '__v_isReactive',\n\tIS_READONLY = '__v_isReadonly',\n\tIS_SHALLOW = '__v_isShallow',\n\tRAW = '__v_raw'\n}\n\nexport interface Target {\n\t[ReactiveFlags.SKIP]?: boolean;\n\t[ReactiveFlags.IS_REACTIVE]?: boolean;\n\t[ReactiveFlags.IS_READONLY]?: boolean;\n\t[ReactiveFlags.IS_SHALLOW]?: boolean;\n\t[ReactiveFlags.RAW]?: any;\n}\n\nexport const reactiveMap = new WeakMap<Target, any>();\nexport const readonlyMap = new WeakMap<Target, any>();\nexport const shallowReactiveMap = new WeakMap<Target, any>();\n\nexport const isReadonly = (value: unknown) => {\n\t// \u5C5E\u6027\u8BBF\u95EE \u89E6\u53D1 readonlyHandlers.get \u65B9\u6CD5\uFF0C\u5176\u5185\u90E8\u5224\u65AD\u4E86key === ReactiveFlags.IS_READONLY\n\treturn !!(value && (value as Target)[ReactiveFlags.IS_READONLY]);\n};\n\nexport const isReactive = (value: unknown): boolean => {\n\tif (isReadonly(value)) {\n\t\treturn isReactive((value as Target)[ReactiveFlags.RAW]);\n\t}\n\treturn !!(value && (value as Target)[ReactiveFlags.IS_REACTIVE]);\n};\n\nexport function isProxy(value: unknown): boolean {\n\treturn isReadonly(value) || isReactive(value);\n}\n\n// \u7B2C\u4E00\u6B21\u6267\u884C observed\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8BBF\u95EEReactiveFlags.RAW\u89E6\u53D1proxy set\u65B9\u6CD5\uFF0C\n// \u89E6\u53D1proxy set\u65B9\u6CD5\u8FD4\u56DEreadonlyMap \u6216\u8005 reactiveMap\u4FDD\u5B58\u7684\u6E90\u5BF9\u8C61\uFF0C\n// \u7B2C\u4E8C\u6B21\u6267\u884C\uFF0C\u6E90\u5BF9\u8C61\u4E2D\u6CA1\u6709ReactiveFlags.RAW\u5C5E\u6027\uFF0C\u76F4\u63A5\u8FD4\u56DE\u6E90\u5BF9\u8C61\nexport function toRaw<T>(observed: T): T {\n\tconst raw = observed && (observed as Target)[ReactiveFlags.RAW];\n\treturn raw ? toRaw(raw) : observed;\n}\n\n// \u8F6C\u6210\u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport function toReactive<T extends unknown>(value: T): T {\n\treturn isObject(value) ? reactive(value as any) : value;\n}\n\nexport function readonly(target: object) {\n\treturn createReactiveObject(target, true, readonlyHandlers, readonlyMap);\n}\n\nexport function reactive<T extends object>(target: T) {\n\t/**\n\t * @example\n\t * const state = reactive({})\n\t * const readonlyS = readonly(state)\n\t * \u5982\u679C\u662Freadonly\u8FD4\u56DE\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u672C\u8EAB\n\t */\n\tif (isReadonly(target)) {\n\t\treturn target;\n\t}\n\n\treturn createReactiveObject(target, false, mutableHandlers, reactiveMap);\n}\n\nexport function shallowReactive(target: object) {\n\treturn createReactiveObject(target, false, shallowReactiveHandlers, shallowReactiveMap);\n}\n\nexport function createReactiveObject(\n\ttarget: Target,\n\tisReadonly: boolean,\n\tbaseHandlers: ProxyHandler<any>,\n\tproxyMap: WeakMap<Target, any>\n) {\n\tif (!isObject(target)) {\n\t\treturn target;\n\t}\n\t// \u5224\u65AD\u5BF9\u8C61\u662F\u5426\u88AB\u4EE3\u7406\u8FC7\uFF0C\u5982\u679C\u662F\uFF0C\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n\t/** \u573A\u666F\uFF1A\n\t *  const obj = {a: 1}\n\t * \tconst state = reactive(obj);\n\t\t\tconst state2 = reactive(obj);\n\t\t\tstate === state2  true\n\t */\n\tconst existingProxy = proxyMap.get(target);\n\tif (existingProxy) {\n\t\treturn existingProxy;\n\t}\n\n\t// \u5982\u679C\u4EE3\u7406\u5BF9\u8C61\u518D\u5305\u88C5\u6210reactive\uFF0C\u8FD9\u91CC\u53D6\u503C\u4F1A\u89E6\u53D1 proxy get\u65B9\u6CD5\n\t/** \u573A\u666F\uFF1A\n\t *  const obj = {a: 1}\n\t * \tconst state = reactive(obj);\n\t\t\tconst state2 = reactive(state);\n\t\t\tstate === state2  true\n\t */\n\n\t// \u6392\u9664 readonly(), readonly \u5305\u88C5\u7684\u662Fproxy\u5BF9\u8C61\uFF0C\u4E0D\u80FD\u8FD4\u56DE\u5DF2\u88AB\u4EE3\u7406\u5BF9\u8C61\uFF0C\u8981\u8FD4\u56DE\u65B0\u7684\u4EE3\u7406\u5BF9\u8C61\uFF0C\u62E6\u622Aset,delete,get\u65B9\u6CD5\n\tif (target[ReactiveFlags.IS_REACTIVE] && !isReadonly) {\n\t\treturn target;\n\t}\n\n\tconst proxy = new Proxy(target, baseHandlers);\n\n\t// \u7F13\u5B58\u4EE3\u7406\u5BF9\u8C61\n\tproxyMap.set(target, proxy);\n\treturn proxy;\n}\n", "import { NOOP, isFunction } from '@vue/shared';\nimport { ReactiveEffect, activeEffect, trackEffects, triggerEffects } from './effect';\nimport { Dep } from './dep';\n\nexport interface ComputedRef<T = any> extends WritableComputedRef<T> {\n\treadonly value: T;\n}\n\nexport interface WritableComputedRef<T> {\n\treadonly effect: ReactiveEffect<T>;\n}\n\nexport interface WritableComputedOptions<T> {\n\tget: ComputedGetter<T>;\n\tset: ComputedSetter<T>;\n}\n\nexport type ComputedGetter<T> = (...args: any[]) => T;\nexport type ComputedSetter<T> = (v: T) => void;\n\nclass ComputedRefImpl<T> {\n\t// \u6536\u96C6\u5F53\u524D\u7684effect\uFF0C \u4F5C\u7528\uFF1A\u5F53\u6539\u53D8\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\uFF0C\u4E5F\u8981\u89E6\u53D1effect\u4F9D\u8D56\u66F4\u65B0\n\tpublic dep: Dep = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u8BA1\u7B97\u8FC7\u540E\u7684\u503C\n\tprivate _value: T = undefined;\n\n\t// \u6807\u8BB0\u5F53\u524D\u662F\u5426\u88AB\u7F13\u5B58\u8FC7\uFF1A\u5982\u679C\u662Ftrue\uFF0C\u8868\u660E\u6CA1\u6709\u7528\u8FC7\uFF0C \u9700\u8981\u6267\u884Ceffect\u7684run\uFF0Cfalse\u8868\u660E\u7528\u8FC7\u4E86\uFF0C\u53D6_value\u7F13\u5B58\u7684\u503C\n\tpublic _dirty = true;\n\n\t// \u6536\u96C6\u4F9D\u8D56\n\tpublic readonly effect: ReactiveEffect<T>;\n\n\tconstructor(public getter: ComputedGetter<T>, private readonly _setter: ComputedSetter<T>) {\n\t\t// \u8FD9\u91CC\u7684 ReactiveEffect\u7B2C\u4E8C\u4E2A\u56DE\u8C03\u89E6\u53D1\u65F6\u673A\uFF1A\u5F53proxy\u5BF9\u8C61\u5C5E\u6027\u89E6\u53D1\u4E86set\n\t\t// getter\u91CC\u9762\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027 \u6536\u96C6\u5F53\u524D\u5185\u90E8\u7684effect\n\n\t\t/**\n\t\t * @example\n\t\t * computed(() => {\n\t\t * \t\treturn state.name + state.name2\n\t\t * })\n\t\t *\n\t\t * \u8FD9\u91CC\u7684name \u548C name2 \u90FD\u6536\u96C6\u4E86 this.effect\n\t\t * \u6B64\u65F6\u7684 weakMap\u7ED3\u6784\u5982\u4E0B\uFF1A { target: Map{name: Set<this.effect>, name2: Set<this.effect>} }\n\t\t */\n\t\tthis.effect = new ReactiveEffect(getter, () => {\n\t\t\t// \u8FD9\u91CC\u8BF4\u660E\u6709\u65B0\u7684\u4F9D\u8D56\u503C\u6709\u53D8\u5316\uFF0C\u91CD\u7F6E\u810F\u68C0\u67E5\n\t\t\tif (!this._dirty) {\n\t\t\t\tthis._dirty = true;\n\t\t\t\t// \u89E6\u53D1\u6536\u96C6\u7684effect\n\t\t\t\ttriggerEffects(this.dep);\n\t\t\t}\n\t\t});\n\t}\n\n\t// \u5BF9\u8BA1\u7B97\u5C5E\u6027\u53D6\u503C\n\t/**\n\t * @example\n\t * ```js\n\t * const fullName = computed(() => state.firstName + state.secoedName)\n\t * ```\n\t *\n\t * ```html\n\t * <template>{{fullName}}</template>\n\t * ```\n\t */\n\tget value() {\n\t\tif (activeEffect) {\n\t\t\t// \u5982\u679C\u6709activeEffect\uFF0C\u8BF4\u660E\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027\u5728effect\u4E2D\u4F7F\u7528\uFF0C\u8BA1\u7B97\u5C5E\u6027\u9700\u8981\u6536\u96C6\u8FD9\u4E2Aeffect\n\t\t\ttrackEffects(this.dep || (this.dep = new Set<ReactiveEffect>()));\n\t\t}\n\n\t\t// \u5982\u679C\u662F\u810F\u7684\uFF0C\u8868\u660E\u6CA1\u6709\u7528\u8FC7\uFF0C\u9700\u8981\u6267\u884Ceffect\u83B7\u53D6\u65B0\u7684\u503C\n\t\tif (this._dirty) {\n\t\t\t// \u6807\u8BB0\u4E3A\u7528\u8FC7\n\t\t\tthis._dirty = false;\n\t\t\tthis._value = this.effect.run();\n\t\t}\n\t\t// \u8BFB\u53D6\u7F13\u5B58\u7684\u503C\n\t\treturn this._value;\n\t}\n\n\t/**\n\t * @example\n\t * ```js\n\t * const fullName = computed(() => state.firstName + state.secoedName)\n\t * fullName.value = 'mini vue3'\n\t * \u5BF9\u8BA1\u7B97\u5C5E\u6027\u8D4B\u503C\uFF0C\u4E5F\u4F1A\u89E6\u53D1\u9875\u9762\u66F4\u65B0\n\t * ```\n\t */\n\tset value(newValue: T) {\n\t\tthis._setter(newValue);\n\t}\n}\n\nexport function computed<T>(getter: ComputedGetter<T>): ComputedRef<T>;\nexport function computed<T>(options: WritableComputedOptions<T>): WritableComputedRef<T>;\nexport function computed<T>(getterOrOptions: ComputedGetter<T> | WritableComputedOptions<T>) {\n\tlet setter: ComputedSetter<T>;\n\tlet getter: ComputedGetter<T>;\n\tconst onlyGetter = isFunction(getterOrOptions);\n\tif (onlyGetter) {\n\t\tgetter = getterOrOptions;\n\t\tsetter = NOOP;\n\t} else {\n\t\tsetter = getterOrOptions.set || NOOP;\n\t\tgetter = getterOrOptions.get;\n\t}\n\n\treturn new ComputedRefImpl(getter, setter);\n}\n", "// \u6846\u67B6\u7EDF\u4E00error\u5904\u7406\n\nexport function callWithErrorHandling(fn: Function, args?: unknown[]) {\n\tlet res: any;\n\ttry {\n\t\tres = args ? fn(...args) : fn();\n\t} catch (err) {\n\t\t// \u53EF\u4EE5\u7EDF\u4E00\u9519\u8BEF\u4FE1\u606F\n\t\tconsole.log(err);\n\t}\n\treturn res;\n}\n", "import { NOOP, isArray, isFunction, isMap, isObject, isPlainObject, isSet } from '@vue/shared';\nimport { ComputedRef } from './computed';\nimport { ReactiveEffect } from './effect';\nimport { isReactive } from './reactive';\nimport { Ref, isRef } from './ref';\nimport { callWithErrorHandling } from 'packages/runtime-core/src/errorHandling';\n\nconst INITIAL_WATCHER_VALUE = {};\n\nexport interface WatchOptions<Immediate = boolean> {\n\timmediate?: Immediate;\n\tdeep?: boolean;\n}\n\nexport type WatchEffect = (onCleanup: OnCleanup) => void;\n\n// () => T\uFF1A getter\n// ComputedRef: \u8BA1\u7B97\u5C5E\u6027\n// Ref<T> ref\n// \u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport type WatchSource<T = any> = Ref<T> | ComputedRef<T> | (() => T);\n\n// cleanupFn \u7528\u6237\u6267\u884C\u7684\u56DE\u8C03\ntype OnCleanup = (cleanupFn: () => void) => void;\n\nexport type WatchCallback<V = any, OV = any> = (value: V, oldValue: OV, onCleanup?: OnCleanup) => any;\n\nexport function watchEffect(effect: WatchEffect, options?: WatchOptions) {\n\tdoWatch(effect, null, options);\n}\n\n// watch \u53EF\u4EE5\u76D1\u542C ref\u3001 computed\u3001 reactive\u3001getter\n// \u5F53\u76D1\u542C\u6574\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61reactive\u65F6\uFF0C\u4F1A\u81EA\u52A8\u542F\u7528\u6DF1\u5C42\u6A21\u5F0F\uFF0C \u9012\u5F52\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u89E6\u53D1\u6BCF\u4E2A\u5C5E\u6027\u6536\u96C6effect\uFF0C\u6240\u4EE5\u4E0D\u5EFA\u8BAE\u76F4\u63A5\u76D1\u542C\u6574\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u4F1A\u6709\u9690\u5F62\u7684\u6027\u80FD\u5F71\u54CD\n// \u63A8\u8350\u4F7F\u7528getter \u65B9\u6CD5 \u8BBF\u95EE\u6BCF\u4E2A\u5C5E\u6027\uFF1A watch(() => state.name, cb)\nexport function watch<T = any, Immediate extends Readonly<boolean> = false>(\n\tsource: T | WatchSource<T>,\n\tcb: WatchCallback,\n\toptions?: WatchOptions<Immediate>\n) {\n\treturn doWatch(source as any, cb, options);\n}\n\nfunction doWatch(\n\tsource: WatchSource | WatchSource[] | WatchEffect | object,\n\tcb: WatchCallback | null,\n\t{ immediate, deep }: WatchOptions = {}\n) {\n\tlet getter: () => any;\n\n\tif (isRef(source)) {\n\t\t// \u5982\u679C\u662Fref\uFF0C\u89E6\u53D1\u5C5E\u6027value\u6536\u96C6\u4F9D\u8D56\n\t\tgetter = () => source.value;\n\t} else if (isReactive(source)) {\n\t\t/**\n\t\t * @example\n\t\t * const state = reactive({name : 1})\n\t\t * watch(state, val => {})\n\t\t */\n\t\t// \u9012\u5F52\u904D\u5386\u5BF9\u8C61\uFF0C\u4F9D\u6B21\u53D6\u503C\uFF0C\u5C5E\u6027\u5C31\u4F1A\u6536\u96C6\u5185\u90E8\u7684effect\n\t\tgetter = () => source;\n\t\tdeep = true;\n\t} else if (isArray(source)) {\n\t\tgetter = () =>\n\t\t\tsource.map((s: any) => {\n\t\t\t\tif (isRef(s)) {\n\t\t\t\t\treturn s.value;\n\t\t\t\t} else if (isReactive(s)) {\n\t\t\t\t\treturn traverse(s);\n\t\t\t\t} else if (isFunction(s)) {\n\t\t\t\t\treturn callWithErrorHandling(s);\n\t\t\t\t}\n\t\t\t});\n\t} else if (isFunction(source)) {\n\t\t// watch cb\n\t\tif (cb) {\n\t\t\t/**\n\t\t\t * @example\n\t\t\t * const state = reactive({name : 1})\n\t\t\t * watch(() => state.name, val => {})\n\t\t\t */\n\t\t\t// \u76F4\u63A5\u8D4B\u503C\n\t\t\tgetter = source as any;\n\t\t} else {\n\t\t\t/**\n\t\t\t * @example\n\t\t\t * watchEffect(onCleanup => {\n\t\t\t\t\t\tonCleanup(() => {});\n\t\t\t\t\t\tconsole.log('watchEffect', state.name);\n\t\t\t\t\t});\n\t\t\t */\n\n\t\t\t// \u6267\u884CwatchEffect\u7684\u4F20\u5165\u7684\u51FD\u6570\uFF0C\u67092\u4E2A\u529F\u80FD\uFF1A\n\t\t\t// 1\uFF1A\u5C5E\u6027\u6536\u96C6effect\uFF0C\u4E0B\u6B21proxy\u5C5E\u6027\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\uFF0C\u6267\u884C\u81EA\u5B9A\u4E49\u7684scheduler\n\t\t\t// 2\uFF1A\u62FF\u5230\u7528\u6237onCleanup\u7684\u56DE\u8C03\uFF0C\u5728\u4E0B\u6B21\u6267\u884C\u65F6\uFF0C\u8C03\u7528 \u7528\u6237\u7684onCleanup\u56DE\u8C03\n\t\t\tgetter = () => {\n\t\t\t\tif (cleanup) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\treturn source(onCleanup);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tgetter = NOOP;\n\t}\n\n\t// \u5F53\u76F4\u63A5\u4FA6\u542C\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\u65F6\uFF0C\u4FA6\u542C\u5668\u4F1A\u81EA\u52A8\u542F\u7528\u6DF1\u5C42\u6A21\u5F0F\uFF0C\u5BF9\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6BCF\u4E2A\u5C5E\u6027\n\tif (cb && deep) {\n\t\tgetter = () => traverse(source);\n\t}\n\n\t// \u521D\u59CB\u5316undefined\uFF0C\u7B2C\u4E00\u6B21\u89E6\u53D1watch\u56DE\u8C03\uFF0ColdValue \u662F\u6CA1\u6709\u7684\n\tlet oldValue = INITIAL_WATCHER_VALUE;\n\n\t// \u6682\u5B58\u7528\u6237\u4F20\u5165\u8FDB\u53BB\u7684OnCleanup\u56DE\u8C03\u51FD\u6570\n\t// \u5728\u4E0B\u4E00\u6B21\u6267\u884Cwatch\u7684\u56DE\u8C03\u65F6\uFF0C\u6267\u884C\u4E00\u904Dcleanup\n\tlet cleanup: () => void;\n\tconst onCleanup: OnCleanup = (fn: () => void) => {\n\t\t// \u6267\u884Ccleanup\u64CD\u4F5C\u4E5F\u8981\u6267\u884Cstop\n\t\tcleanup = effect.stop = () => {\n\t\t\tfn();\n\t\t};\n\t};\n\n\t// \u81EA\u5B9A\u4E49 scheduler\uFF0C\u53EF\u4EE5\u63A7\u5236\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\u65F6\u673A\n\tconst job = () => {\n\t\tif (!effect.active) {\n\t\t\treturn;\n\t\t}\n\t\tif (cb) {\n\t\t\t// \u6267\u884Cgetter\u65B9\u6CD5\uFF0C\u62FF\u5230\u6700\u65B0\u7684\u8FD4\u56DE\u503C\n\t\t\tconst newValue = effect.run();\n\n\t\t\tif (cleanup) {\n\t\t\t\tcleanup();\n\t\t\t}\n\n\t\t\t// \u4F20\u7ED9watch\u56DE\u8C03\n\t\t\tcb(newValue, oldValue, onCleanup);\n\t\t\t// \u66F4\u65B0\u8001\u503C\n\t\t\toldValue = newValue;\n\t\t} else {\n\t\t\t// watchEffect\n\t\t\teffect.run();\n\t\t}\n\t};\n\n\t// getter \u65B9\u6CD5\u91CC\u9762\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u6536\u96C6\u4E86\u8FD9\u4E2Aeffect\uFF0C\u5F53\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u53D1\u751Fset\uFF0C\u5C31\u4F1A\u89E6\u53D1\u8FD9\u91CC\u7684job\u65B9\u6CD5\uFF0C\n\t// job\u65B9\u6CD5\u91CC\u9762\u6267\u884Cgetter\u65B9\u6CD5\uFF0C\u62FF\u5230\u6700\u65B0\u7684\u503C\uFF0C\u7136\u540E\u5C06\u8001\u503C\uFF0C\u65B0\u503C\u629B\u51FAcb\uFF0C\u7528\u6237\u5C31\u80FD\u62FF\u5230\u65E7 \u65B0 \u503C\n\n\t// watch\u662F effect + \u81EA\u5B9A\u4E49scheduler, scheduler\u56DE\u8C03\u63A7\u5236cb\u56DE\u4F20\u6570\u503C\n\t// watchEffect \u5C31\u662Feffect\uFF0C\u5F53\u6570\u636E\u53D8\u5316\u65F6\uFF0C\u76F4\u63A5\u89E6\u53D1\u56DE\u8C03\u66F4\u65B0\n\n\t// TODO: queueJob\n\tconst effect = new ReactiveEffect(getter, job);\n\n\tif (cb) {\n\t\tif (immediate) {\n\t\t\t// \u7ACB\u5373\u89E6\u53D1\n\t\t\tjob();\n\t\t} else {\n\t\t\t// \u5982\u679C\u7528\u6237\u6CA1\u6709\u5199immediate\uFF0C\u4E3B\u52A8\u89E6\u53D1\uFF0C\n\t\t\t// \u8FD9\u91CC\u7A0B\u5E8F\u8981\u4E3B\u52A8\u89E6\u53D1getter\u62FF\u5230\u8001\u503C\uFF0C\u540C\u65F6\u56E0\u4E3A\u6709\u5C5E\u6027\u8BBF\u95EE\uFF0C\u89E6\u53D1\u5F53\u524D\u76D1\u542C\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u4F9D\u8D56\u6536\u96C6effect\uFF0C\u5F53\u5C5E\u6027\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4F9D\u8D56effect\u66F4\u65B0, \u62FF\u5230\u65B0\u503C\n\t\t\toldValue = effect.run();\n\t\t}\n\t} else {\n\t\t// watchEffect \u9ED8\u8BA4\u6267\u884C\u4E00\u6B21\n\t\teffect.run();\n\t}\n\n\t// \u505C\u6B62\u4FA6\u542C\u5668\n\treturn () => effect.stop();\n}\n\nexport function traverse(value: unknown, seen?: Set<unknown>) {\n\t// reactive\u5BF9\u8C61\u91CC\u9762\u53EF\u4EE5\u6709\u5982\u4E0B\u503C\uFF1Aarray, set\u3001map\u3001\u666E\u901A\u5BF9\u8C61\uFF0C\u6240\u4EE5\u8981\u5206\u522B\u5904\u7406\n\n\tif (!isObject(value)) {\n\t\treturn value;\n\t}\n\tseen = seen || new Set();\n\tif (seen.has(value)) {\n\t\treturn value;\n\t}\n\tseen.add(value);\n\tif (isRef(value)) {\n\t\ttraverse(value.value, seen);\n\t} else if (isMap(value) || isSet(value)) {\n\t\tvalue.forEach((val: any) => {\n\t\t\ttraverse(val, seen);\n\t\t});\n\t} else if (isArray(value)) {\n\t\tfor (let index = 0; index < value.length; index++) {\n\t\t\ttraverse(value[index], seen);\n\t\t}\n\t} else if (isPlainObject(value)) {\n\t\tfor (const key in value) {\n\t\t\ttraverse(value[key], seen);\n\t\t}\n\t}\n\treturn value;\n}\n"],
  "mappings": "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",
  "names": ["effect", "effect", "ref", "set", "isReadonly", "get", "ReactiveFlags", "isReadonly", "effect"]
}
