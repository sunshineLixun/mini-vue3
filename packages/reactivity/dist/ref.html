<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>mini vue3</title>
	</head>
	<body>
		<div id="app"></div>
		<script type="module">
			import { ref, watchEffect, reactive, watch, toRef, toRefs, proxyRefs } from './reactivity.esm.js';

			const obj = { flag: true, name: 'xx', age: 10, foo: { a: 1, b: { bar: 999 } } };
			const state = reactive(obj);

			// 1:
			// const refValue = ref(state);

			// watchEffect(() => {
			// 	console.log(refValue.value.name);
			// });

			// setTimeout(() => {
			// 	refValue.value.name = 'lll';
			// }, 1000);

			// 2:
			// const refVa = ref(1);

			// watchEffect(() => {
			// 	console.log(refVa.value);
			// });

			// setTimeout(() => {
			// 	refVa.value = 2;
			// }, 1000);

			// 3:
			// const ref1 = ref(1);
			// const ref2 = ref(ref1);

			// console.log(ref1 === ref2); // true

			// watchEffect(() => {
			// 	console.log(ref2.value);
			// });

			// setInterval(() => {
			// 	ref2.value = 2;
			// }, 1000);

			// 4:
			// const name = ref('name');

			// const stop = watch(name, newVal => {
			// 	console.log(newVal);
			// });

			// // stop();

			// setTimeout(() => {
			// 	name.value = 'xxx';
			// }, 1000);

			// 5:
			// const name = toRef(state, 'name');
			// console.log(name);

			// watchEffect(() => {
			// 	console.log(name.value);
			// });

			// setTimeout(() => {
			// 	name.value = 'jjj';
			// }, 1000);

			// 6.
			const value = toRefs(state);
			console.log(value);

			// 7.

			let unRefObj = proxyRefs(value);

			watchEffect(() => {
				console.log(unRefObj.name, unRefObj.age);
			});

			setTimeout(() => {
				unRefObj.name = 'js';
				unRefObj.age = 10000;
			}, 1000);
		</script>
	</body>
</html>
