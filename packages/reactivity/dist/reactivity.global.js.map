{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/makeMap.ts", "../../shared/src/general.ts", "../src/dep.ts", "../src/effectScope.ts", "../src/effect.ts", "../src/ref.ts", "../src/baseHandlers.ts", "../src/reactive.ts", "../src/computed.ts", "../../runtime-core/src/errorHandling.ts", "../../runtime-core/src/scheduler.ts", "../../runtime-core/src/componentPublicInstance.ts", "../../runtime-core/src/vnode.ts", "../../runtime-dom/src/nodeOps.ts", "../../runtime-dom/src/modules/class.ts", "../../runtime-dom/src/modules/style.ts", "../../runtime-dom/src/modules/events.ts", "../../runtime-dom/src/modules/attrs.ts", "../../runtime-dom/src/patchProp.ts", "../../runtime-dom/src/index.ts", "../src/watch.ts"],
  "sourcesContent": ["export * from './reactive';\nexport * from './effect';\nexport * from './computed';\nexport * from './watch';\nexport * from './ref';\nexport * from './effectScope';\n", "export function makeMap(str: string): (key: string) => boolean {\n\tconst map: Record<string, boolean> = Object.create(null);\n\tconst strs = str.split(',');\n\tfor (let i = 0; i < strs.length; i++) {\n\t\tmap[strs[i]] = true;\n\t}\n\treturn val => !!map[val];\n}\n", "import { makeMap } from './makeMap';\n\nexport const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === 'object';\n\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue);\n\nexport const isFunction = (val: unknown): val is Function => typeof val === 'function';\n\nexport const NOOP = () => {};\n\nexport const NO = () => false;\n\nexport const isArray = Array.isArray;\nexport const isMap = (val: unknown): val is Map<any, any> => toTypeString(val) === '[object Map]';\nexport const isSet = (val: unknown): val is Set<any> => toTypeString(val) === '[object Set]';\nexport const isString = (val: unknown): val is String => typeof val === 'string';\n\nexport const objectToString = Object.prototype.toString;\nexport const toTypeString = (value: unknown): string => objectToString.call(value);\n\nexport const isPlainObject = (val: unknown): val is object => toTypeString(val) === '[object Object]';\n\nexport const isNoEmptyValue = (val: unknown) => val !== undefined || val !== null;\n\nexport const extend = Object.assign;\n\nexport const EMPTY_OBJ: { readonly [key: string]: any } = {};\n\n// \u4E8B\u4EF6 onXxxx \u6216\u8005\u4E5F\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A /^on[A-Z]/\nexport const onRE = /^on[^a-z]/;\n\nexport const isOn = (key: string) => onRE.test(key);\n\n// \u4E0B\u9762\u8FD9\u4E9Bkey\u662Fvue\u5185\u90E8\u4FDD\u7559\u7684\u5173\u952E\u5B57\uFF0C\u5143\u7D20\u81EA\u5B9A\u4E49\u5C5E\u6027props\u4E00\u822C\u4E0D\u5141\u8BB8\u7528\u4E0B\u9762\u7684key, \u7A7A\u5B57\u7B26\u4E32\u4E5F\u7B97\n// [\"\", \"key\", \"ref\"]\nexport const isReservedProp = makeMap(',key,ref');\n\nexport const hasOwn = (val: object, key: string): key is keyof typeof val =>\n\tObject.prototype.hasOwnProperty.call(val, key);\n", "import { ReactiveEffect } from './effect';\n\nexport type Dep = Set<ReactiveEffect>;\n\nexport const createDep = (effects?: ReactiveEffect[]): Dep => {\n\tconst dep = new Set<ReactiveEffect>(effects) as Dep;\n\treturn dep;\n};\n", "import { ReactiveEffect } from './effect';\n\nlet activeEffectScope: EffectScope | undefined;\n\ninterface EffectScope {\n\trun<T>(fn: () => T): T | undefined; // \u5982\u679C\u4F5C\u7528\u57DF\u4E0D\u6D3B\u8DC3\u5C31\u4E3A undefined\n\tstop(): void;\n}\n\n// EffectScope \u5B9E\u73B0\u65B9\u5F0F\u8DDFeffect\u4E00\u6837\u7684\u9053\u7406\uFF0Cscope\u5185\u90E8\u7684effect\u6536\u96C6\u5F53\u524D\u6B63\u5728\u6267\u884CeffectScope\u4F5C\u7528\u57DF\n\n/**\n * @example\n * ```js\n \t\t\tconst scope = effectScope();\n\t\t\tscope.run(() => {\n\t\t\t\tconst state = reactive({ name: 'xxx' });\n\n\t\t\t\t// \u5185\u90E8\u6536\u96C6\u4E86effect\uFF0C \u5F53\u8C03\u7528scope.stop\u65F6\uFF0C\u5176\u5185\u90E8\u4F1A\u628A\u6536\u96C6\u5230effect\u5168\u90E8stop\n\t\t\t\teffect(() => {\n\t\t\t\t\tconsole.log(state.name);\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tstate.name = 'kkkk';\n\t\t\t\t}, 1000);\n\n\t\t\t\tconst scope2 = effectScope();\n\t\t\t\tscope2.run(() => {\n\t\t\t\t\tconst state = reactive({ age: 10 });\n\n\t\t\t\t\teffect(() => console.log(state.age));\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstate.age++;\n\t\t\t\t\t}, 1000);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tscope.stop();\n * ```\n */\n\nclass EffectScope {\n\t// \u6807\u8BB0\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\n\tprivate _active = true;\n\n\t// \u8BB0\u5F55\u6536\u96C6\u5230\u7684effect\n\teffects: ReactiveEffect[];\n\n\tparent: EffectScope;\n\n\tcleanups: (() => void)[];\n\n\t// \u8BB0\u5F55\u5185\u90E8\u7684\u6240\u6709\u4F5C\u7528\u57DF\n\tscopes: EffectScope[] | undefined;\n\n\t// detached \u662F\u5426\u662F\u72EC\u7ACB\u7684\uFF0C\u9ED8\u8BA4\u4E0D\u662F\u72EC\u7ACB\u7684\uFF0C\u53D7\u7236\u4F5C\u7528\u57DF\u63A7\u5236\n\tconstructor(public detached: boolean = false) {\n\t\t// \u4E0D\u662F\u72EC\u7ACB\u7684\u5C31\u4F1A\u6536\u96C6\u8D77\u6765\uFF0C\u7236\u4F5C\u7528\u57DFstop\uFF0C\u5B50\u4F5C\u7528\u57DF\u4E5F\u4F1Astop\n\t\t// \u5982\u679C\u662F\u72EC\u7ACB\u7684\uFF0C\u5219\u4E0D\u4F1A\uFF0C\u5B50\u4F5C\u7528\u57DFscope\u5185\u90E8\u7684\u4EE3\u7801\u4E0D\u53D7\u5F71\u54CD\n\t\tif (!detached && activeEffectScope) {\n\t\t\t// \u6536\u96C6\u4F5C\u7528\u57DF\n\t\t\t(activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this);\n\t\t}\n\t}\n\n\trun<T>(fn: () => T): T | undefined {\n\t\tif (this._active) {\n\t\t\ttry {\n\t\t\t\tthis.parent = activeEffectScope;\n\t\t\t\tactiveEffectScope = this;\n\t\t\t\treturn fn();\n\t\t\t} finally {\n\t\t\t\tactiveEffectScope = this.parent;\n\t\t\t\tthis.parent = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t// \u5C06\u6536\u96C6\u5230\u7684effect\u5168\u90E8stop\n\tstop() {\n\t\tif (this._active) {\n\t\t\tif (this.effects) {\n\t\t\t\tthis.effects.forEach(effect => {\n\t\t\t\t\teffect.stop();\n\t\t\t\t});\n\t\t\t\tthis.effects.length = 0;\n\t\t\t}\n\n\t\t\tif (this.cleanups) {\n\t\t\t\tthis.cleanups.forEach(fn => fn());\n\t\t\t}\n\n\t\t\t// \u5982\u679C\u6709\u5B50\u4F5C\u7528\u57DF\uFF0C\u8868\u660E\u5B50\u4F5C\u7528\u57DF\u4E0D\u662F\u72EC\u7ACB\u7684\uFF0C\u6267\u884C\u5B50\u4F5C\u7528\u57DF\u7684stop\n\t\t\tif (this.scopes) {\n\t\t\t\tthis.scopes.forEach(self => {\n\t\t\t\t\tself.stop();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._active = false;\n\t\t}\n\t}\n}\n\nexport function effectScope(detached?: boolean): EffectScope {\n\treturn new EffectScope(detached);\n}\n\nexport function recordEffectScope(effect: ReactiveEffect) {\n\tif (activeEffectScope) {\n\t\t// \u6536\u96C6effect\n\t\t(activeEffectScope.effects || (activeEffectScope.effects = [])).push(effect);\n\t}\n}\n\nexport function getCurrentScope(): EffectScope | undefined {\n\treturn activeEffectScope;\n}\n\nexport function onScopeDispose(fn: () => void) {\n\tif (activeEffectScope) {\n\t\t(activeEffectScope.cleanups || (activeEffectScope.cleanups = [])).push(fn);\n\t}\n}\n", "import { isArray } from '@vue/shared';\nimport { Dep, createDep } from './dep';\nimport { recordEffectScope } from './effectScope';\n\n// \u5168\u5C40\u7684effect\nexport let activeEffect: ReactiveEffect | undefined;\n\n//  weakMap = {\n// \t \t\ttarget: {\n// \t \t\t\tkey: Set<ReactiveEffect, ReactiveEffect, ReactiveEffect>\n// \t \t\t}\n// \t }\nconst targetMap = new WeakMap<any, Map<any, Dep>>();\n\nexport type EffectScheduler = (...args: any[]) => any;\n\nexport interface ReactiveEffectRunner<T = any> {\n\t(): T;\n\teffect: ReactiveEffect;\n}\n\nexport interface ReactiveEffectOptions {\n\tscheduler?: EffectScheduler;\n}\n\n// \u57FA\u7C7B\uFF1A\u4F5C\u4E3A\u54CD\u5E94\u5F0F\u7CFB\u7EDF\u7684\u6700\u5E95\u5C42\u7684\u63D0\u4F9B\u8005\uFF0Ccomputed\u3001watch\u90FD\u662F\u57FA\u4E8EReactiveEffect\u6765\u505A\uFF0C\u5185\u90E8\u4FDD\u5B58\u7740\u5F53\u524D\u6536\u96C6\u4F9D\u8D56\u7684\u91CD\u8981\u5C5E\u6027deps\n// \u6838\u5FC3\u65B9\u6CD5\uFF1Arun\uFF0C\u8BB0\u5F55\u5F53\u524D\u7684activeEffect\uFF0C\u8868\u660Eproxy\u5BF9\u8C61get\u65B9\u6CD5\u662F\u5426\u662F\u5728effect\u4E2D\uFF0C\u662F\u5C31\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\u3002\nexport class ReactiveEffect<T = any> {\n\t// \u6807\u8BB0\u5F53\u524Deffect\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\uFF0C\u5982\u679C\u662F\u6FC0\u6D3B\u72B6\u6001\uFF0C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\tactive = true;\n\t// \u6536\u96C6\u5F53\u524D\u6FC0\u6D3B\u7684activeEffect\n\tdeps: Dep[] = [];\n\t// \u6807\u8BB0\u5F53\u524D\u7684effect\n\t/**\n\t * effect(() => {\n\t * \tthis.name e1\n\t * \t effect(() => {\n\t * \t\t\tthis.name  e2\n\t * \t })\n\t * \t this.name  \u8FD9\u91CC\u5FC5\u987B\u662F e1\n\t * })\n\t *\n\t * \u7B2C\u4E00\u4E2Aeffect\u6267\u884C\n\t * parent -> activeEffect -> this\n\t * \u51FD\u6570\u6267\u884C\u5B8C\u6210\n\t * activeEffect = this.parent\n\t * parent = undefined\n\t *\n\t * \u7B2C\u4E8C\u4E2Aeffect\u6267\u884C\n\t * parent -> activeEffect\n\t *\n\t * e1 -> e2 -> e1\n\t */\n\tparent: ReactiveEffect | undefined = undefined;\n\t// scheduler\u8BB0\u5F55\u7740\uFF1Aproxy\u5BF9\u8C61set\u4E86\u65B0\u7684\u503C\uFF0C\u4F1A\u89E6\u53D1scheduler\u56DE\u8C03\uFF0C\u63A7\u5236\u4F9D\u8D56\u66F4\u65B0\u65F6\u673A\n\t// \u8FD9\u91CC\u4E5F\u53EF\u4EE5\u8BA4\u4E3A\u662F proxy\u5BF9\u8C61\u7684\u5C5E\u6027\u53D1\u751F\u4E86\u53D8\u5316\n\n\tconstructor(public fn: () => T, public scheduler: EffectScheduler | null = null) {\n\t\t// effectScope\u6536\u96C6effect\n\t\trecordEffectScope(this);\n\t}\n\n\trun() {\n\t\t// \u5982\u679C\u4E0D\u662F\u6FC0\u6D3B\u6001\uFF0C\u76F4\u63A5\u8FD4\u56DE\u56DE\u8C03\u51FD\u6570\u6267\u884C\u7ED3\u679C\n\t\tif (!this.active) {\n\t\t\treturn this.fn();\n\t\t}\n\n\t\ttry {\n\t\t\tthis.parent = activeEffect;\n\t\t\tactiveEffect = this;\n\n\t\t\t// \u6267\u884C\u4F9D\u8D56\u56DE\u8C03\u4E4B\u524D\uFF0C\u5148\u6E05\u7A7A\u6536\u96C6\u7684effects\n\t\t\tcleanupEffect(this);\n\t\t\treturn this.fn();\n\t\t} finally {\n\t\t\t// e1\n\t\t\tactiveEffect = this.parent;\n\t\t\tthis.parent = undefined;\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.active) {\n\t\t\tcleanupEffect(this);\n\t\t\tthis.active = false;\n\t\t}\n\t}\n}\n\nexport function effect<T = any>(fn: () => T, options?: ReactiveEffectOptions) {\n\tconst _effect = new ReactiveEffect(fn, options?.scheduler);\n\n\tif (!options) {\n\t\t_effect.run();\n\t}\n\n\tconst runner = _effect.run.bind(_effect) as ReactiveEffectRunner;\n\trunner.effect = _effect;\n\treturn runner;\n}\n\nexport function stop(runner: ReactiveEffectRunner) {\n\trunner.effect.stop();\n}\n\n/**\n * \u6536\u96C6\u4F9D\u8D56\n * \u6536\u96C6\u6570\u636E\u683C\u5F0F\u5982\u4E0B\uFF1A\n * weakMap = {\n * \t\ttarget: {\n * \t\t\tkey: Set<ReactiveEffect, ReactiveEffect, ReactiveEffect>\n * \t\t}\n * }\n *\n * \u56E0\u4E3A\u4E00\u4E2A\u53D6\u503C\u64CD\u4F5C\u53EF\u4EE5\u53D1\u751F\u5728\u591A\u4E2Aeffect\u4E2D\uFF0C\u6240\u4EE5Set\u91CC\u9762\u4F1A\u6709\u591A\u4E2AReactiveEffect\n *\n * @param target\n * @param key\n */\nexport function track(target: object, key: unknown) {\n\tif (activeEffect) {\n\t\t// \u8BF4\u660E\u5F53\u524D\u53D6\u503C\u64CD\u4F5C\u53D1\u751F\u5728effect\u4E2D\n\t\tlet depsMap = targetMap.get(target);\n\t\tif (!depsMap) {\n\t\t\t// \u4E0D\u5B58\u5728\uFF0C\u521B\u5EFA\u4E00\u4E2A\u7A7Amap\n\t\t\ttargetMap.set(target, (depsMap = new Map()));\n\t\t}\n\t\tlet dep = depsMap.get(key);\n\t\tif (!dep) {\n\t\t\tdepsMap.set(key, (dep = new Set<ReactiveEffect>()));\n\t\t}\n\t\ttrackEffects(dep);\n\t}\n}\n\nexport function trackEffects(dep: Dep) {\n\tlet shouldTrack = !dep.has(activeEffect);\n\tif (shouldTrack) {\n\t\t// \u5982\u679CSet\u4E2D\u6CA1\u6709\u5F53\u524D\u6FC0\u6D3B\u7684activeEffect\uFF0C\u9700\u8981\u505A\u6536\u96C6\n\t\tdep.add(activeEffect);\n\t\tactiveEffect.deps.push(dep);\n\t}\n}\n\n/**\n * \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n * @param target\n * @param key\n * @param newValue\n * @param oldValue\n */\nexport function trigger(target: object, key: unknown) {\n\tconst depsMap = targetMap.get(target);\n\t// \u6CA1\u6709\u6536\u96C6\u8BE5\u5BF9\u8C61\n\tif (!depsMap) {\n\t\treturn;\n\t}\n\n\tlet deps: (Dep | undefined)[] = [];\n\tif (key !== undefined) {\n\t\tdeps.push(depsMap.get(key));\n\t}\n\n\t// copy\u4E00\u4EFDdeps\uFF0C\u6E05\u7406\u4F9D\u8D56\u65F6\u5019\uFF0C\u9632\u6B62\u6B7B\u5FAA\u73AF\n\tconst effects: ReactiveEffect[] = [];\n\tfor (const dep of deps) {\n\t\tif (dep) {\n\t\t\teffects.push(...dep);\n\t\t}\n\t}\n\ttriggerEffects(createDep(effects));\n}\n\nexport function triggerEffects(dep: Dep | ReactiveEffect[]) {\n\tif (dep) {\n\t\tconst effects = isArray(dep) ? dep : [...dep];\n\t\tif (effects) {\n\t\t\teffects.forEach(effect => {\n\t\t\t\t/**\n\t\t\t\t * effect(() => {\n\t\t\t\t * \t\tstate.name = 123123\n\t\t\t\t * })\n\t\t\t\t *\n\t\t\t\t * \u4E3A\u4E86\u9632\u6B62\u5728\u4F9D\u8D56\u4E2D\u66F4\u65B0\u54CD\u5E94\u5F0F\u6570\u636E\uFF0C\u9020\u6210\u6B7B\u5FAA\u73AF\uFF0C\u8FD9\u91CC\u8981\u505A\u5224\u65AD\uFF0C\n\t\t\t\t * \u5982\u679C\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684effect === \u5168\u5C40\u4E2DactiveEffect\uFF0C\u8868\u660E\u6B64effect\u6B63\u5728\u6267\u884C\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tif (activeEffect !== effect) {\n\t\t\t\t\tif (effect.scheduler) {\n\t\t\t\t\t\teffect.scheduler();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \u66F4\u65B0\u4F9D\u8D56\n\t\t\t\t\t\teffect.run();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * \u6E05\u7406\u4F9D\u8D56\n * @param effect \u5F53\u524D\u7684effect\n */\nexport function cleanupEffect(effect: ReactiveEffect) {\n\tconst { deps } = effect;\n\tif (deps.length) {\n\t\tfor (let index = 0; index < deps.length; index++) {\n\t\t\tdeps[index].delete(effect);\n\t\t}\n\t\tdeps.length = 0;\n\t}\n}\n", "import { hasChanged, isArray, isObject } from '@vue/shared';\nimport { Dep, createDep } from './dep';\nimport { activeEffect, trackEffects, triggerEffects } from './effect';\nimport { isReactive, toRaw, toReactive } from './reactive';\n\nexport interface Ref<T = any> {\n\tdep: Dep;\n\tvalue: T;\n}\n\nexport type MaybeRef<T = any> = T | Ref<T>;\n\nexport function unref<T>(ref: MaybeRef<T>): T {\n\treturn isRef(ref) ? ref.value : ref;\n}\n\nexport function isRef<T>(ref: Ref<T> | unknown): ref is Ref<T>;\nexport function isRef(ref: any): ref is Ref {\n\treturn !!(ref && ref.__v_isRef === true);\n}\n\nexport function ref(value: unknown) {\n\treturn createRef(value, false);\n}\n\nexport function shallowRef(value: unknown) {\n\treturn createRef(value, true);\n}\n\nfunction createRef(value: unknown, shallow: boolean) {\n\t// ref(ref(true))\n\t// \u5982\u679C\u672C\u8EAB\u5C31\u662Fref, \u8FD4\u56DE\u5176\u672C\u8EAB\n\tif (isRef(value)) {\n\t\treturn value;\n\t}\n\treturn new RefImpl(value, shallow);\n}\n\nclass RefImpl<T> {\n\tpublic dep: Dep = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u7684\u503C,\u7528\u4F5Cget\u65B9\u6CD5\u653E\u56DE\u7684\u503C\n\tprivate _value: T = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u7684\u539F\u59CB\u503C\uFF0C\u7528\u4F5C\u65B0 \u8001\u503C\u53D8\u5316\u7684\u6BD4\u8F83\n\tprivate _rawValue: T = undefined;\n\n\tpublic readonly __v_isRef = true;\n\tconstructor(value: T, public readonly __v_isShallow: boolean) {\n\t\t// 1\uFF1A\u5982\u679C\u662Fshallow \u4FDD\u5B58\u539F\u59CB\u503C\n\t\t// 2\uFF1A\u5982\u679C\u662Fref, value\u6709\u53EF\u80FD\u4E5F\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61, \u4F1A\u5BF9\u5176\u89E3\u5305\uFF0C\u53D8\u4E3A\u666E\u901A\u5BF9\u8C61\n\t\tthis._rawValue = __v_isShallow ? value : toRaw(value);\n\t\t// 1\uFF1A\u5982\u679C\u662Fshallow\uFF0C\u4FDD\u5B58\u539F\u59CB\u503C\uFF0C\n\t\t// 2\uFF1A\u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u8F6C\u5316\u6210reactive\u5BF9\u8C61\uFF0C\u5982\u679C\u4E0D\u662F\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u539F\u59CB\u503C\n\t\t// 3\uFF1A\u652F\u6301\u4E0B\u9762\u4E24\u79CD\uFF1Aref(\u57FA\u672C\u6570\u636E\u7C7B\u578B)\u3001ref({})\u3001ref(reactive({}))\n\t\tthis._value = __v_isShallow ? value : toReactive(value);\n\t}\n\n\tget value() {\n\t\t// \u4F9D\u8D56\u6536\u96C6\n\t\ttrackRefValue(this);\n\t\treturn this._value;\n\t}\n\n\tset value(newValue) {\n\t\t/**\n\t\t * 1: shallowRef\u5BF9\u6BD4\u7684\u662F\u539F\u59CB\u503C\uFF0C\u56E0\u4E3A_vawValue _value\u4FDD\u5B58\u7684\u90FD\u662F\u539F\u59CB\u503C\n\t\t * @example\n\t\t * \tconst obj = {}\n\t\t *  const sRef = shallowRef(obj)\n\t\t *  sRef.value === obj  // true\n\t\t *\n\t\t * \tsRef.value = {a: 1}\n\t\t *\n\t\t * \t\u5BF9\u6BD4\u7684\u662F\u539F\u59CB\u503C\uFF1A {a: 1} === {}\n\t\t *\n\t\t *  \u6240\u4EE5shallowRef\u60F3\u8981\u76D1\u542C\u5176\u53D8\u5316\uFF0C\u5FC5\u987B\u8981\u66F4\u6539\u6574\u4E2A\u5BF9\u8C61 sRef.value = new Object\n\t\t */\n\n\t\t/**\n\t\t * 2: ref.value = xxx\n\t\t */\n\n\t\t// \u6709\u53EF\u80FD\u5916\u90E8\u4F20\u5165\u54CD\u5E94\u5F0F\u5BF9\u8C61 newValue = reactive\u3001 ref\n\t\t// \u73B0\u5BF9\u5176\u7ED3\u6784\u6210\u539F\u59CB\u503C\n\t\tnewValue = this.__v_isShallow ? newValue : toRaw(newValue);\n\t\tif (hasChanged(newValue, this._rawValue)) {\n\t\t\tthis._rawValue = newValue;\n\t\t\tthis._value = this.__v_isShallow ? newValue : toReactive(newValue);\n\t\t\t// \u89E6\u53D1\u66F4\u65B0\n\t\t\ttriggerRefValue(this);\n\t\t}\n\t}\n}\n\n// \u6536\u96C6\u4F9D\u8D56\nexport function trackRefValue(ref: Ref<any>) {\n\t// \u5982\u679C\u662F\u5728effect\u4E2D\u8BBF\u95EE\n\tif (activeEffect) {\n\t\ttrackEffects(ref.dep || (ref.dep = createDep()));\n\t}\n}\n\n// \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\nexport function triggerRefValue(ref: Ref<any>) {\n\tconst dep = ref.dep;\n\tif (dep) {\n\t\ttriggerEffects(dep);\n\t}\n}\n\nexport function toRef(source: Record<string, any> | MaybeRef, key?: string) {\n\tif (isRef(source)) {\n\t\treturn source;\n\t} else if (isObject(source)) {\n\t\treturn propertyToRef(source, key);\n\t} else {\n\t\t// \u5305\u88C5\u6210 ref\n\t\treturn ref(source);\n\t}\n}\n\nexport function toRefs<T extends object>(object: T) {\n\tconst res: any = isArray(object) ? new Array(object.length) : {};\n\tfor (const key in object) {\n\t\tres[key] = propertyToRef(object, key);\n\t}\n\treturn res;\n}\n\nfunction propertyToRef(source: Record<string, any> | MaybeRef, key?: string) {\n\tconst value = source[key];\n\treturn isRef(value) ? value : new ObjectRefImpl(source, key);\n}\n\nclass ObjectRefImpl<T extends object, K extends keyof T> {\n\tpublic readonly __v_isRef = true;\n\tconstructor(private readonly _object: T, private readonly _key: K) {}\n\n\t// ref.value\n\tget value() {\n\t\t// _object\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8FD9\u91CC\u53D6\u503C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\t\treturn this._object[this._key];\n\t}\n\n\tset value(newValue) {\n\t\t// \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n\t\tthis._object[this._key] = newValue;\n\t}\n}\n\n// \u5BF9ref\u505A\u89E3\u5305\nexport function proxyRefs<T extends object>(objectWithRef: T) {\n\t// \u5982\u679C\u662Freactive \u76F4\u63A5\u8FD4\u56DE\u672C\u8EAB\n\treturn isReactive(objectWithRef)\n\t\t? objectWithRef\n\t\t: new Proxy(objectWithRef, {\n\t\t\t\tget(target, key, receiver) {\n\t\t\t\t\treturn unref(Reflect.get(target, key, receiver));\n\t\t\t\t},\n\t\t\t\tset(target, key, newValue, receiver) {\n\t\t\t\t\tconst oldValue = target[key];\n\t\t\t\t\t// \u5982\u679C\u8001\u503C\u662Fref\uFF0C\u5E76\u4E14newValue\u4E0D\u80FD\u662Fref\n\t\t\t\t\tif (isRef(oldValue) && !isRef(newValue)) {\n\t\t\t\t\t\toldValue.value = newValue;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn Reflect.set(target, key, newValue, receiver);\n\t\t\t\t}\n\t\t  });\n}\n", "import { hasChanged, isObject } from '@vue/shared';\nimport { track, trigger } from './effect';\nimport { ReactiveFlags, reactive, readonly, readonlyMap, reactiveMap, shallowReactiveMap } from './reactive';\nimport { isRef } from './ref';\n\nconst set = createSetter();\nfunction createSetter() {\n\treturn function set(target: object, key: string | symbol, value: unknown, receiver: object) {\n\t\tconst oldValue = target[key];\n\t\t// Reflect\u53CD\u5C04 \u5904\u7406\u4E86this\u6307\u5411\u95EE\u9898\n\t\tconst result = Reflect.set(target, key, value, receiver);\n\n\t\t// \u65B0\u503C\u8001\u503C\u4E0D\u76F8\u7B49\uFF0C\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n\t\tif (hasChanged(value, oldValue)) {\n\t\t\t// \u89E6\u53D1\u66F4\u65B0\n\t\t\ttrigger(target, key);\n\t\t}\n\n\t\treturn result;\n\t};\n}\nconst get = createGetter(false, false);\n\nconst readonlyGet = createGetter(true, false);\n\nconst shallowReactiveGet = createGetter(false, true);\n\nfunction createGetter(isReadonly = false, shallow = false) {\n\treturn function get(target: object, key: string | symbol, receiver: object) {\n\t\tif (key === ReactiveFlags.IS_REACTIVE) {\n\t\t\t// \u8FD9\u91CC\u8868\u660Etarget\u662F\u4EE3\u7406\u5BF9\u8C61\n\t\t\treturn !isReadonly;\n\t\t} else if (key === ReactiveFlags.IS_READONLY) {\n\t\t\treturn isReadonly;\n\t\t} else if (\n\t\t\tkey === ReactiveFlags.RAW &&\n\t\t\treceiver === (isReadonly ? readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)\n\t\t) {\n\t\t\t// \u5982\u679C\u662F\u4EE3\u7406\u5BF9\u8C61 \u518D\u88AB\u4EE3\u7406\uFF0C\u5C31\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n\t\t\treturn target;\n\t\t}\n\n\t\tconst res = Reflect.get(target, key, receiver);\n\n\t\t// readonly \u4E0D\u6536\u96C6\u4F9D\u8D56\n\t\tif (!isReadonly) {\n\t\t\t// \u4F9D\u8D56\u6536\u96C6\n\t\t\ttrack(target, key);\n\t\t}\n\n\t\tif (shallow) {\n\t\t\t// shallow\u4E0D\u505A\u6DF1\u5C42\u6B21\u4EE3\u7406\n\t\t\treturn res;\n\t\t}\n\n\t\tif (isRef(res)) {\n\t\t\t// \u5982\u679Cvalue\u662FRef\u7C7B\u578B\uFF0C \u89E3\u5305 Ref\n\t\t\treturn res.value;\n\t\t}\n\n\t\t// \u5904\u7406\u6DF1\u5C42\u6B21\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u5982\u679C\u8FD4\u56DE\u503C\u662F\u5BF9\u8C61\uFF0C\u9700\u8981\u518D\u5BF9 \u5BF9\u8C61 \u505A\u4E00\u6B21\u4EE3\u7406\n\t\tif (isObject(res)) {\n\t\t\treturn isReadonly ? readonly(res) : reactive(res);\n\t\t}\n\n\t\treturn res;\n\t};\n}\n\nexport const mutableHandlers: ProxyHandler<object> = {\n\tset,\n\tget\n};\n\nexport const shallowReactiveHandlers: ProxyHandler<object> = {\n\tset,\n\tget: shallowReactiveGet\n};\n\nexport const readonlyHandlers: ProxyHandler<object> = {\n\t// \u53EA\u8BFB\u5C5E\u6027\u4E0D\u80FD\u88ABset\n\tset(target, key) {\n\t\tconsole.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n\t\treturn true;\n\t},\n\t// \u53EA\u8BFB\u5C5E\u6027\u4E0D\u80FD\u88AB\u5220\u9664\n\tdeleteProperty(target, key) {\n\t\tconsole.warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\n\t\treturn true;\n\t},\n\tget: readonlyGet\n};\n", "import { isObject } from '@vue/shared';\nimport { mutableHandlers, readonlyHandlers, shallowReactiveHandlers } from './baseHandlers';\n\nexport const enum ReactiveFlags {\n\tSKIP = '__v_skip',\n\tIS_REACTIVE = '__v_isReactive',\n\tIS_READONLY = '__v_isReadonly',\n\tIS_SHALLOW = '__v_isShallow',\n\tRAW = '__v_raw'\n}\n\nexport interface Target {\n\t[ReactiveFlags.SKIP]?: boolean;\n\t[ReactiveFlags.IS_REACTIVE]?: boolean;\n\t[ReactiveFlags.IS_READONLY]?: boolean;\n\t[ReactiveFlags.IS_SHALLOW]?: boolean;\n\t[ReactiveFlags.RAW]?: any;\n}\n\nexport const reactiveMap = new WeakMap<Target, any>();\nexport const readonlyMap = new WeakMap<Target, any>();\nexport const shallowReactiveMap = new WeakMap<Target, any>();\n\nexport const isReadonly = (value: unknown) => {\n\t// \u5C5E\u6027\u8BBF\u95EE \u89E6\u53D1 readonlyHandlers.get \u65B9\u6CD5\uFF0C\u5176\u5185\u90E8\u5224\u65AD\u4E86key === ReactiveFlags.IS_READONLY\n\treturn !!(value && (value as Target)[ReactiveFlags.IS_READONLY]);\n};\n\nexport const isReactive = (value: unknown): boolean => {\n\tif (isReadonly(value)) {\n\t\treturn isReactive((value as Target)[ReactiveFlags.RAW]);\n\t}\n\treturn !!(value && (value as Target)[ReactiveFlags.IS_REACTIVE]);\n};\n\nexport function isProxy(value: unknown): boolean {\n\treturn isReadonly(value) || isReactive(value);\n}\n\n// \u7B2C\u4E00\u6B21\u6267\u884C observed\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8BBF\u95EEReactiveFlags.RAW\u89E6\u53D1proxy set\u65B9\u6CD5\uFF0C\n// \u89E6\u53D1proxy set\u65B9\u6CD5\u8FD4\u56DEreadonlyMap \u6216\u8005 reactiveMap\u4FDD\u5B58\u7684\u6E90\u5BF9\u8C61\uFF0C\n// \u7B2C\u4E8C\u6B21\u6267\u884C\uFF0C\u6E90\u5BF9\u8C61\u4E2D\u6CA1\u6709ReactiveFlags.RAW\u5C5E\u6027\uFF0C\u76F4\u63A5\u8FD4\u56DE\u6E90\u5BF9\u8C61\nexport function toRaw<T>(observed: T): T {\n\tconst raw = observed && (observed as Target)[ReactiveFlags.RAW];\n\treturn raw ? toRaw(raw) : observed;\n}\n\n// \u8F6C\u6210\u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport function toReactive<T extends unknown>(value: T): T {\n\treturn isObject(value) ? reactive(value as any) : value;\n}\n\nexport function readonly(target: object) {\n\treturn createReactiveObject(target, true, readonlyHandlers, readonlyMap);\n}\n\nexport function reactive<T extends object>(target: T) {\n\t/**\n\t * @example\n\t * const state = reactive({})\n\t * const readonlyS = readonly(state)\n\t * \u5982\u679C\u662Freadonly\u8FD4\u56DE\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u672C\u8EAB\n\t */\n\tif (isReadonly(target)) {\n\t\treturn target;\n\t}\n\n\treturn createReactiveObject(target, false, mutableHandlers, reactiveMap);\n}\n\nexport function shallowReactive(target: object) {\n\treturn createReactiveObject(target, false, shallowReactiveHandlers, shallowReactiveMap);\n}\n\nexport function createReactiveObject(\n\ttarget: Target,\n\tisReadonly: boolean,\n\tbaseHandlers: ProxyHandler<any>,\n\tproxyMap: WeakMap<Target, any>\n) {\n\tif (!isObject(target)) {\n\t\treturn target;\n\t}\n\t// \u5224\u65AD\u5BF9\u8C61\u662F\u5426\u88AB\u4EE3\u7406\u8FC7\uFF0C\u5982\u679C\u662F\uFF0C\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n\t/** \u573A\u666F\uFF1A\n\t *  const obj = {a: 1}\n\t * \tconst state = reactive(obj);\n\t\t\tconst state2 = reactive(obj);\n\t\t\tstate === state2  true\n\t */\n\tconst existingProxy = proxyMap.get(target);\n\tif (existingProxy) {\n\t\treturn existingProxy;\n\t}\n\n\t// \u5982\u679C\u4EE3\u7406\u5BF9\u8C61\u518D\u5305\u88C5\u6210reactive\uFF0C\u8FD9\u91CC\u53D6\u503C\u4F1A\u89E6\u53D1 proxy get\u65B9\u6CD5\n\t/** \u573A\u666F\uFF1A\n\t *  const obj = {a: 1}\n\t * \tconst state = reactive(obj);\n\t\t\tconst state2 = reactive(state);\n\t\t\tstate === state2  true\n\t */\n\n\t// \u6392\u9664 readonly(), readonly \u5305\u88C5\u7684\u662Fproxy\u5BF9\u8C61\uFF0C\u4E0D\u80FD\u8FD4\u56DE\u5DF2\u88AB\u4EE3\u7406\u5BF9\u8C61\uFF0C\u8981\u8FD4\u56DE\u65B0\u7684\u4EE3\u7406\u5BF9\u8C61\uFF0C\u62E6\u622Aset,delete,get\u65B9\u6CD5\n\tif (target[ReactiveFlags.IS_REACTIVE] && !isReadonly) {\n\t\treturn target;\n\t}\n\n\tconst proxy = new Proxy(target, baseHandlers);\n\n\t// \u7F13\u5B58\u4EE3\u7406\u5BF9\u8C61\n\tproxyMap.set(target, proxy);\n\treturn proxy;\n}\n", "import { NOOP, isFunction } from '@vue/shared';\nimport { ReactiveEffect, activeEffect, trackEffects, triggerEffects } from './effect';\nimport { Dep } from './dep';\n\nexport interface ComputedRef<T = any> extends WritableComputedRef<T> {\n\treadonly value: T;\n}\n\nexport interface WritableComputedRef<T> {\n\treadonly effect: ReactiveEffect<T>;\n}\n\nexport interface WritableComputedOptions<T> {\n\tget: ComputedGetter<T>;\n\tset: ComputedSetter<T>;\n}\n\nexport type ComputedGetter<T> = (...args: any[]) => T;\nexport type ComputedSetter<T> = (v: T) => void;\n\nclass ComputedRefImpl<T> {\n\t// \u6536\u96C6\u5F53\u524D\u7684effect\uFF0C \u4F5C\u7528\uFF1A\u5F53\u6539\u53D8\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\uFF0C\u4E5F\u8981\u89E6\u53D1effect\u4F9D\u8D56\u66F4\u65B0\n\tpublic dep: Dep = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u8BA1\u7B97\u8FC7\u540E\u7684\u503C\n\tprivate _value: T = undefined;\n\n\t// \u6807\u8BB0\u5F53\u524D\u662F\u5426\u88AB\u7F13\u5B58\u8FC7\uFF1A\u5982\u679C\u662Ftrue\uFF0C\u8868\u660E\u6CA1\u6709\u7528\u8FC7\uFF0C \u9700\u8981\u6267\u884Ceffect\u7684run\uFF0Cfalse\u8868\u660E\u7528\u8FC7\u4E86\uFF0C\u53D6_value\u7F13\u5B58\u7684\u503C\n\tpublic _dirty = true;\n\n\t// \u6536\u96C6\u4F9D\u8D56\n\tpublic readonly effect: ReactiveEffect<T>;\n\n\tconstructor(public getter: ComputedGetter<T>, private readonly _setter: ComputedSetter<T>) {\n\t\t// \u8FD9\u91CC\u7684 ReactiveEffect\u7B2C\u4E8C\u4E2A\u56DE\u8C03\u89E6\u53D1\u65F6\u673A\uFF1A\u5F53proxy\u5BF9\u8C61\u5C5E\u6027\u89E6\u53D1\u4E86set\n\t\t// getter\u91CC\u9762\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027 \u6536\u96C6\u5F53\u524D\u5185\u90E8\u7684effect\n\n\t\t/**\n\t\t * @example\n\t\t * computed(() => {\n\t\t * \t\treturn state.name + state.name2\n\t\t * })\n\t\t *\n\t\t * \u8FD9\u91CC\u7684name \u548C name2 \u90FD\u6536\u96C6\u4E86 this.effect\n\t\t * \u6B64\u65F6\u7684 weakMap\u7ED3\u6784\u5982\u4E0B\uFF1A { target: Map{name: Set<this.effect>, name2: Set<this.effect>} }\n\t\t */\n\t\tthis.effect = new ReactiveEffect(getter, () => {\n\t\t\t// \u8FD9\u91CC\u8BF4\u660E\u6709\u65B0\u7684\u4F9D\u8D56\u503C\u6709\u53D8\u5316\uFF0C\u91CD\u7F6E\u810F\u68C0\u67E5\n\t\t\tif (!this._dirty) {\n\t\t\t\tthis._dirty = true;\n\t\t\t\t// \u89E6\u53D1\u6536\u96C6\u7684effect\n\t\t\t\ttriggerEffects(this.dep);\n\t\t\t}\n\t\t});\n\t}\n\n\t// \u5BF9\u8BA1\u7B97\u5C5E\u6027\u53D6\u503C\n\t/**\n\t * @example\n\t * ```js\n\t * const fullName = computed(() => state.firstName + state.secoedName)\n\t * ```\n\t *\n\t * ```html\n\t * <template>{{fullName}}</template>\n\t * ```\n\t */\n\tget value() {\n\t\tif (activeEffect) {\n\t\t\t// \u5982\u679C\u6709activeEffect\uFF0C\u8BF4\u660E\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027\u5728effect\u4E2D\u4F7F\u7528\uFF0C\u8BA1\u7B97\u5C5E\u6027\u9700\u8981\u6536\u96C6\u8FD9\u4E2Aeffect\n\t\t\ttrackEffects(this.dep || (this.dep = new Set<ReactiveEffect>()));\n\t\t}\n\n\t\t// \u5982\u679C\u662F\u810F\u7684\uFF0C\u8868\u660E\u6CA1\u6709\u7528\u8FC7\uFF0C\u9700\u8981\u6267\u884Ceffect\u83B7\u53D6\u65B0\u7684\u503C\n\t\tif (this._dirty) {\n\t\t\t// \u6807\u8BB0\u4E3A\u7528\u8FC7\n\t\t\tthis._dirty = false;\n\t\t\tthis._value = this.effect.run();\n\t\t}\n\t\t// \u8BFB\u53D6\u7F13\u5B58\u7684\u503C\n\t\treturn this._value;\n\t}\n\n\t/**\n\t * @example\n\t * ```js\n\t * const fullName = computed(() => state.firstName + state.secoedName)\n\t * fullName.value = 'mini vue3'\n\t * \u5BF9\u8BA1\u7B97\u5C5E\u6027\u8D4B\u503C\uFF0C\u4E5F\u4F1A\u89E6\u53D1\u9875\u9762\u66F4\u65B0\n\t * ```\n\t */\n\tset value(newValue: T) {\n\t\tthis._setter(newValue);\n\t}\n}\n\nexport function computed<T>(getter: ComputedGetter<T>): ComputedRef<T>;\nexport function computed<T>(options: WritableComputedOptions<T>): WritableComputedRef<T>;\nexport function computed<T>(getterOrOptions: ComputedGetter<T> | WritableComputedOptions<T>) {\n\tlet setter: ComputedSetter<T>;\n\tlet getter: ComputedGetter<T>;\n\tconst onlyGetter = isFunction(getterOrOptions);\n\tif (onlyGetter) {\n\t\tgetter = getterOrOptions;\n\t\tsetter = NOOP;\n\t} else {\n\t\tsetter = getterOrOptions.set || NOOP;\n\t\tgetter = getterOrOptions.get;\n\t}\n\n\treturn new ComputedRefImpl(getter, setter);\n}\n", "// \u6846\u67B6\u7EDF\u4E00error\u5904\u7406\n\nexport function callWithErrorHandling(fn: Function, args?: unknown[]) {\n\tlet res: any;\n\ttry {\n\t\tres = args ? fn(...args) : fn();\n\t} catch (err) {\n\t\t// \u53EF\u4EE5\u7EDF\u4E00\u9519\u8BEF\u4FE1\u606F\n\t\tconsole.log(err);\n\t}\n\treturn res;\n}\n", "import { callWithErrorHandling } from './errorHandling';\n\nexport interface SchedulerJob extends Function {\n\tid?: number;\n}\n\nconst queue: SchedulerJob[] = [];\nlet isFlushing = false;\nconst resolvedPromise = Promise.resolve() as Promise<any>;\n\n// vue3 \u7684 nextTick \u6CA1\u6709\u50CFvue2\u90A3\u6837 \u4E00\u76F4\u964D\u7EA7\u5904\u7406\uFF0C\u4E0D\u8003\u8651\u517C\u5BB9\u95EE\u9898 \u76F4\u63A5promise\n// vue2: promise -> MutationObserver -> setTimeout ->\nexport function nextTick<T = void, R = void>(this: T, fn?: (this: T) => R) {\n\tconst p = resolvedPromise;\n\treturn fn ? p.then(this ? fn.bind(this) : fn) : p;\n}\n\nexport function queueJob(job: SchedulerJob) {\n\tif (!queue.length || !queue.includes(job)) {\n\t\tqueue.push(job);\n\t}\n\n\t// \u5F02\u6B65\u6267\u884C\u961F\u5217\u4E2D\u6240\u6709\u7684\u56DE\u8C03\n\tif (!isFlushing) {\n\t\tisFlushing = true;\n\t\tresolvedPromise.then(() => {\n\t\t\ttry {\n\t\t\t\tqueue.forEach(job => callWithErrorHandling(job, null));\n\t\t\t} finally {\n\t\t\t\t// \u540C\u4E00\u6279\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\u4E4B\u540E\uFF0C\u6E05\u7A7A\u961F\u5217\uFF0C\u91CD\u7F6E\u72B6\u6001\n\t\t\t\tisFlushing = false;\n\t\t\t\tqueue.length = 0;\n\t\t\t}\n\t\t});\n\t}\n}\n", "import { EMPTY_OBJ, NOOP, extend, hasOwn } from '@vue/shared';\nimport { track } from '@vue/reactivity';\nimport { ComponentInternalInstance } from './componentRenderUtils';\nimport { nextTick, queueJob } from './scheduler';\n\nconst enum AccessTypes {\n\tOTHER,\n\tSETUP,\n\tDATA,\n\tPROPS,\n\tCONTEXT\n}\n\nexport type PublicPropertiesMap = Record<string, (i: ComponentInternalInstance) => any>;\n\nexport const publicPropertiesMap = extend(Object.create(null), {\n\t// \u5217\u4E3E\u51E0\u4E2A\u5E38\u7528\u7684\u7684 \u5C5E\u6027\n\t$: i => i,\n\t$el: i => i.vnode.el,\n\t$data: i => i.data,\n\t$props: i => i.props,\n\t$attrs: i => i.attrs,\n\t$slots: i => i.slots,\n\t$refs: i => i.refs,\n\t$emit: i => i.emit,\n\n\t$options: i => i.type,\n\t$forceUpdate: i => queueJob(i.update),\n\t$nextTick: i => nextTick.bind(i.proxy),\n\t$watch: () => NOOP\n} as PublicPropertiesMap);\n\nexport const PublicInstanceProxyHandlers: ProxyHandler<any> = {\n\tget(instance: ComponentInternalInstance, key: string) {\n\t\tconst { accessCache, data, props, setupState } = instance;\n\n\t\tif (key[0] !== '$') {\n\t\t\t// \u83B7\u53D6data\u51FD\u6570\u4E2D\u7684\u503C\n\t\t\tif (data !== EMPTY_OBJ && hasOwn(data, key)) {\n\t\t\t\taccessCache[key] = AccessTypes.DATA;\n\t\t\t\treturn data[key];\n\t\t\t} else if (props !== EMPTY_OBJ && hasOwn(props, key)) {\n\t\t\t\treturn props[key];\n\t\t\t} else if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {\n\t\t\t\treturn setupState[key];\n\t\t\t}\n\t\t}\n\n\t\t// \u901A\u8FC7$\u7B26\u53F7\u8BBF\u95EE\u5C5E\u6027\n\t\t// $data $props $slots ...\n\t\tconst publicGetter = publicPropertiesMap[key];\n\t\tif (publicGetter) {\n\t\t\tif (key === '$attrs') {\n\t\t\t\t// \u89E6\u53D1\u6536\u96C6$attrs\n\t\t\t\ttrack(instance, key);\n\t\t\t}\n\t\t\treturn publicGetter(instance);\n\t\t}\n\t},\n\tset(instance: ComponentInternalInstance, key: string, newValue) {\n\t\tconst { data, props, setupState } = instance;\n\n\t\tif (data !== EMPTY_OBJ && hasOwn(data, key)) {\n\t\t\tdata[key] = newValue;\n\t\t\treturn true;\n\t\t} else if (hasOwn(props, key)) {\n\t\t\tconsole.warn('props is readonly');\n\t\t\treturn false;\n\t\t} else if (hasOwn(setupState, key)) {\n\t\t\tsetupState[key] = newValue;\n\t\t\treturn true;\n\t\t}\n\t}\n};\n", "import { Ref } from '@vue/reactivity';\nimport { ShapeFlags, isArray, isFunction, isObject, isString } from '@vue/shared';\nimport { RendererNode } from './renderer';\nimport { Component } from './component';\nimport { ComponentInternalInstance } from './componentRenderUtils';\n\n// ref='xxx'\n// ref=\"ref('xxx)\"\n// ref=\"(ref('xxx' | toRefs(reactive))) => void\"\nexport type VNodeRef = string | Ref | ((ref: Element | null, refs: Record<string, any>) => void);\n\nexport type VNodeProps = {\n\tkey?: string | number | symbol;\n\tref?: VNodeRef;\n};\n\n/**\u5360\u4F4D */\nexport const Fragment = Symbol.for('v-fgt') as any as {\n\t__isFragment: true;\n\tnew (): {\n\t\t$props: VNodeProps;\n\t};\n};\n/**\u7EAF\u6587\u672C */\nexport const Text = Symbol.for('v-txt');\n/**\u6CE8\u91CA\u8282\u70B9 */\nexport const Comment = Symbol.for('v-cmt');\n\n/**\u865A\u62DFnode\u7684\u7C7B\u578B\uFF0C\u6587\u672C \u6216\u8005\u662Fnode */\nexport type VNodeTypes = string | VNode | Component | typeof Text | typeof Comment | typeof Fragment;\n\nexport type Data = Record<string, unknown>;\n\ntype VNodeChildAtom = VNode | string | number | boolean | null | undefined | void;\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren;\n\nexport type VNodeArrayChildren = Array<VNodeChild>;\n\nexport type VNodeNormalizedChildren = string | VNodeArrayChildren | null;\n\nexport function isVNode(value: any): value is VNode {\n\treturn value ? value.__v_isVNode === true : false;\n}\n\nexport interface VNode<HostNode = RendererNode, ExtraProps = { [key: string]: any }> {\n\t/**\n\t * vnode\u6807\u8BC6\n\t */\n\t__v_isVNode: true;\n\n\t/**\n\t * vnode\u81EA\u5DF1\u7684\u7C7B\u578B\n\t */\n\ttype: VNodeTypes;\n\t/**\n\t * \u5C5E\u6027\n\t */\n\tprops: (VNodeProps & ExtraProps) | null;\n\t/**\n\t * \u5FAA\u73AF\u53D8\u91CF\uFF0C\u6307\u5B9A\u7684key\n\t */\n\tkey: string | number | symbol | null;\n\n\tref: VNodeRef | null;\n\n\t/**\n\t * \u5B69\u5B50\uFF0C\u5B69\u5B50\u7684\u7C7B\u578B\u53EF\u4EE5\u662F \u7A7A\u3001\u6587\u672C\u3001node\uFF0C\u4EE5\u53CA\u6570\u636E[\u6587\u672C]\u3001\u6570\u7EC4[node]\n\t */\n\tchildren: VNodeNormalizedChildren | null;\n\n\t// DOM\n\n\t// \u4FDD\u5B58\u5BF9\u5E94\u7684\u7EC4\u4EF6\u5B9E\u4F8B\n\tcomponent: ComponentInternalInstance | null;\n\n\t/**\n\t * \u6620\u5C04\u7684\u771F\u5B9E\u8282\u70B9\n\t */\n\tel: HostNode | null;\n\t/**\n\t * \u5BF9\u5E94\u7684\u4F4D\u7F6E\n\t */\n\tanchor: HostNode | null; // fragment anchor\n\n\t/**node\u5143\u7D20\u7C7B\u578Bflag */\n\t/**\u6807\u8BB0\u81EA\u5DF1\u662F\u4EC0\u4E48\u7C7B\u578B\u548C\u5B69\u5B50\u662F\u4EC0\u4E48\u7C7B\u578B */\n\tshapeFlag: number;\n}\n\n/**\u5904\u7406key */\nconst normalizeKey = ({ key }: VNodeProps): VNode['key'] => (key != null ? key : null);\n\nconst normalizeRef = ({ ref }: VNodeProps): VNode['ref'] => {\n\tif (typeof ref === 'number') {\n\t\tref = String(ref);\n\t}\n\treturn ref;\n};\n/**\n * \u521B\u5EFA\u865A\u62DFdom\uFF0C\u53EF\u80FD\u662F\u6587\u672C\u3001div\u666E\u901A\u5143\u7D20\u3001\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u3001\u6CE8\u91CA\u3001Fragment\u3001\u9759\u6001\u8282\u70B9\u3001Teleport\u3001Suspense\n */\nexport function createVNode(\n\ttype: VNodeTypes,\n\tprops: (VNodeProps & Data) | null = null,\n\tchildren: unknown = null\n): VNode {\n\t// \u6E90\u7801\u91CC\u9762\uFF1A\n\t// type: \u5982\u679C\u662FVNode \u9700\u8981cloneVNode\n\t// eg. :class=\"{a: xx, b: xxx}\" :class=\"['classA', {'classB': true }]\"\n\t// eg. :style=\"{'display': 'flex'}\" :style=\"[{'display': 'flex'}, { 'flex': 2 }]\"\n\t// props\u91CC\u9762\u5982\u679C\u6709class\u3001style \u4E5F\u9700\u8981\u62CD\u5E73\u5904\u7406\n\t// \u8FD9\u91CC\u4E3A\u4E86\u7B80\u4FBF\uFF1A\u5C31\u4E0D\u5904\u7406\u4E86\n\n\t// eg. h('div')  h('div', { props })  h('div', { props }, children)\n\t// \u5982\u679C\u6709\u503C\uFF0C\u4E00\u5B9A\u662F\u5143\u7D20\u7C7B\u578B\n\t// \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u5219\u4E3A\u7EC4\u4EF6\u7C7B\u578B\n\tconst shapeFlag = isString(type)\n\t\t? ShapeFlags.ELEMENT\n\t\t: isObject(type)\n\t\t? ShapeFlags.STATEFUL_COMPONENT\n\t\t: isFunction(type)\n\t\t? ShapeFlags.FUNCTIONAL_COMPONENT\n\t\t: 0;\n\n\treturn createBaseVNode(type, props, children, shapeFlag);\n}\n\nfunction createBaseVNode(\n\ttype: VNodeTypes,\n\tprops: (VNodeProps & Data) | null = null,\n\tchildren: any = null,\n\tshapeFlag = type === Fragment ? 0 : ShapeFlags.ELEMENT\n): VNode {\n\tconst vnode: VNode = {\n\t\t__v_isVNode: true,\n\t\ttype,\n\t\tprops,\n\t\tkey: props && normalizeKey(props),\n\t\tref: props && normalizeRef(props),\n\t\tchildren,\n\t\tel: null, // \u771F\u5B9E\u8282\u70B9 \u521D\u59CB\u5316\u4E3Anull\n\t\tanchor: null,\n\t\tcomponent: null,\n\t\tshapeFlag\n\t};\n\t// \u5904\u7406\u5B50\u7C7B\u578B\u548C\u81EA\u5DF1\u7684\u7C7B\u578B\n\tif (children) {\n\t\t// h('div', props, 'xxx') \u6E32\u67D3\u4E3A <div ...props>xxx</div>\n\t\t// h('div', props, [h('span', props, 'yyyy')]) \u6E32\u67D3\u4E3A <div ...props><span ...props>yyyy</span></div>\n\n\t\tvnode.shapeFlag |= isString(children) ? ShapeFlags.TEXT_CHILDREN : ShapeFlags.ARRAY_CHILDREN;\n\t}\n\treturn vnode;\n}\n\n// \u5224\u65AD\u662F\u5426\u662F\u540C\u4E00\u4E2A\u865A\u62DF\u8282\u70B9\uFF0C \u56E0\u4E3A\u6BCF\u4E2A\u865A\u62DF\u8282\u70B9\u7684type\u548Ckey\u90FD\u662F\u552F\u4E00\u7684\nexport function isSameVNodeType(n1: VNode, n2: VNode) {\n\treturn n1.type === n2.type && n1.key === n2.key;\n}\n\n// eg. h('div', props, h('span', props))  h('div', props, [h('span', props)])\n// \u5904\u7406child \u8F6C\u51FAvnode\nexport function normalizeVNode(child: VNodeChild): VNode {\n\tif (child === null || typeof child === 'boolean') {\n\t\t// \u6CE8\u91CA\u8282\u70B9\n\t\treturn createVNode(Comment);\n\t} else if (isArray(child)) {\n\t\t// \u6570\u7EC4\u7684\u8BDD \u7236\u5143\u7D20\u5F04\u4E2A\u7A7A\u7684\u5360\u4F4D\u7B26\uFF1AFragment\uFF0Cchild copy\u4E00\u4EFD\n\t\treturn createVNode(Fragment, null, child.slice());\n\t} else if (typeof child === 'object') {\n\t\t// \u672C\u8EAB\u5C31\u662F vnode\n\t\t// TODO: cloneVNode\n\t\treturn cloneVNode(child);\n\t} else {\n\t\t// string numbers\n\t\treturn createVNode(Text, null, String(child));\n\t}\n}\n\n// TODO:\u5B9E\u73B0\nexport function cloneVNode(vnode: VNode): VNode {\n\treturn vnode;\n}\n", "import { RendererOptions } from '@vue/runtime-core';\n\n// \u589E\u5220\u6539\u67E5\nexport const nodeOps: Omit<RendererOptions<Node, Element>, 'patchProp'> = {\n\t// \u589E\u52A0\u3001\u63D2\u5165\n\tinsert(child, parent, anchor) {\n\t\tparent.insertBefore(child, anchor || null);\n\t},\n\t// \u5220\u9664\n\tremove(child) {\n\t\tconst parent = child.parentNode;\n\t\tif (parent) {\n\t\t\tparent.removeChild(child);\n\t\t}\n\t},\n\tcreateElement(tagName) {\n\t\treturn document.createElement(tagName);\n\t},\n\tcreateText(text: string) {\n\t\treturn document.createTextNode(text);\n\t},\n\tcreateComment(data) {\n\t\treturn document.createComment(data);\n\t},\n\tsetText(el, text) {\n\t\tel.nodeValue = text;\n\t},\n\tsetElementText(el, text) {\n\t\tel.textContent = text;\n\t},\n\tparentNode(node) {\n\t\treturn node.parentNode as Element;\n\t},\n\tnextSibling(node) {\n\t\treturn node.nextSibling;\n\t},\n\tquertSelector(selector) {\n\t\treturn document.querySelector(selector);\n\t}\n};\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchClass(el: Element, value: string) {\n\tif (isNoEmptyValue(value)) {\n\t\t// \u76F4\u63A5\u8986\u76D6\n\t\tel.className = value;\n\t} else {\n\t\t// \u5220\u9664class\u5C5E\u6027\n\t\tel.removeAttribute('class');\n\t}\n}\n", "import { isString } from '@vue/shared';\n\ntype Style = string | Record<string, string | string[]> | null;\n\nexport function patchStyle(el: Element, prev: Style, next: Style) {\n\tconst style = (el as HTMLElement).style;\n\tconst isCssString = isString(next);\n\tconst isPrevCssString = isString(prev);\n\n\t// eg. <div :style={}></div> style\u662F\u4E2A\u5BF9\u8C61\n\n\t// \u5B58\u5728\u65B0\u503C\uFF0C\u5E76\u4E14\u662F\u5BF9\u8C61\n\tif (next && !isCssString) {\n\t\tif (prev && !isPrevCssString) {\n\t\t\t// \u8BF4\u660E\u8001\u503C \u548C\u65B0\u503C\u90FD\u662F\u5BF9\u8C61\n\t\t\tfor (const key in prev) {\n\t\t\t\t// \u8001\u503C \u5728\u65B0\u7684\u503C\u91CC\u9762\u6CA1\u6709\uFF0C\u5220\u9664\u8001\u503C\n\t\t\t\tif (next[key] == null) {\n\t\t\t\t\tstyle[key] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// \u8BBE\u7F6E\u65B0\u7684\u503C\n\t\tfor (const key in next) {\n\t\t\tstyle[key] = next[key];\n\t\t}\n\t} else {\n\t\t// eg. <div style=\"\"></div>\n\t\t// \u65B0\u503C\u662Fstring\n\t\tif (isCssString) {\n\t\t\t// \u6BD4\u8F83\u4E0B\u662F\u5426\u76F8\u7B49\n\t\t\tif (prev != next) {\n\t\t\t\tstyle.cssText = next;\n\t\t\t}\n\t\t} else if (prev) {\n\t\t\t// \u65B0\u503C\u662Fnull\uFF0C\u800C\u4E14\u5B58\u5728\u8001\u503C\uFF0C\u5220\u6389\u8001\u503C\n\t\t\tel.removeAttribute('style');\n\t\t}\n\t}\n}\n", "// \u4E8B\u4EF6fn\u7684\u7C7B\u578B\ntype EventValue = Function | ((e: Event) => void);\n\n// invoker.value = fn\nexport interface Invoker extends EventListener {\n\tvalue: EventValue;\n}\n\n// invoker \u8BB0\u5F55\u4E8B\u4EF6\u7684\u5BF9\u8C61\uFF0C\u5176value\u5C5E\u6027\u4FDD\u5B58\u7740\u5BF9\u7528\u6237\u4E8B\u4EF6\u7684\u5F15\u7528\uFF0C\n// \u5F53\u65B0\u7684\u503C\u8FC7\u6765\uFF0C \u53EA\u9700\u8981\u66FF\u6362value\u5C5E\u6027\u5373\u523B\n\nexport function patchEvent(\n\tel: Element & { _vei?: Record<string, Invoker | undefined> },\n\tkey: string,\n\tnextValue: EventValue | null\n) {\n\t// \u53BB\u6389on, \u4E8B\u4EF6\u540D\u79F0\u8F6C\u5C0F\u5199\n\t// onXxxx -> xxxx\n\tconst name = key.slice(2).toLowerCase();\n\n\t// _vei = vue event invokers \u7ED9element\u5143\u7D20\u6269\u5C55\u4E00\u4E2A_vei\u5BF9\u8C61\uFF0C\u5176\u4F5C\u7528\u5C31\u662F\u6682\u5B58invokers\n\t// \u6BCF\u5F53\u6709\u65B0\u7684fn\u8FDB\u6765\uFF0C\u5C31\u4F1A\u5148\u4ECE\u5143\u7D20\u4E0A\u53D6\u4E00\u904Dinvokers\uFF0C\u6CA1\u6709\u7684\u8BDD\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\n\t// \u6570\u636E\u7ED3\u6784\u5982\u4E0B\uFF1A\n\t// _vei = invokers = {\u4E8B\u4EF6\u540D\u79F0: invoker = fn}\n\t// fn\u51FD\u6570\u4E0A\u6709value\u5C5E\u6027 \u6620\u5C04\u7684\u662Ffn\u672C\u8EAB\n\tconst invokers = el._vei || (el._vei = {});\n\n\t// \u83B7\u53D6\u7F13\u5B58\u7684invokers\n\tconst existingInvoker = invokers[name];\n\n\t// \u5B58\u5728\u65B0\u503C \u4E5F\u5B58\u5728\u8001\u503C\n\tif (nextValue && existingInvoker) {\n\t\t// \u66FF\u6362\u8001\u503C\n\t\texistingInvoker.value = nextValue;\n\t} else {\n\t\t// \u6709\u53EF\u80FD\u65B0\u503C\u6CA1\u6709\uFF0C\u4E5F\u6709\u53EF\u80FD\u8001\u503C\u6CA1\u6709\n\n\t\tif (nextValue) {\n\t\t\t// \u5B58\u5728\u65B0\u503C\uFF0C\u4E0D\u5B58\u5728\u8001\u503C\n\t\t\t// \u8BBE\u7F6E\u65B0\u503C\u7684\u4E8B\u4EF6\u76D1\u542C\uFF0C \u7F13\u5B58invokers\n\t\t\tconst invoker = (invokers[name] = createInvoker(nextValue));\n\n\t\t\t// \u8BBE\u7F6E\u4E8B\u4EF6\u76D1\u542C\n\t\t\tel.addEventListener(name, invoker);\n\t\t} else if (existingInvoker) {\n\t\t\t// \u65B0\u503C\u662F\u6CA1\u6709\u7684\uFF0C\u4F46\u662F\u5B58\u5728\u8001\u503C\uFF0C\u610F\u5473\u7740\u8FD9\u6B21\u66F4\u65B0\uFF0Cfn\u4F20\u5165\u4E86null\uFF0C\u5C31\u9700\u8981\u79FB\u9664\u6389\u8001\u503C\u4E8B\u4EF6\n\t\t\tel.removeEventListener(name, existingInvoker);\n\t\t\t// \u5220\u9664\u7F13\u5B58\u7684invoker\n\t\t\tinvokers[name] = null;\n\t\t}\n\t}\n}\n\n/**\n *  invoker = fn\n * \tinvoker.value = invoker\n *\n * \tinvoker.value === invoker  true\n */\nfunction createInvoker(initialValue: EventValue): Invoker {\n\t// \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684invoker\u51FD\u6570\uFF0C \u5F53invoker\u6267\u884C\u7684\u65F6\u5019\uFF0C\u5C31\u662F\u6267\u884CinitialValue\u51FD\u6570\n\t// invoker.value === initialValue  true\n\tconst invoker: Invoker = (e: Event) => invoker.value(e);\n\t// \u8BBE\u7F6E\u65B0\u503C\n\tinvoker.value = initialValue;\n\treturn invoker;\n}\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchAttrs(el: Element, key: string, nextValue: any) {\n\tif (isNoEmptyValue(nextValue)) {\n\t\tel.setAttribute(key, nextValue);\n\t} else {\n\t\tel.removeAttribute(key);\n\t}\n}\n", "// \u8BBE\u7F6E\u5143\u7D20\u7684\u5C5E\u6027 class  style props event\n\nimport { RendererOptions } from '@vue/runtime-core';\nimport { patchClass } from './modules/class';\nimport { patchStyle } from './modules/style';\nimport { isOn } from '@vue/shared';\nimport { patchEvent } from './modules/events';\nimport { patchAttrs } from './modules/attrs';\n\nexport const patchProp: RendererOptions['patchProp'] = (el: Element, key: string, preValue: any, nextValue: any) => {\n\tif (key === 'class') {\n\t\tpatchClass(el, nextValue);\n\t} else if (key === 'style') {\n\t\tpatchStyle(el, preValue, nextValue);\n\t} else if (isOn(key)) {\n\t\tpatchEvent(el, key, nextValue);\n\t} else {\n\t\tpatchAttrs(el, key, nextValue);\n\t}\n};\n", "import { extend } from '@vue/shared';\nimport { nodeOps } from './nodeOps';\nimport { patchProp } from './patchProp';\nimport { Renderer, RootRenderFunction, createRenderer } from '@vue/runtime-core';\n\nconst rendererOptions = extend(nodeOps, { patchProp });\n\nlet renderer: Renderer<Element | ShadowRoot>;\n\n// \u61D2\u52A0\u8F7D\nfunction ensureRenderer() {\n\treturn renderer || (renderer = createRenderer(rendererOptions));\n}\n\nexport const render = ((...args) => {\n\tensureRenderer().render(...args);\n}) as RootRenderFunction<ShadowRoot>;\n\nexport * from '@vue/runtime-core';\n", "import { EMPTY_OBJ, NOOP, isArray, isFunction, isMap, isObject, isPlainObject, isSet } from '@vue/shared';\nimport { queueJob } from '@vue/runtime-core';\nimport { ComputedRef } from './computed';\nimport { EffectScheduler, ReactiveEffect } from './effect';\nimport { isReactive } from './reactive';\nimport { Ref, isRef } from './ref';\nimport { callWithErrorHandling } from 'packages/runtime-core/src/errorHandling';\n\nconst INITIAL_WATCHER_VALUE = {};\n\nexport interface WatchOptionsBase {\n\tflush?: 'sync' | 'pre';\n}\n\nexport interface WatchOptions<Immediate = boolean> extends WatchOptionsBase {\n\timmediate?: Immediate;\n\tdeep?: boolean;\n}\n\nexport type WatchEffect = (onCleanup: OnCleanup) => void;\n\n// () => T\uFF1A getter\n// ComputedRef: \u8BA1\u7B97\u5C5E\u6027\n// Ref<T> ref\n// \u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport type WatchSource<T = any> = Ref<T> | ComputedRef<T> | (() => T);\n\n// cleanupFn \u7528\u6237\u6267\u884C\u7684\u56DE\u8C03\ntype OnCleanup = (cleanupFn: () => void) => void;\n\nexport type WatchCallback<V = any, OV = any> = (value: V, oldValue: OV, onCleanup?: OnCleanup) => any;\n\nexport function watchEffect(effect: WatchEffect, options?: WatchOptions) {\n\tdoWatch(effect, null, options);\n}\n\n// watch \u53EF\u4EE5\u76D1\u542C ref\u3001 computed\u3001 reactive\u3001getter\n// \u5F53\u76D1\u542C\u6574\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61reactive\u65F6\uFF0C\u4F1A\u81EA\u52A8\u542F\u7528\u6DF1\u5C42\u6A21\u5F0F\uFF0C \u9012\u5F52\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u89E6\u53D1\u6BCF\u4E2A\u5C5E\u6027\u6536\u96C6effect\uFF0C\u6240\u4EE5\u4E0D\u5EFA\u8BAE\u76F4\u63A5\u76D1\u542C\u6574\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u4F1A\u6709\u9690\u5F62\u7684\u6027\u80FD\u5F71\u54CD\n// \u63A8\u8350\u4F7F\u7528getter \u65B9\u6CD5 \u8BBF\u95EE\u6BCF\u4E2A\u5C5E\u6027\uFF1A watch(() => state.name, cb)\nexport function watch<T = any, Immediate extends Readonly<boolean> = false>(\n\tsource: T | WatchSource<T>,\n\tcb: WatchCallback,\n\toptions?: WatchOptions<Immediate>\n) {\n\treturn doWatch(source as any, cb, options);\n}\n\nfunction doWatch(\n\tsource: WatchSource | WatchSource[] | WatchEffect | object,\n\tcb: WatchCallback | null,\n\t{ immediate, deep, flush }: WatchOptions = EMPTY_OBJ\n) {\n\tlet getter: () => any;\n\n\tif (isRef(source)) {\n\t\t// \u5982\u679C\u662Fref\uFF0C\u89E6\u53D1\u5C5E\u6027value\u6536\u96C6\u4F9D\u8D56\n\t\tgetter = () => source.value;\n\t} else if (isReactive(source)) {\n\t\t/**\n\t\t * @example\n\t\t * const state = reactive({name : 1})\n\t\t * watch(state, val => {})\n\t\t */\n\t\t// \u9012\u5F52\u904D\u5386\u5BF9\u8C61\uFF0C\u4F9D\u6B21\u53D6\u503C\uFF0C\u5C5E\u6027\u5C31\u4F1A\u6536\u96C6\u5185\u90E8\u7684effect\n\t\tgetter = () => source;\n\t\tdeep = true;\n\t} else if (isArray(source)) {\n\t\tgetter = () =>\n\t\t\tsource.map((s: any) => {\n\t\t\t\tif (isRef(s)) {\n\t\t\t\t\treturn s.value;\n\t\t\t\t} else if (isReactive(s)) {\n\t\t\t\t\treturn traverse(s);\n\t\t\t\t} else if (isFunction(s)) {\n\t\t\t\t\treturn callWithErrorHandling(s);\n\t\t\t\t}\n\t\t\t});\n\t} else if (isFunction(source)) {\n\t\t// watch cb\n\t\tif (cb) {\n\t\t\t/**\n\t\t\t * @example\n\t\t\t * const state = reactive({name : 1})\n\t\t\t * watch(() => state.name, val => {})\n\t\t\t */\n\t\t\t// \u76F4\u63A5\u8D4B\u503C\n\t\t\tgetter = source as any;\n\t\t} else {\n\t\t\t/**\n\t\t\t * @example\n\t\t\t * watchEffect(onCleanup => {\n\t\t\t\t\t\tonCleanup(() => {});\n\t\t\t\t\t\tconsole.log('watchEffect', state.name);\n\t\t\t\t\t});\n\t\t\t */\n\n\t\t\t// \u6267\u884CwatchEffect\u7684\u4F20\u5165\u7684\u51FD\u6570\uFF0C\u67092\u4E2A\u529F\u80FD\uFF1A\n\t\t\t// 1\uFF1A\u5C5E\u6027\u6536\u96C6effect\uFF0C\u4E0B\u6B21proxy\u5C5E\u6027\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\uFF0C\u6267\u884C\u81EA\u5B9A\u4E49\u7684scheduler\n\t\t\t// 2\uFF1A\u62FF\u5230\u7528\u6237onCleanup\u7684\u56DE\u8C03\uFF0C\u5728\u4E0B\u6B21\u6267\u884C\u65F6\uFF0C\u8C03\u7528 \u7528\u6237\u7684onCleanup\u56DE\u8C03\n\t\t\tgetter = () => {\n\t\t\t\tif (cleanup) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\treturn source(onCleanup);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tgetter = NOOP;\n\t}\n\n\t// \u5F53\u76F4\u63A5\u4FA6\u542C\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\u65F6\uFF0C\u4FA6\u542C\u5668\u4F1A\u81EA\u52A8\u542F\u7528\u6DF1\u5C42\u6A21\u5F0F\uFF0C\u5BF9\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6BCF\u4E2A\u5C5E\u6027\n\tif (cb && deep) {\n\t\tgetter = () => traverse(source);\n\t}\n\n\t// \u521D\u59CB\u5316undefined\uFF0C\u7B2C\u4E00\u6B21\u89E6\u53D1watch\u56DE\u8C03\uFF0ColdValue \u662F\u6CA1\u6709\u7684\n\tlet oldValue = INITIAL_WATCHER_VALUE;\n\n\t// \u6682\u5B58\u7528\u6237\u4F20\u5165\u8FDB\u53BB\u7684OnCleanup\u56DE\u8C03\u51FD\u6570\n\t// \u5728\u4E0B\u4E00\u6B21\u6267\u884Cwatch\u7684\u56DE\u8C03\u65F6\uFF0C\u6267\u884C\u4E00\u904Dcleanup\n\tlet cleanup: () => void;\n\tconst onCleanup: OnCleanup = (fn: () => void) => {\n\t\t// \u6267\u884Ccleanup\u64CD\u4F5C\u4E5F\u8981\u6267\u884Cstop\n\t\tcleanup = effect.stop = () => {\n\t\t\tfn();\n\t\t};\n\t};\n\n\t// \u81EA\u5B9A\u4E49 scheduler\uFF0C\u53EF\u4EE5\u63A7\u5236\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\u65F6\u673A\n\tconst job = () => {\n\t\tif (!effect.active) {\n\t\t\treturn;\n\t\t}\n\t\tif (cb) {\n\t\t\t// \u6267\u884Cgetter\u65B9\u6CD5\uFF0C\u62FF\u5230\u6700\u65B0\u7684\u8FD4\u56DE\u503C\n\t\t\tconst newValue = effect.run();\n\n\t\t\tif (cleanup) {\n\t\t\t\tcleanup();\n\t\t\t}\n\n\t\t\t// \u4F20\u7ED9watch\u56DE\u8C03\n\t\t\tcb(newValue, oldValue, onCleanup);\n\t\t\t// \u66F4\u65B0\u8001\u503C\n\t\t\toldValue = newValue;\n\t\t} else {\n\t\t\t// watchEffect\n\t\t\teffect.run();\n\t\t}\n\t};\n\n\t// getter \u65B9\u6CD5\u91CC\u9762\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u6536\u96C6\u4E86\u8FD9\u4E2Aeffect\uFF0C\u5F53\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u53D1\u751Fset\uFF0C\u5C31\u4F1A\u89E6\u53D1\u8FD9\u91CC\u7684job\u65B9\u6CD5\uFF0C\n\t// job\u65B9\u6CD5\u91CC\u9762\u6267\u884Cgetter\u65B9\u6CD5\uFF0C\u62FF\u5230\u6700\u65B0\u7684\u503C\uFF0C\u7136\u540E\u5C06\u8001\u503C\uFF0C\u65B0\u503C\u629B\u51FAcb\uFF0C\u7528\u6237\u5C31\u80FD\u62FF\u5230\u65E7 \u65B0 \u503C\n\n\t// watch\u662F effect + \u81EA\u5B9A\u4E49scheduler, scheduler\u56DE\u8C03\u63A7\u5236cb\u56DE\u4F20\u6570\u503C\n\t// watchEffect \u5C31\u662Feffect\uFF0C\u5F53\u6570\u636E\u53D8\u5316\u65F6\uFF0C\u76F4\u63A5\u89E6\u53D1\u56DE\u8C03\u66F4\u65B0\n\n\tlet scheduler: EffectScheduler;\n\tif (flush === 'sync') {\n\t\t// \u540C\u6B65\u66F4\u65B0\n\t\tscheduler = job;\n\t} else {\n\t\t// \u9ED8\u8BA4\u662F\u5F02\u6B65\uFF0C\u591A\u6B21\u89E6\u53D1\u53EA\u4F1A\u6267\u884C\u4E00\u6B21\uFF0C \u6279\u5904\u7406\n\t\tscheduler = () => queueJob(job);\n\t}\n\n\tconst effect = new ReactiveEffect(getter, scheduler);\n\n\tif (cb) {\n\t\tif (immediate) {\n\t\t\t// \u7ACB\u5373\u89E6\u53D1\n\t\t\tjob();\n\t\t} else {\n\t\t\t// \u5982\u679C\u7528\u6237\u6CA1\u6709\u5199immediate\uFF0C\u4E3B\u52A8\u89E6\u53D1\uFF0C\n\t\t\t// \u8FD9\u91CC\u7A0B\u5E8F\u8981\u4E3B\u52A8\u89E6\u53D1getter\u62FF\u5230\u8001\u503C\uFF0C\u540C\u65F6\u56E0\u4E3A\u6709\u5C5E\u6027\u8BBF\u95EE\uFF0C\u89E6\u53D1\u5F53\u524D\u76D1\u542C\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u4F9D\u8D56\u6536\u96C6effect\uFF0C\u5F53\u5C5E\u6027\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4F9D\u8D56effect\u66F4\u65B0, \u62FF\u5230\u65B0\u503C\n\t\t\toldValue = effect.run();\n\t\t}\n\t} else {\n\t\t// watchEffect \u9ED8\u8BA4\u6267\u884C\u4E00\u6B21\n\t\teffect.run();\n\t}\n\n\t// \u505C\u6B62\u4FA6\u542C\u5668\n\treturn () => effect.stop();\n}\n\nexport function traverse(value: unknown, seen?: Set<unknown>) {\n\t// reactive\u5BF9\u8C61\u91CC\u9762\u53EF\u4EE5\u6709\u5982\u4E0B\u503C\uFF1Aarray, set\u3001map\u3001\u666E\u901A\u5BF9\u8C61\uFF0C\u6240\u4EE5\u8981\u5206\u522B\u5904\u7406\n\n\tif (!isObject(value)) {\n\t\treturn value;\n\t}\n\tseen = seen || new Set();\n\tif (seen.has(value)) {\n\t\treturn value;\n\t}\n\tseen.add(value);\n\tif (isRef(value)) {\n\t\ttraverse(value.value, seen);\n\t} else if (isMap(value) || isSet(value)) {\n\t\tvalue.forEach((val: any) => {\n\t\t\ttraverse(val, seen);\n\t\t});\n\t} else if (isArray(value)) {\n\t\tfor (let index = 0; index < value.length; index++) {\n\t\t\ttraverse(value[index], seen);\n\t\t}\n\t} else if (isPlainObject(value)) {\n\t\tfor (const key in value) {\n\t\t\ttraverse(value[key], seen);\n\t\t}\n\t}\n\treturn value;\n}\n"],
  "mappings": "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",
  "names": ["effect", "effect", "ref", "set", "isReadonly", "get", "ReactiveFlags", "isReadonly", "job", "effect"]
}
