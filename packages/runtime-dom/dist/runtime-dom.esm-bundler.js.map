{
  "version": 3,
  "sources": ["../../shared/src/general.ts", "../src/nodeOps.ts", "../src/modules/class.ts", "../src/modules/style.ts", "../src/modules/events.ts", "../src/modules/attrs.ts", "../src/patchProp.ts", "../src/index.ts"],
  "sourcesContent": ["export const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === 'object';\n\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue);\n\nexport const isFunction = (val: unknown): val is Function => typeof val === 'function';\n\nexport const NOOP = () => {};\n\nexport const isArray = Array.isArray;\nexport const isMap = (val: unknown): val is Map<any, any> => toTypeString(val) === '[object Map]';\nexport const isSet = (val: unknown): val is Set<any> => toTypeString(val) === '[object Set]';\nexport const isString = (val: unknown): val is String => typeof val === 'string';\n\nexport const objectToString = Object.prototype.toString;\nexport const toTypeString = (value: unknown): string => objectToString.call(value);\n\nexport const isPlainObject = (val: unknown): val is object => toTypeString(val) === '[object Object]';\n\nexport const isNoEmptyValue = (val: unknown) => val !== undefined || val !== null;\n\nexport const extend = Object.assign;\n\n// \u4E8B\u4EF6 onXxxx \u6216\u8005\u4E5F\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A /^on[A-Z]/\nexport const onRE = /^on[^a-z]/;\n\nexport const isOn = (key: string) => onRE.test(key);\n", "import { RendererOptions } from '@vue/runtime-core';\n\n// \u589E\u5220\u6539\u67E5\nexport const nodeOps: Omit<RendererOptions, 'patchProp'> = {\n\t// \u589E\u52A0\u3001\u63D2\u5165\n\tinsert(child, parent, anchor) {\n\t\tparent.insertBefore(child, anchor || null);\n\t},\n\t// \u5220\u9664\n\tremove(child) {\n\t\tconst parent = child.parentNode;\n\t\tif (parent) {\n\t\t\tparent.removeChild(child);\n\t\t}\n\t},\n\tcreateElement(tagName) {\n\t\treturn document.createElement(tagName);\n\t},\n\tcreateText(text: string) {\n\t\treturn document.createTextNode(text);\n\t},\n\tcreateComment(data) {\n\t\treturn document.createComment(data);\n\t},\n\tsetText(el, text) {\n\t\tel.nodeValue = text;\n\t},\n\tsetElementText(el, text) {\n\t\tel.textContent = text;\n\t},\n\tparentNode(node) {\n\t\treturn node.parentNode as Element;\n\t},\n\tnextSilbing(node) {\n\t\treturn node.nextSibling;\n\t},\n\tquertSelector(selector) {\n\t\treturn document.querySelector(selector);\n\t}\n};\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchClass(el: Element, value: string) {\n\tif (isNoEmptyValue(value)) {\n\t\t// \u76F4\u63A5\u8986\u76D6\n\t\tel.className = value;\n\t} else {\n\t\t// \u5220\u9664class\u5C5E\u6027\n\t\tel.removeAttribute('class');\n\t}\n}\n", "import { isNoEmptyValue, isString } from '@vue/shared';\n\ntype Style = string | Record<string, string | string[]> | null;\n\nexport function patchStyle(el: Element, prev: Style, next: Style) {\n\tconst style = (el as HTMLElement).style;\n\tconst isCssString = isString(next);\n\tconst isPrevCssString = isString(prev);\n\n\t// eg. <div :style={}></div> style\u662F\u4E2A\u5BF9\u8C61\n\n\t// \u5B58\u5728\u65B0\u503C\uFF0C\u5E76\u4E14\u662F\u5BF9\u8C61\n\tif (next && !isCssString) {\n\t\tif (prev && !isPrevCssString) {\n\t\t\t// \u8BF4\u660E\u8001\u503C \u548C\u65B0\u503C\u90FD\u662F\u5BF9\u8C61\n\t\t\tfor (const key in prev) {\n\t\t\t\t// \u8001\u503C \u5728\u65B0\u7684\u503C\u91CC\u9762\u6CA1\u6709\n\t\t\t\tif (!isNoEmptyValue(next[key])) {\n\t\t\t\t\tstyle[key] = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \u8BBE\u7F6E\u65B0\u7684\u503C\n\t\t\tfor (const key in next) {\n\t\t\t\tstyle[key] = next[key];\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// eg. <div style=\"\"></div>\n\t\t// \u65B0\u503C\u662Fstring\n\t\tif (isCssString) {\n\t\t\t// \u6BD4\u8F83\u4E0B\u662F\u5426\u76F8\u7B49\n\t\t\tif (prev != next) {\n\t\t\t\tstyle.cssText = next;\n\t\t\t}\n\t\t} else if (prev) {\n\t\t\t// \u65B0\u503C\u662Fnull\uFF0C\u800C\u4E14\u5B58\u5728\u8001\u503C\uFF0C\u5220\u6389\u8001\u503C\n\t\t\tel.removeAttribute('style');\n\t\t}\n\t}\n}\n", "// \u4E8B\u4EF6fn\u7684\u7C7B\u578B\ntype EventValue = Function | ((e: Event) => void);\n\n// invoker.value = fn\nexport interface Invoker extends EventListener {\n\tvalue: EventValue;\n}\n\n// invoker \u8BB0\u5F55\u4E8B\u4EF6\u7684\u5BF9\u8C61\uFF0C\u5176value\u5C5E\u6027\u4FDD\u5B58\u7740\u5BF9\u7528\u6237\u4E8B\u4EF6\u7684\u5F15\u7528\uFF0C\n// \u5F53\u65B0\u7684\u503C\u8FC7\u6765\uFF0C \u53EA\u9700\u8981\u66FF\u6362value\u5C5E\u6027\u5373\u523B\n\nexport function patchEvent(\n\tel: Element & { _vei?: Record<string, Invoker | undefined> },\n\tkey: string,\n\tnextValue: EventValue | null\n) {\n\t// \u53BB\u6389on, \u4E8B\u4EF6\u540D\u79F0\u8F6C\u5C0F\u5199\n\t// onXxxx -> xxxx\n\tconst name = key.slice(2).toLowerCase();\n\n\t// _vei = vue event invokers \u7ED9element\u5143\u7D20\u6269\u5C55\u4E00\u4E2A_vei\u5BF9\u8C61\uFF0C\u5176\u4F5C\u7528\u5C31\u662F\u6682\u5B58invokers\n\t// \u6BCF\u5F53\u6709\u65B0\u7684fn\u8FDB\u6765\uFF0C\u5C31\u4F1A\u5148\u4ECE\u5143\u7D20\u4E0A\u53D6\u4E00\u904Dinvokers\uFF0C\u6CA1\u6709\u7684\u8BDD\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\n\t// \u6570\u636E\u7ED3\u6784\u5982\u4E0B\uFF1A\n\t// _vei = invokers = {\u4E8B\u4EF6\u540D\u79F0: invoker = fn}\n\t// fn\u51FD\u6570\u4E0A\u6709value\u5C5E\u6027 \u6620\u5C04\u7684\u662Ffn\u672C\u8EAB\n\tconst invokers = el._vei || (el._vei = {});\n\n\t// \u83B7\u53D6\u7F13\u5B58\u7684invokers\n\tconst existingInvoker = invokers[name];\n\n\t// \u5B58\u5728\u65B0\u503C \u4E5F\u5B58\u5728\u8001\u503C\n\tif (nextValue && existingInvoker) {\n\t\t// \u66FF\u6362\u8001\u503C\n\t\texistingInvoker.value = nextValue;\n\t} else {\n\t\t// \u6709\u53EF\u80FD\u65B0\u503C\u6CA1\u6709\uFF0C\u4E5F\u6709\u53EF\u80FD\u8001\u503C\u6CA1\u6709\n\n\t\tif (nextValue) {\n\t\t\t// \u5B58\u5728\u65B0\u503C\uFF0C\u4E0D\u5B58\u5728\u8001\u503C\n\t\t\t// \u8BBE\u7F6E\u65B0\u503C\u7684\u4E8B\u4EF6\u76D1\u542C\uFF0C \u7F13\u5B58invokers\n\t\t\tconst invoker = (invokers[name] = createInvoker(nextValue));\n\n\t\t\t// \u8BBE\u7F6E\u4E8B\u4EF6\u76D1\u542C\n\t\t\tel.addEventListener(name, invoker);\n\t\t} else if (existingInvoker) {\n\t\t\t// \u65B0\u503C\u662F\u6CA1\u6709\u7684\uFF0C\u4F46\u662F\u5B58\u5728\u8001\u503C\uFF0C\u610F\u5473\u7740\u8FD9\u6B21\u66F4\u65B0\uFF0Cfn\u4F20\u5165\u4E86null\uFF0C\u5C31\u9700\u8981\u79FB\u9664\u6389\u8001\u503C\u4E8B\u4EF6\n\t\t\tel.removeEventListener(name, existingInvoker);\n\t\t\t// \u5220\u9664\u7F13\u5B58\u7684invoker\n\t\t\tinvokers[name] = null;\n\t\t}\n\t}\n}\n\n/**\n *  invoker = fn\n * \tinvoker.value = invoker\n *\n * \tinvoker.value === invoker  true\n */\nfunction createInvoker(initialValue: EventValue): Invoker {\n\t// \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684invoker\u51FD\u6570\uFF0C \u5F53invoker\u6267\u884C\u7684\u65F6\u5019\uFF0C\u5C31\u662F\u6267\u884CinitialValue\u51FD\u6570\n\t// invoker.value === initialValue  true\n\tconst invoker: Invoker = (e: Event) => invoker.value(e);\n\t// \u8BBE\u7F6E\u65B0\u503C\n\tinvoker.value = initialValue;\n\treturn invoker;\n}\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchAttrs(el: Element, key: string, nextValue: any) {\n\tif (isNoEmptyValue(nextValue)) {\n\t\tel.setAttribute(key, nextValue);\n\t} else {\n\t\tel.removeAttribute(key);\n\t}\n}\n", "// \u8BBE\u7F6E\u5143\u7D20\u7684\u5C5E\u6027 class  style props event\n\nimport { RendererOptions } from '@vue/runtime-core';\nimport { patchClass } from './modules/class';\nimport { patchStyle } from './modules/style';\nimport { isOn } from '@vue/shared';\nimport { patchEvent } from './modules/events';\nimport { patchAttrs } from './modules/attrs';\n\nexport const patchProp: RendererOptions['patchProp'] = (el: Element, key: string, preValue: any, nextValue: any) => {\n\t// TODO: patchProp\n\tif (key === 'class') {\n\t\tpatchClass(el, nextValue);\n\t} else if (key === 'style') {\n\t\tpatchStyle(el, preValue, nextValue);\n\t} else if (isOn(key)) {\n\t\tpatchEvent(el, key, nextValue);\n\t} else {\n\t\tpatchAttrs(el, key, nextValue);\n\t}\n};\n", "import { extend } from '@vue/shared';\nimport { nodeOps } from './nodeOps';\nimport { patchProp } from './patchProp';\n\nextend(nodeOps, { patchProp });\n"],
  "mappings": "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",
  "names": []
}
