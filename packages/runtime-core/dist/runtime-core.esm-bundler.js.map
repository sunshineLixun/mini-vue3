{
  "version": 3,
  "sources": ["../../shared/src/general.ts", "../src/renderer.ts", "../src/vnode.ts", "../src/h.ts", "../../runtime-dom/src/nodeOps.ts", "../../runtime-dom/src/modules/class.ts", "../../runtime-dom/src/modules/style.ts", "../../runtime-dom/src/modules/events.ts", "../../runtime-dom/src/modules/attrs.ts", "../../runtime-dom/src/patchProp.ts", "../../runtime-dom/src/index.ts"],
  "sourcesContent": ["export const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === 'object';\n\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue);\n\nexport const isFunction = (val: unknown): val is Function => typeof val === 'function';\n\nexport const NOOP = () => {};\n\nexport const isArray = Array.isArray;\nexport const isMap = (val: unknown): val is Map<any, any> => toTypeString(val) === '[object Map]';\nexport const isSet = (val: unknown): val is Set<any> => toTypeString(val) === '[object Set]';\nexport const isString = (val: unknown): val is String => typeof val === 'string';\n\nexport const objectToString = Object.prototype.toString;\nexport const toTypeString = (value: unknown): string => objectToString.call(value);\n\nexport const isPlainObject = (val: unknown): val is object => toTypeString(val) === '[object Object]';\n\nexport const isNoEmptyValue = (val: unknown) => val !== undefined || val !== null;\n\nexport const extend = Object.assign;\n\n// \u4E8B\u4EF6 onXxxx \u6216\u8005\u4E5F\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A /^on[A-Z]/\nexport const onRE = /^on[^a-z]/;\n\nexport const isOn = (key: string) => onRE.test(key);\n", "import { Text, VNode, VNodeProps, isSameVNodeType } from '@vue/runtime-core';\nimport { ShapeFlags } from '@vue/shared';\n\nexport interface Renderer<HostElement = RendererElement> {\n\trender: RootRenderFunction<HostElement>;\n}\n\n// \u589E\u5220\u6539\u67E5\nexport interface RendererOptions<HostNode = RendererNode, HostElement = RendererElement> {\n\tpatchProp(el: RendererElement, key: string, preValue: any, nextValue: any): void;\n\t/**\n\t * \u63D2\u5165 (\u589E\u52A0\u3001\u79FB\u52A8)\n\t * @param el \u5B50\u8282\u70B9\n\t * @param parent \u7236\u5143\u7D20\n\t * @param anchor \u63CF\u70B9 \u8282\u70B9\n\t */\n\tinsert(el: HostNode, parent: HostElement, anchor: HostNode | null): void;\n\t/**\n\t * \u5220\u9664\n\t * @param el \u5B50\u8282\u70B9\n\t */\n\tremove(el: HostNode): void;\n\t/**\n\t * \u65B0\u589E\u4E00\u4E2A\u8282\u70B9\n\t * @param tagName tageName\n\t * @param props \u5C5E\u6027\n\t */\n\tcreateElement(tagName: string, props?: VNodeProps): HostElement;\n\n\t/**\n\t * \u521B\u5EFA\u6587\u672CNode\n\t * @param text \u6587\u672C\u5185\u5BB9\n\t */\n\tcreateText(text: string): Text;\n\n\t/**\n\t * \u8BBE\u7F6E\u8282\u70B9\u5185\u5BB9\n\t * @param el \u8282\u70B9\n\t * @param text \u6587\u672C\u5185\u5BB9\n\t */\n\tsetText(el: HostNode, text: string): void;\n\n\t/**\n\t * \u8BBE\u7F6E\u5143\u7D20\u7684textContent\n\t * @param el\n\t * @param text\n\t */\n\tsetElementText(el: HostElement, text: string): void;\n\n\t/**\n\t * \u6CE8\u91CA\u8282\u70B9\n\t * @param data \u6CE8\u91CA\u5185\u5BB9\n\t */\n\tcreateComment(data: string): Comment;\n\n\t/**\n\t * \u83B7\u53D6\u7236\u8282\u70B9\n\t * @param node \u5B50\u8282\u70B9\n\t */\n\tparentNode(child: HostNode): HostElement;\n\n\t/**\n\t * \u83B7\u53D6\u5144\u5F1F\u8282\u70B9\n\t * @param node\n\t */\n\tnextSibling(node: HostNode): HostNode;\n\n\tquertSelector(selector: string): HostElement;\n}\n\nexport interface RendererNode {\n\t[key: string]: any;\n}\n\nexport interface RendererElement extends RendererNode {}\n\nexport type RootRenderFunction<HostElement = RendererElement> = (vnode: VNode | null, container: HostElement) => void;\n\n/**\n * n1 \u6807\u8BC6\u5DF2\u7ECF\u8001\u8282\u70B9\uFF0Cn2\u6807\u8BC6\u65B0\u8282\u70B9  container\u6807\u8BC6\u6E32\u67D3\u8DDF\u5143\u7D20\n */\ntype PatchFn = (n1: VNode | null, n2: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\ntype NextFn = (vnode: VNode) => RendererNode;\n\ntype ProcessTextFn = (n1: VNode | null, n2: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\ntype ProcessElementFn = (n1: VNode | null, n2: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\ntype MountElementFn = (vnode: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\ntype PatchElementFn = (n1: VNode | null, n2: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\nexport function createRenderer(options: RendererOptions) {\n\treturn baseCreateRenderer(options);\n}\n\nfunction baseCreateRenderer(options: RendererOptions) {\n\tconst {\n\t\tinsert: hostInsert,\n\t\tremove: hostRemove,\n\t\tpatchProp: hostPatchProp,\n\t\tcreateElement: hostCreateElement,\n\t\tcreateText: hostCreateText,\n\t\tcreateComment: hostCreateComment,\n\t\tsetText: hostSetText,\n\t\tsetElementText: hostSetElementText,\n\t\tparentNode: hostParentNode,\n\t\tnextSibling: hostNextSibling\n\t} = options;\n\n\tconst mountElement: MountElementFn = (vnode, container, anchor) => {\n\t\t// \u771F\u5B9E\u8282\u70B9\n\t\tlet el: RendererElement;\n\n\t\tconst { type, shapeFlag, props } = vnode;\n\t\tel = vnode.el = hostCreateElement(type as string);\n\t};\n\n\tconst patchElement: PatchElementFn = (n1, n2, container, anchor) => {};\n\n\tconst processElement: ProcessElementFn = (n1, n2, container, anchor) => {\n\t\tif (n1 == null) {\n\t\t\t// \u521D\u6B21\u6E32\u67D3\n\t\t\tmountElement(n2, container, anchor);\n\t\t} else {\n\t\t\t// diff\n\t\t\tpatchElement(n1, n2, container, anchor);\n\t\t}\n\t};\n\n\tconst patch: PatchFn = (n1, n2, container, anchor) => {\n\t\t// \u76F8\u540C\u7684\u8282\u70B9\uFF0C\u76F4\u63A5\u8FD4\u56DE\n\t\tif (n1 === n2) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (n1 && !isSameVNodeType(n1, n2)) {\n\t\t\t// \u83B7\u53D6\u8001\u8282\u70B9\u76F8\u90BB\u7684\u8282\u70B9\n\t\t\tanchor = getNextHostNode(n1);\n\t\t\t// \u5B58\u5728\u8001\u8282\u70B9\uFF0C\u5E76\u4E14\u65B0\u8282\u70B9\u548C\u8001\u8282\u70B9\u4E0D\u4E00\u6837\uFF0C\u5378\u8F7D\u8001\u8282\u70B9\n\t\t\tunmount();\n\t\t\tn1 = null;\n\t\t}\n\n\t\tconst { type, shapeFlag } = n2;\n\t\tconsole.log(type, Text, shapeFlag);\n\t\t//  TODO: \u5224\u65AD\u8282\u70B9\u7C7B\u578B, \u6709Text Comment Fragment Static\n\t\t// \u8FD9\u91CC\u5148\u5904\u7406\u666E\u901A\u5143\u7D20\n\t\tif (shapeFlag & ShapeFlags.ELEMENT) {\n\t\t\t// \u666E\u901A\u5143\u7D20\n\t\t\tprocessElement(n1, n2, container, anchor);\n\t\t}\n\t};\n\n\t// TODO:\u5378\u8F7D\n\tconst unmount = () => {};\n\n\tconst getNextHostNode: NextFn = vnode => {\n\t\tif (vnode.shapeFlag & ShapeFlags.COMPONENT) {\n\t\t\t// \u7EC4\u4EF6\n\t\t\t// TODO:\u83B7\u53D6\u76F8\u90BB\u7684\u7EC4\u4EF6\n\t\t}\n\t\treturn hostNextSibling(vnode.anchor || vnode.el);\n\t};\n\n\tconst render: RootRenderFunction = (vnode, container) => {\n\t\tif (vnode == null) {\n\t\t\t// \u6CA1\u6709\u65B0\u8282\u70B9 \u4F46\u662F\u6709\u65E7\u7684\u8282\u70B9\uFF0C\u8981\u5220\u9664 \u5378\u8F7D\u6389\n\t\t\tif (container._vnode) {\n\t\t\t\tunmount();\n\t\t\t}\n\t\t} else {\n\t\t\tpatch(container._vnode || null, vnode, container, null);\n\t\t}\n\t\t// \u4FDD\u5B58\u8001\u8282\u70B9\n\t\tcontainer._vnode = vnode;\n\t};\n\treturn {\n\t\trender\n\t};\n}\n", "import { Ref } from '@vue/reactivity';\nimport { ShapeFlags, isString } from '@vue/shared';\nimport { RendererElement, RendererNode } from './renderer';\n\n// ref='xxx'\n// ref=\"ref('xxx)\"\n// ref=\"(ref('xxx' | toRefs(reactive))) => void\"\nexport type VNodeRef = string | Ref | ((ref: Element | null, refs: Record<string, any>) => void);\n\nexport type VNodeProps = {\n\tkey?: string | number | symbol;\n\tref?: VNodeRef;\n};\n\n/**\u5360\u4F4D */\nexport const Fragment = Symbol.for('v-fgt') as any as {\n\t__isFragment: true;\n\tnew (): {\n\t\t$props: VNodeProps;\n\t};\n};\n/**\u7EAF\u6587\u672C */\nexport const Text = Symbol.for('v-txt');\n/**\u6CE8\u91CA\u8282\u70B9 */\nexport const Comment = Symbol.for('v-cmt');\n/**\u9759\u6001\u8282\u70B9\uFF0Cchildren\u7684\u5185\u5BB9\u4E0D\u4F1A\u53D8\u52A8\u7684\u3002 eg. <div>123</div> */\nexport const Static = Symbol.for('v-stc');\n\n/**\u865A\u62DFnode\u7684\u7C7B\u578B\uFF0C\u6587\u672C \u6216\u8005\u662Fnode */\nexport type VNodeTypes = string | VNode | typeof Text | typeof Static | typeof Comment | typeof Fragment;\n\nexport type Data = Record<string, unknown>;\n\ntype VNodeChildAtom = VNode | string | number | boolean | null | undefined | void;\n\nexport type VNodeArrayChildren = Array<VNodeArrayChildren | VNodeChildAtom>;\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren;\n\nexport type VNodeNormalizedChildren = string | VNodeArrayChildren | null;\n\nexport function isVNode(value: any): value is VNode {\n\treturn value ? value.__v_isVNode === true : false;\n}\n\nexport interface VNode<HostNode = RendererNode, ExtraProps = { [key: string]: any }> {\n\t/**\n\t * vnode\u6807\u8BC6\n\t */\n\t__v_isVNode: true;\n\n\t/**\n\t * vnode\u81EA\u5DF1\u7684\u7C7B\u578B\n\t */\n\ttype: VNodeTypes;\n\t/**\n\t * \u5C5E\u6027\n\t */\n\tprops: (VNodeProps & ExtraProps) | null;\n\t/**\n\t * \u5FAA\u73AF\u53D8\u91CF\uFF0C\u6307\u5B9A\u7684key\n\t */\n\tkey: string | number | symbol | null;\n\n\t/**\n\t * \u5B69\u5B50\uFF0C\u5B69\u5B50\u7684\u7C7B\u578B\u53EF\u4EE5\u662F \u7A7A\u3001\u6587\u672C\u3001node\uFF0C\u4EE5\u53CA\u6570\u636E[\u6587\u672C]\u3001\u6570\u7EC4[node]\n\t */\n\tchildren: VNodeNormalizedChildren | null;\n\n\t// DOM\n\n\t/**\n\t * \u6620\u5C04\u7684\u771F\u5B9E\u63A5\u5355\n\t */\n\tel: HostNode | null;\n\t/**\n\t * \u5BF9\u5E94\u7684\u4F4D\u7F6E\n\t */\n\tanchor: HostNode | null; // fragment anchor\n\n\t/**node\u5143\u7D20\u7C7B\u578Bflag */\n\t/**\u6807\u8BB0\u81EA\u5DF1\u662F\u4EC0\u4E48\u7C7B\u578B\u548C\u5B69\u5B50\u662F\u4EC0\u4E48\u7C7B\u578B */\n\tshapeFlag: number;\n}\n\n/**\u5904\u7406key */\nconst normalizeKey = ({ key }: VNodeProps): VNode['key'] => (key != null ? key : null);\n\n/**\n * \u521B\u5EFA\u865A\u62DFdom\uFF0C\u53EF\u80FD\u662F\u6587\u672C\u3001div\u666E\u901A\u5143\u7D20\u3001\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u3001\u6CE8\u91CA\u3001Fragment\u3001\u9759\u6001\u8282\u70B9\u3001Teleport\u3001Suspense\n */\nexport function createVNode(\n\ttype: VNodeTypes,\n\tprops: (VNodeProps & Data) | null = null,\n\tchildren: unknown = null\n): VNode {\n\t// \u6E90\u7801\u91CC\u9762\uFF1A\n\t// type: \u5982\u679C\u662FVNode \u9700\u8981cloneVNode\n\t// eg. :class=\"{a: xx, b: xxx}\" :class=\"['classA', {'classB': true }]\"\n\t// eg. :style=\"{'display': 'flex'}\" :style=\"[{'display': 'flex'}, { 'flex': 2 }]\"\n\t// props\u91CC\u9762\u5982\u679C\u6709class\u3001style \u4E5F\u9700\u8981\u62CD\u5E73\u5904\u7406\n\t// \u8FD9\u91CC\u4E3A\u4E86\u7B80\u4FBF\uFF1A\u5C31\u4E0D\u5904\u7406\u4E86\n\n\t// eg. h('div')  h('div', { props })  h('div', { props }, children)\n\t// \u5982\u679C\u6709\u503C\uFF0C\u4E00\u5B9A\u662F\u5143\u7D20\u7C7B\u578B\n\tconst shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0;\n\n\treturn createBaseVNode(type, props, children, shapeFlag);\n}\n\nfunction createBaseVNode(\n\ttype: VNodeTypes,\n\tprops: (VNodeProps & Data) | null = null,\n\tchildren: any = null,\n\tshapeFlag = type === Fragment ? 0 : ShapeFlags.ELEMENT\n): VNode {\n\tconst vnode: VNode = {\n\t\t__v_isVNode: true,\n\t\ttype,\n\t\tprops,\n\t\tkey: normalizeKey(props),\n\t\tchildren,\n\t\tel: null, // \u771F\u5B9E\u8282\u70B9 \u521D\u59CB\u5316\u4E3Anull\n\t\tanchor: null,\n\t\tshapeFlag\n\t};\n\t// \u5904\u7406\u5B50\u7C7B\u578B\u548C\u81EA\u5DF1\u7684\u7C7B\u578B\n\tif (children) {\n\t\t// h('div', props, 'xxx') \u6E32\u67D3\u4E3A <div ...props>xxx</div>\n\t\t// h('div', props, [h('span', props, 'yyyy')]) \u6E32\u67D3\u4E3A <div ...props><span ...props>yyyy</span></div>\n\n\t\tvnode.shapeFlag |= isString(children) ? ShapeFlags.TEXT_CHILDREN : ShapeFlags.ARRAY_CHILDREN;\n\t}\n\treturn vnode;\n}\n\n// \u5224\u65AD\u662F\u5426\u662F\u540C\u4E00\u4E2A\u865A\u62DF\u8282\u70B9\uFF0C \u56E0\u4E3A\u6BCF\u4E2A\u865A\u62DF\u8282\u70B9\u7684type\u548Ckey\u90FD\u662F\u552F\u4E00\u7684\nexport function isSameVNodeType(n1: VNode, n2: VNode) {\n\treturn n1.type === n2.type && n1.key === n2.key;\n}\n", "import { isArray, isObject } from '@vue/shared';\nimport { VNode, createVNode, isVNode } from './vnode';\n\n// h\u51FD\u6570\u6709\u4EE5\u4E0B\u51E0\u79CD\u4F20\u5165\u65B9\u5F0F\n\n// \u7EAF\u6587\u672C\n// h('div')\n\n//  type + \u5C5E\u6027\n// h('div', {})\n\n// type + children\n// h('div', [])\n// h('div', 'text')\n// h('div', h('span'))\n\n// type + \u5C5E\u6027 + children\n// h('div', {}, '')\n// h('div', {}, h('span'))   // vnode children\n// h('div', {}, [''])        // \u6570\u7EC4\u6587\u672Cchildren\n// h('div', {}, [h('span')]) // \u6570\u7EC4 vnode children\n\n// Components\n// h(Components, () => {}) default slots\n// h(Component, {}, () => {}) // default slot\n// h(Component, {}, {}) // named slots\n\nexport function h(type: any, propsOrChildren?: any, children?: any): VNode {\n\t// \u5224\u65AD\u53C2\u6570\u957F\u5EA6\n\n\tconst l = arguments.length;\n\n\t// type\u662F\u4E00\u5B9A\u6709\u7684\n\tif (l === 2) {\n\t\t// \u53C2\u6570\u4E3A2\u4E2A\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570 \u6709\u53EF\u80FD\u662Fchildren (\u6587\u672C\u3001vnode), \u4E5F\u6709\u53EF\u80FD\u662Fprops\n\t\t// children:  h('div', '')  h('div', [])\n\t\t// props: h('div', {})\n\t\tif (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n\t\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F vnode\n\t\t\t// h('div', h('span'))\n\t\t\tif (isVNode(propsOrChildren)) {\n\t\t\t\treturn createVNode(type, null, [propsOrChildren]);\n\t\t\t}\n\t\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5C5E\u6027\n\t\t\t// h('div', {})\n\t\t\treturn createVNode(type, propsOrChildren);\n\t\t} else {\n\t\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u6587\u672C\n\t\t\t// h('div', 'xxx')\n\t\t\treturn createVNode(type, null, propsOrChildren);\n\t\t}\n\t} else {\n\t\t// 3\u79CD\u60C5\u51B5\n\t\t// h('div')\n\t\t// h('div', {}, '')\n\t\t// h('div', {}, '', '')\n\n\t\tif (l > 3) {\n\t\t\t// h('div', {}, '', '')\n\t\t\t// \u53D6\u540E\u4E24\u4E2A\uFF0C\u591A\u4F59\u7684\u53C2\u6570\u90FD\u8F6C\u6210\u6570\u7EC4\n\t\t\tchildren = Array.prototype.slice.call(arguments, 2);\n\t\t} else if (l === 3 && isVNode(children)) {\n\t\t\t// h('div', {}, h('span'))\n\t\t\tchildren = [children];\n\t\t}\n\t\treturn createVNode(type, propsOrChildren, children);\n\t}\n}\n", "import { RendererOptions } from '@vue/runtime-core';\n\n// \u589E\u5220\u6539\u67E5\nexport const nodeOps: Omit<RendererOptions, 'patchProp'> = {\n\t// \u589E\u52A0\u3001\u63D2\u5165\n\tinsert(child, parent, anchor) {\n\t\tparent.insertBefore(child, anchor || null);\n\t},\n\t// \u5220\u9664\n\tremove(child) {\n\t\tconst parent = child.parentNode;\n\t\tif (parent) {\n\t\t\tparent.removeChild(child);\n\t\t}\n\t},\n\tcreateElement(tagName) {\n\t\treturn document.createElement(tagName);\n\t},\n\tcreateText(text: string) {\n\t\treturn document.createTextNode(text);\n\t},\n\tcreateComment(data) {\n\t\treturn document.createComment(data);\n\t},\n\tsetText(el, text) {\n\t\tel.nodeValue = text;\n\t},\n\tsetElementText(el, text) {\n\t\tel.textContent = text;\n\t},\n\tparentNode(node) {\n\t\treturn node.parentNode as Element;\n\t},\n\tnextSibling(node) {\n\t\treturn node.nextSibling;\n\t},\n\tquertSelector(selector) {\n\t\treturn document.querySelector(selector);\n\t}\n};\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchClass(el: Element, value: string) {\n\tif (isNoEmptyValue(value)) {\n\t\t// \u76F4\u63A5\u8986\u76D6\n\t\tel.className = value;\n\t} else {\n\t\t// \u5220\u9664class\u5C5E\u6027\n\t\tel.removeAttribute('class');\n\t}\n}\n", "import { isNoEmptyValue, isString } from '@vue/shared';\n\ntype Style = string | Record<string, string | string[]> | null;\n\nexport function patchStyle(el: Element, prev: Style, next: Style) {\n\tconst style = (el as HTMLElement).style;\n\tconst isCssString = isString(next);\n\tconst isPrevCssString = isString(prev);\n\n\t// eg. <div :style={}></div> style\u662F\u4E2A\u5BF9\u8C61\n\n\t// \u5B58\u5728\u65B0\u503C\uFF0C\u5E76\u4E14\u662F\u5BF9\u8C61\n\tif (next && !isCssString) {\n\t\tif (prev && !isPrevCssString) {\n\t\t\t// \u8BF4\u660E\u8001\u503C \u548C\u65B0\u503C\u90FD\u662F\u5BF9\u8C61\n\t\t\tfor (const key in prev) {\n\t\t\t\t// \u8001\u503C \u5728\u65B0\u7684\u503C\u91CC\u9762\u6CA1\u6709\n\t\t\t\tif (!isNoEmptyValue(next[key])) {\n\t\t\t\t\tstyle[key] = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \u8BBE\u7F6E\u65B0\u7684\u503C\n\t\t\tfor (const key in next) {\n\t\t\t\tstyle[key] = next[key];\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// eg. <div style=\"\"></div>\n\t\t// \u65B0\u503C\u662Fstring\n\t\tif (isCssString) {\n\t\t\t// \u6BD4\u8F83\u4E0B\u662F\u5426\u76F8\u7B49\n\t\t\tif (prev != next) {\n\t\t\t\tstyle.cssText = next;\n\t\t\t}\n\t\t} else if (prev) {\n\t\t\t// \u65B0\u503C\u662Fnull\uFF0C\u800C\u4E14\u5B58\u5728\u8001\u503C\uFF0C\u5220\u6389\u8001\u503C\n\t\t\tel.removeAttribute('style');\n\t\t}\n\t}\n}\n", "// \u4E8B\u4EF6fn\u7684\u7C7B\u578B\ntype EventValue = Function | ((e: Event) => void);\n\n// invoker.value = fn\nexport interface Invoker extends EventListener {\n\tvalue: EventValue;\n}\n\n// invoker \u8BB0\u5F55\u4E8B\u4EF6\u7684\u5BF9\u8C61\uFF0C\u5176value\u5C5E\u6027\u4FDD\u5B58\u7740\u5BF9\u7528\u6237\u4E8B\u4EF6\u7684\u5F15\u7528\uFF0C\n// \u5F53\u65B0\u7684\u503C\u8FC7\u6765\uFF0C \u53EA\u9700\u8981\u66FF\u6362value\u5C5E\u6027\u5373\u523B\n\nexport function patchEvent(\n\tel: Element & { _vei?: Record<string, Invoker | undefined> },\n\tkey: string,\n\tnextValue: EventValue | null\n) {\n\t// \u53BB\u6389on, \u4E8B\u4EF6\u540D\u79F0\u8F6C\u5C0F\u5199\n\t// onXxxx -> xxxx\n\tconst name = key.slice(2).toLowerCase();\n\n\t// _vei = vue event invokers \u7ED9element\u5143\u7D20\u6269\u5C55\u4E00\u4E2A_vei\u5BF9\u8C61\uFF0C\u5176\u4F5C\u7528\u5C31\u662F\u6682\u5B58invokers\n\t// \u6BCF\u5F53\u6709\u65B0\u7684fn\u8FDB\u6765\uFF0C\u5C31\u4F1A\u5148\u4ECE\u5143\u7D20\u4E0A\u53D6\u4E00\u904Dinvokers\uFF0C\u6CA1\u6709\u7684\u8BDD\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\n\t// \u6570\u636E\u7ED3\u6784\u5982\u4E0B\uFF1A\n\t// _vei = invokers = {\u4E8B\u4EF6\u540D\u79F0: invoker = fn}\n\t// fn\u51FD\u6570\u4E0A\u6709value\u5C5E\u6027 \u6620\u5C04\u7684\u662Ffn\u672C\u8EAB\n\tconst invokers = el._vei || (el._vei = {});\n\n\t// \u83B7\u53D6\u7F13\u5B58\u7684invokers\n\tconst existingInvoker = invokers[name];\n\n\t// \u5B58\u5728\u65B0\u503C \u4E5F\u5B58\u5728\u8001\u503C\n\tif (nextValue && existingInvoker) {\n\t\t// \u66FF\u6362\u8001\u503C\n\t\texistingInvoker.value = nextValue;\n\t} else {\n\t\t// \u6709\u53EF\u80FD\u65B0\u503C\u6CA1\u6709\uFF0C\u4E5F\u6709\u53EF\u80FD\u8001\u503C\u6CA1\u6709\n\n\t\tif (nextValue) {\n\t\t\t// \u5B58\u5728\u65B0\u503C\uFF0C\u4E0D\u5B58\u5728\u8001\u503C\n\t\t\t// \u8BBE\u7F6E\u65B0\u503C\u7684\u4E8B\u4EF6\u76D1\u542C\uFF0C \u7F13\u5B58invokers\n\t\t\tconst invoker = (invokers[name] = createInvoker(nextValue));\n\n\t\t\t// \u8BBE\u7F6E\u4E8B\u4EF6\u76D1\u542C\n\t\t\tel.addEventListener(name, invoker);\n\t\t} else if (existingInvoker) {\n\t\t\t// \u65B0\u503C\u662F\u6CA1\u6709\u7684\uFF0C\u4F46\u662F\u5B58\u5728\u8001\u503C\uFF0C\u610F\u5473\u7740\u8FD9\u6B21\u66F4\u65B0\uFF0Cfn\u4F20\u5165\u4E86null\uFF0C\u5C31\u9700\u8981\u79FB\u9664\u6389\u8001\u503C\u4E8B\u4EF6\n\t\t\tel.removeEventListener(name, existingInvoker);\n\t\t\t// \u5220\u9664\u7F13\u5B58\u7684invoker\n\t\t\tinvokers[name] = null;\n\t\t}\n\t}\n}\n\n/**\n *  invoker = fn\n * \tinvoker.value = invoker\n *\n * \tinvoker.value === invoker  true\n */\nfunction createInvoker(initialValue: EventValue): Invoker {\n\t// \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684invoker\u51FD\u6570\uFF0C \u5F53invoker\u6267\u884C\u7684\u65F6\u5019\uFF0C\u5C31\u662F\u6267\u884CinitialValue\u51FD\u6570\n\t// invoker.value === initialValue  true\n\tconst invoker: Invoker = (e: Event) => invoker.value(e);\n\t// \u8BBE\u7F6E\u65B0\u503C\n\tinvoker.value = initialValue;\n\treturn invoker;\n}\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchAttrs(el: Element, key: string, nextValue: any) {\n\tif (isNoEmptyValue(nextValue)) {\n\t\tel.setAttribute(key, nextValue);\n\t} else {\n\t\tel.removeAttribute(key);\n\t}\n}\n", "// \u8BBE\u7F6E\u5143\u7D20\u7684\u5C5E\u6027 class  style props event\n\nimport { RendererOptions } from '@vue/runtime-core';\nimport { patchClass } from './modules/class';\nimport { patchStyle } from './modules/style';\nimport { isOn } from '@vue/shared';\nimport { patchEvent } from './modules/events';\nimport { patchAttrs } from './modules/attrs';\n\nexport const patchProp: RendererOptions['patchProp'] = (el: Element, key: string, preValue: any, nextValue: any) => {\n\t// TODO: patchProp\n\tif (key === 'class') {\n\t\tpatchClass(el, nextValue);\n\t} else if (key === 'style') {\n\t\tpatchStyle(el, preValue, nextValue);\n\t} else if (isOn(key)) {\n\t\tpatchEvent(el, key, nextValue);\n\t} else {\n\t\tpatchAttrs(el, key, nextValue);\n\t}\n};\n", "import { extend } from '@vue/shared';\nimport { nodeOps } from './nodeOps';\nimport { patchProp } from './patchProp';\nimport { Renderer, RootRenderFunction, createRenderer } from '@vue/runtime-core';\n\nconst rendererOptions = extend(nodeOps, { patchProp });\n\nlet renderer: Renderer<Element | ShadowRoot>;\n\n// \u61D2\u52A0\u8F7D\nfunction ensureRenderer() {\n\treturn renderer || (renderer = createRenderer(rendererOptions));\n}\n\nexport const render = ((...args) => {\n\tensureRenderer().render(...args);\n}) as RootRenderFunction<ShadowRoot>;\n\nexport * from '@vue/runtime-core';\n"],
  "mappings": "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",
  "names": ["render"]
}
