{
  "version": 3,
  "sources": ["../../shared/src/makeMap.ts", "../../shared/src/general.ts", "../src/errorHandling.ts", "../../reactivity/src/dep.ts", "../../reactivity/src/effectScope.ts", "../../reactivity/src/effect.ts", "../../reactivity/src/ref.ts", "../../reactivity/src/baseHandlers.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/computed.ts", "../../reactivity/src/watch.ts", "../src/scheduler.ts", "../src/componentPublicInstance.ts", "../src/componentProps.ts", "../src/componentEmits.ts", "../src/components/Teleport.ts", "../src/vnode.ts", "../src/componentSlots.ts", "../src/component.ts", "../src/componentRenderUtils.ts", "../src/rendererTemplateRef.ts", "../src/renderer.ts", "../src/h.ts", "../src/apiLifecycle.ts", "../../runtime-dom/src/nodeOps.ts", "../../runtime-dom/src/modules/class.ts", "../../runtime-dom/src/modules/style.ts", "../../runtime-dom/src/modules/events.ts", "../../runtime-dom/src/modules/attrs.ts", "../../runtime-dom/src/patchProp.ts", "../../runtime-dom/src/index.ts"],
  "sourcesContent": ["export function makeMap(str: string): (key: string) => boolean {\n\tconst map: Record<string, boolean> = Object.create(null);\n\tconst strs = str.split(',');\n\tfor (let i = 0; i < strs.length; i++) {\n\t\tmap[strs[i]] = true;\n\t}\n\treturn val => !!map[val];\n}\n", "import { makeMap } from './makeMap';\n\nexport const isObject = (val: unknown): val is Record<any, any> => val !== null && typeof val === 'object';\n\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue);\n\nexport const isFunction = (val: unknown): val is Function => typeof val === 'function';\n\nexport const NOOP = () => {};\n\nexport const NO = () => false;\n\nexport const isArray = Array.isArray;\nexport const isMap = (val: unknown): val is Map<any, any> => toTypeString(val) === '[object Map]';\nexport const isSet = (val: unknown): val is Set<any> => toTypeString(val) === '[object Set]';\nexport const isString = (val: unknown): val is String => typeof val === 'string';\n\nexport const objectToString = Object.prototype.toString;\nexport const toTypeString = (value: unknown): string => objectToString.call(value);\n\nexport const isPlainObject = (val: unknown): val is object => toTypeString(val) === '[object Object]';\n\nexport const isNoEmptyValue = (val: unknown) => val !== undefined || val !== null;\n\nexport const extend = Object.assign;\n\nexport const EMPTY_OBJ: { readonly [key: string]: any } = {};\n\n// \u4E8B\u4EF6 onXxxx \u6216\u8005\u4E5F\u53EF\u4EE5\u8FD9\u4E48\u5199\uFF1A /^on[A-Z]/\nexport const onRE = /^on[^a-z]/;\n\nexport const isOn = (key: string) => onRE.test(key);\n\n// \u4E0B\u9762\u8FD9\u4E9Bkey\u662Fvue\u5185\u90E8\u4FDD\u7559\u7684\u5173\u952E\u5B57\uFF0C\u5143\u7D20\u81EA\u5B9A\u4E49\u5C5E\u6027props\u4E00\u822C\u4E0D\u5141\u8BB8\u7528\u4E0B\u9762\u7684key, \u7A7A\u5B57\u7B26\u4E32\u4E5F\u7B97\n// [\"\", \"key\", \"ref\"]\nexport const isReservedProp = makeMap(',key,ref');\n\nexport const hasOwn = (val: object, key: string): key is keyof typeof val =>\n\tObject.prototype.hasOwnProperty.call(val, key);\n\n// event \u9996\u5B57\u6BCD\u8F6C\u5927\u5199\nexport const capitalize = (str: string) => {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nexport const invokeArrayFns = (fns: Function[], arg?: any) => {\n\tfns.forEach(fn => fn(arg));\n};\n", "// \u6846\u67B6\u7EDF\u4E00error\u5904\u7406\n\nexport function callWithErrorHandling(fn: Function, args?: unknown[]) {\n\tlet res: any;\n\ttry {\n\t\tres = args ? fn(...args) : fn();\n\t} catch (err) {\n\t\t// \u53EF\u4EE5\u7EDF\u4E00\u9519\u8BEF\u4FE1\u606F\n\t\tconsole.log(err);\n\t}\n\treturn res;\n}\n", "import { ReactiveEffect } from './effect';\n\nexport type Dep = Set<ReactiveEffect>;\n\nexport const createDep = (effects?: ReactiveEffect[]): Dep => {\n\tconst dep = new Set<ReactiveEffect>(effects) as Dep;\n\treturn dep;\n};\n", "import { ReactiveEffect } from './effect';\n\nlet activeEffectScope: EffectScope | undefined;\n\ninterface EffectScope {\n\trun<T>(fn: () => T): T | undefined; // \u5982\u679C\u4F5C\u7528\u57DF\u4E0D\u6D3B\u8DC3\u5C31\u4E3A undefined\n\tstop(): void;\n}\n\n// EffectScope \u5B9E\u73B0\u65B9\u5F0F\u8DDFeffect\u4E00\u6837\u7684\u9053\u7406\uFF0Cscope\u5185\u90E8\u7684effect\u6536\u96C6\u5F53\u524D\u6B63\u5728\u6267\u884CeffectScope\u4F5C\u7528\u57DF\n\n/**\n * @example\n * ```js\n \t\t\tconst scope = effectScope();\n\t\t\tscope.run(() => {\n\t\t\t\tconst state = reactive({ name: 'xxx' });\n\n\t\t\t\t// \u5185\u90E8\u6536\u96C6\u4E86effect\uFF0C \u5F53\u8C03\u7528scope.stop\u65F6\uFF0C\u5176\u5185\u90E8\u4F1A\u628A\u6536\u96C6\u5230effect\u5168\u90E8stop\n\t\t\t\teffect(() => {\n\t\t\t\t\tconsole.log(state.name);\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tstate.name = 'kkkk';\n\t\t\t\t}, 1000);\n\n\t\t\t\tconst scope2 = effectScope();\n\t\t\t\tscope2.run(() => {\n\t\t\t\t\tconst state = reactive({ age: 10 });\n\n\t\t\t\t\teffect(() => console.log(state.age));\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstate.age++;\n\t\t\t\t\t}, 1000);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tscope.stop();\n * ```\n */\n\nclass EffectScope {\n\t// \u6807\u8BB0\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\n\tprivate _active = true;\n\n\t// \u8BB0\u5F55\u6536\u96C6\u5230\u7684effect\n\teffects: ReactiveEffect[];\n\n\tparent: EffectScope;\n\n\tcleanups: (() => void)[];\n\n\t// \u8BB0\u5F55\u5185\u90E8\u7684\u6240\u6709\u4F5C\u7528\u57DF\n\tscopes: EffectScope[] | undefined;\n\n\t// detached \u662F\u5426\u662F\u72EC\u7ACB\u7684\uFF0C\u9ED8\u8BA4\u4E0D\u662F\u72EC\u7ACB\u7684\uFF0C\u53D7\u7236\u4F5C\u7528\u57DF\u63A7\u5236\n\tconstructor(public detached: boolean = false) {\n\t\t// \u4E0D\u662F\u72EC\u7ACB\u7684\u5C31\u4F1A\u6536\u96C6\u8D77\u6765\uFF0C\u7236\u4F5C\u7528\u57DFstop\uFF0C\u5B50\u4F5C\u7528\u57DF\u4E5F\u4F1Astop\n\t\t// \u5982\u679C\u662F\u72EC\u7ACB\u7684\uFF0C\u5219\u4E0D\u4F1A\uFF0C\u5B50\u4F5C\u7528\u57DFscope\u5185\u90E8\u7684\u4EE3\u7801\u4E0D\u53D7\u5F71\u54CD\n\t\tif (!detached && activeEffectScope) {\n\t\t\t// \u6536\u96C6\u4F5C\u7528\u57DF\n\t\t\t(activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this);\n\t\t}\n\t}\n\n\trun<T>(fn: () => T): T | undefined {\n\t\tif (this._active) {\n\t\t\ttry {\n\t\t\t\tthis.parent = activeEffectScope;\n\t\t\t\tactiveEffectScope = this;\n\t\t\t\treturn fn();\n\t\t\t} finally {\n\t\t\t\tactiveEffectScope = this.parent;\n\t\t\t\tthis.parent = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t// \u5C06\u6536\u96C6\u5230\u7684effect\u5168\u90E8stop\n\tstop() {\n\t\tif (this._active) {\n\t\t\tif (this.effects) {\n\t\t\t\tthis.effects.forEach(effect => {\n\t\t\t\t\teffect.stop();\n\t\t\t\t});\n\t\t\t\tthis.effects.length = 0;\n\t\t\t}\n\n\t\t\tif (this.cleanups) {\n\t\t\t\tthis.cleanups.forEach(fn => fn());\n\t\t\t}\n\n\t\t\t// \u5982\u679C\u6709\u5B50\u4F5C\u7528\u57DF\uFF0C\u8868\u660E\u5B50\u4F5C\u7528\u57DF\u4E0D\u662F\u72EC\u7ACB\u7684\uFF0C\u6267\u884C\u5B50\u4F5C\u7528\u57DF\u7684stop\n\t\t\tif (this.scopes) {\n\t\t\t\tthis.scopes.forEach(self => {\n\t\t\t\t\tself.stop();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._active = false;\n\t\t}\n\t}\n}\n\nexport function effectScope(detached?: boolean): EffectScope {\n\treturn new EffectScope(detached);\n}\n\nexport function recordEffectScope(effect: ReactiveEffect) {\n\tif (activeEffectScope) {\n\t\t// \u6536\u96C6effect\n\t\t(activeEffectScope.effects || (activeEffectScope.effects = [])).push(effect);\n\t}\n}\n\nexport function getCurrentScope(): EffectScope | undefined {\n\treturn activeEffectScope;\n}\n\nexport function onScopeDispose(fn: () => void) {\n\tif (activeEffectScope) {\n\t\t(activeEffectScope.cleanups || (activeEffectScope.cleanups = [])).push(fn);\n\t}\n}\n", "import { isArray } from '@vue/shared';\nimport { Dep, createDep } from './dep';\nimport { recordEffectScope } from './effectScope';\n\n// \u5168\u5C40\u7684effect\nexport let activeEffect: ReactiveEffect | undefined;\n\n//  weakMap = {\n// \t \t\ttarget: {\n// \t \t\t\tkey: Set<ReactiveEffect, ReactiveEffect, ReactiveEffect>\n// \t \t\t}\n// \t }\nconst targetMap = new WeakMap<any, Map<any, Dep>>();\n\nexport type EffectScheduler = (...args: any[]) => any;\n\nexport interface ReactiveEffectRunner<T = any> {\n\t(): T;\n\teffect: ReactiveEffect;\n}\n\nexport interface ReactiveEffectOptions {\n\tscheduler?: EffectScheduler;\n}\n\n// \u57FA\u7C7B\uFF1A\u4F5C\u4E3A\u54CD\u5E94\u5F0F\u7CFB\u7EDF\u7684\u6700\u5E95\u5C42\u7684\u63D0\u4F9B\u8005\uFF0Ccomputed\u3001watch\u90FD\u662F\u57FA\u4E8EReactiveEffect\u6765\u505A\uFF0C\u5185\u90E8\u4FDD\u5B58\u7740\u5F53\u524D\u6536\u96C6\u4F9D\u8D56\u7684\u91CD\u8981\u5C5E\u6027deps\n// \u6838\u5FC3\u65B9\u6CD5\uFF1Arun\uFF0C\u8BB0\u5F55\u5F53\u524D\u7684activeEffect\uFF0C\u8868\u660Eproxy\u5BF9\u8C61get\u65B9\u6CD5\u662F\u5426\u662F\u5728effect\u4E2D\uFF0C\u662F\u5C31\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\u3002\nexport class ReactiveEffect<T = any> {\n\t// \u6807\u8BB0\u5F53\u524Deffect\u662F\u5426\u662F\u6FC0\u6D3B\u72B6\u6001\uFF0C\u5982\u679C\u662F\u6FC0\u6D3B\u72B6\u6001\uFF0C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\tactive = true;\n\t// \u6536\u96C6\u5F53\u524D\u6FC0\u6D3B\u7684activeEffect\n\tdeps: Dep[] = [];\n\t// \u6807\u8BB0\u5F53\u524D\u7684effect\n\t/**\n\t * effect(() => {\n\t * \tthis.name e1\n\t * \t effect(() => {\n\t * \t\t\tthis.name  e2\n\t * \t })\n\t * \t this.name  \u8FD9\u91CC\u5FC5\u987B\u662F e1\n\t * })\n\t *\n\t * \u7B2C\u4E00\u4E2Aeffect\u6267\u884C\n\t * parent -> activeEffect -> this\n\t * \u51FD\u6570\u6267\u884C\u5B8C\u6210\n\t * activeEffect = this.parent\n\t * parent = undefined\n\t *\n\t * \u7B2C\u4E8C\u4E2Aeffect\u6267\u884C\n\t * parent -> activeEffect\n\t *\n\t * e1 -> e2 -> e1\n\t */\n\tparent: ReactiveEffect | undefined = undefined;\n\t// scheduler\u8BB0\u5F55\u7740\uFF1Aproxy\u5BF9\u8C61set\u4E86\u65B0\u7684\u503C\uFF0C\u4F1A\u89E6\u53D1scheduler\u56DE\u8C03\uFF0C\u63A7\u5236\u4F9D\u8D56\u66F4\u65B0\u65F6\u673A\n\t// \u8FD9\u91CC\u4E5F\u53EF\u4EE5\u8BA4\u4E3A\u662F proxy\u5BF9\u8C61\u7684\u5C5E\u6027\u53D1\u751F\u4E86\u53D8\u5316\n\n\tconstructor(public fn: () => T, public scheduler: EffectScheduler | null = null) {\n\t\t// effectScope\u6536\u96C6effect\n\t\trecordEffectScope(this);\n\t}\n\n\trun() {\n\t\t// \u5982\u679C\u4E0D\u662F\u6FC0\u6D3B\u6001\uFF0C\u76F4\u63A5\u8FD4\u56DE\u56DE\u8C03\u51FD\u6570\u6267\u884C\u7ED3\u679C\n\t\tif (!this.active) {\n\t\t\treturn this.fn();\n\t\t}\n\n\t\ttry {\n\t\t\tthis.parent = activeEffect;\n\t\t\tactiveEffect = this;\n\n\t\t\t// \u6267\u884C\u4F9D\u8D56\u56DE\u8C03\u4E4B\u524D\uFF0C\u5148\u6E05\u7A7A\u6536\u96C6\u7684effects\n\t\t\tcleanupEffect(this);\n\t\t\treturn this.fn();\n\t\t} finally {\n\t\t\t// e1\n\t\t\tactiveEffect = this.parent;\n\t\t\tthis.parent = undefined;\n\t\t}\n\t}\n\n\tstop() {\n\t\tif (this.active) {\n\t\t\tcleanupEffect(this);\n\t\t\tthis.active = false;\n\t\t}\n\t}\n}\n\nexport function effect<T = any>(fn: () => T, options?: ReactiveEffectOptions) {\n\tconst _effect = new ReactiveEffect(fn, options?.scheduler);\n\n\tif (!options) {\n\t\t_effect.run();\n\t}\n\n\tconst runner = _effect.run.bind(_effect) as ReactiveEffectRunner;\n\trunner.effect = _effect;\n\treturn runner;\n}\n\nexport function stop(runner: ReactiveEffectRunner) {\n\trunner.effect.stop();\n}\n\n/**\n * \u6536\u96C6\u4F9D\u8D56\n * \u6536\u96C6\u6570\u636E\u683C\u5F0F\u5982\u4E0B\uFF1A\n * weakMap = {\n * \t\ttarget: {\n * \t\t\tkey: Set<ReactiveEffect, ReactiveEffect, ReactiveEffect>\n * \t\t}\n * }\n *\n * \u56E0\u4E3A\u4E00\u4E2A\u53D6\u503C\u64CD\u4F5C\u53EF\u4EE5\u53D1\u751F\u5728\u591A\u4E2Aeffect\u4E2D\uFF0C\u6240\u4EE5Set\u91CC\u9762\u4F1A\u6709\u591A\u4E2AReactiveEffect\n *\n * @param target\n * @param key\n */\nexport function track(target: object, key: unknown) {\n\tif (activeEffect) {\n\t\t// \u8BF4\u660E\u5F53\u524D\u53D6\u503C\u64CD\u4F5C\u53D1\u751F\u5728effect\u4E2D\n\t\tlet depsMap = targetMap.get(target);\n\t\tif (!depsMap) {\n\t\t\t// \u4E0D\u5B58\u5728\uFF0C\u521B\u5EFA\u4E00\u4E2A\u7A7Amap\n\t\t\ttargetMap.set(target, (depsMap = new Map()));\n\t\t}\n\t\tlet dep = depsMap.get(key);\n\t\tif (!dep) {\n\t\t\tdepsMap.set(key, (dep = new Set<ReactiveEffect>()));\n\t\t}\n\t\ttrackEffects(dep);\n\t}\n}\n\nexport function trackEffects(dep: Dep) {\n\tlet shouldTrack = !dep.has(activeEffect);\n\tif (shouldTrack) {\n\t\t// \u5982\u679CSet\u4E2D\u6CA1\u6709\u5F53\u524D\u6FC0\u6D3B\u7684activeEffect\uFF0C\u9700\u8981\u505A\u6536\u96C6\n\t\tdep.add(activeEffect);\n\t\tactiveEffect.deps.push(dep);\n\t}\n}\n\n/**\n * \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n * @param target\n * @param key\n * @param newValue\n * @param oldValue\n */\nexport function trigger(target: object, key: unknown) {\n\tconst depsMap = targetMap.get(target);\n\t// \u6CA1\u6709\u6536\u96C6\u8BE5\u5BF9\u8C61\n\tif (!depsMap) {\n\t\treturn;\n\t}\n\n\tlet deps: (Dep | undefined)[] = [];\n\tif (key !== undefined) {\n\t\tdeps.push(depsMap.get(key));\n\t}\n\n\t// copy\u4E00\u4EFDdeps\uFF0C\u6E05\u7406\u4F9D\u8D56\u65F6\u5019\uFF0C\u9632\u6B62\u6B7B\u5FAA\u73AF\n\tconst effects: ReactiveEffect[] = [];\n\tfor (const dep of deps) {\n\t\tif (dep) {\n\t\t\teffects.push(...dep);\n\t\t}\n\t}\n\ttriggerEffects(createDep(effects));\n}\n\nexport function triggerEffects(dep: Dep | ReactiveEffect[]) {\n\tif (dep) {\n\t\tconst effects = isArray(dep) ? dep : [...dep];\n\t\tif (effects) {\n\t\t\teffects.forEach(effect => {\n\t\t\t\t/**\n\t\t\t\t * effect(() => {\n\t\t\t\t * \t\tstate.name = 123123\n\t\t\t\t * })\n\t\t\t\t *\n\t\t\t\t * \u4E3A\u4E86\u9632\u6B62\u5728\u4F9D\u8D56\u4E2D\u66F4\u65B0\u54CD\u5E94\u5F0F\u6570\u636E\uFF0C\u9020\u6210\u6B7B\u5FAA\u73AF\uFF0C\u8FD9\u91CC\u8981\u505A\u5224\u65AD\uFF0C\n\t\t\t\t * \u5982\u679C\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684effect === \u5168\u5C40\u4E2DactiveEffect\uFF0C\u8868\u660E\u6B64effect\u6B63\u5728\u6267\u884C\n\t\t\t\t *\n\t\t\t\t */\n\t\t\t\tif (activeEffect !== effect) {\n\t\t\t\t\tif (effect.scheduler) {\n\t\t\t\t\t\teffect.scheduler();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// \u66F4\u65B0\u4F9D\u8D56\n\t\t\t\t\t\teffect.run();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * \u6E05\u7406\u4F9D\u8D56\n * @param effect \u5F53\u524D\u7684effect\n */\nexport function cleanupEffect(effect: ReactiveEffect) {\n\tconst { deps } = effect;\n\tif (deps.length) {\n\t\tfor (let index = 0; index < deps.length; index++) {\n\t\t\tdeps[index].delete(effect);\n\t\t}\n\t\tdeps.length = 0;\n\t}\n}\n", "import { hasChanged, isArray, isObject } from '@vue/shared';\nimport { Dep, createDep } from './dep';\nimport { activeEffect, trackEffects, triggerEffects } from './effect';\nimport { isReactive, toRaw, toReactive } from './reactive';\n\nexport interface Ref<T = any> {\n\tdep: Dep;\n\tvalue: T;\n}\n\nexport type MaybeRef<T = any> = T | Ref<T>;\n\nexport function unref<T>(ref: MaybeRef<T>): T {\n\treturn isRef(ref) ? ref.value : ref;\n}\n\nexport function isRef<T>(ref: Ref<T> | unknown): ref is Ref<T>;\nexport function isRef(ref: any): ref is Ref {\n\treturn !!(ref && ref.__v_isRef === true);\n}\n\nexport function ref(value: unknown) {\n\treturn createRef(value, false);\n}\n\nexport function shallowRef(value: unknown) {\n\treturn createRef(value, true);\n}\n\nfunction createRef(value: unknown, shallow: boolean) {\n\t// ref(ref(true))\n\t// \u5982\u679C\u672C\u8EAB\u5C31\u662Fref, \u8FD4\u56DE\u5176\u672C\u8EAB\n\tif (isRef(value)) {\n\t\treturn value;\n\t}\n\treturn new RefImpl(value, shallow);\n}\n\nclass RefImpl<T> {\n\tpublic dep: Dep = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u7684\u503C,\u7528\u4F5Cget\u65B9\u6CD5\u653E\u56DE\u7684\u503C\n\tprivate _value: T = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u7684\u539F\u59CB\u503C\uFF0C\u7528\u4F5C\u65B0 \u8001\u503C\u53D8\u5316\u7684\u6BD4\u8F83\n\tprivate _rawValue: T = undefined;\n\n\tpublic readonly __v_isRef = true;\n\tconstructor(value: T, public readonly __v_isShallow: boolean) {\n\t\t// 1\uFF1A\u5982\u679C\u662Fshallow \u4FDD\u5B58\u539F\u59CB\u503C\n\t\t// 2\uFF1A\u5982\u679C\u662Fref, value\u6709\u53EF\u80FD\u4E5F\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61, \u4F1A\u5BF9\u5176\u89E3\u5305\uFF0C\u53D8\u4E3A\u666E\u901A\u5BF9\u8C61\n\t\tthis._rawValue = __v_isShallow ? value : toRaw(value);\n\t\t// 1\uFF1A\u5982\u679C\u662Fshallow\uFF0C\u4FDD\u5B58\u539F\u59CB\u503C\uFF0C\n\t\t// 2\uFF1A\u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u8F6C\u5316\u6210reactive\u5BF9\u8C61\uFF0C\u5982\u679C\u4E0D\u662F\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u539F\u59CB\u503C\n\t\t// 3\uFF1A\u652F\u6301\u4E0B\u9762\u4E24\u79CD\uFF1Aref(\u57FA\u672C\u6570\u636E\u7C7B\u578B)\u3001ref({})\u3001ref(reactive({}))\n\t\tthis._value = __v_isShallow ? value : toReactive(value);\n\t}\n\n\tget value() {\n\t\t// \u4F9D\u8D56\u6536\u96C6\n\t\ttrackRefValue(this);\n\t\treturn this._value;\n\t}\n\n\tset value(newValue) {\n\t\t/**\n\t\t * 1: shallowRef\u5BF9\u6BD4\u7684\u662F\u539F\u59CB\u503C\uFF0C\u56E0\u4E3A_vawValue _value\u4FDD\u5B58\u7684\u90FD\u662F\u539F\u59CB\u503C\n\t\t * @example\n\t\t * \tconst obj = {}\n\t\t *  const sRef = shallowRef(obj)\n\t\t *  sRef.value === obj  // true\n\t\t *\n\t\t * \tsRef.value = {a: 1}\n\t\t *\n\t\t * \t\u5BF9\u6BD4\u7684\u662F\u539F\u59CB\u503C\uFF1A {a: 1} === {}\n\t\t *\n\t\t *  \u6240\u4EE5shallowRef\u60F3\u8981\u76D1\u542C\u5176\u53D8\u5316\uFF0C\u5FC5\u987B\u8981\u66F4\u6539\u6574\u4E2A\u5BF9\u8C61 sRef.value = new Object\n\t\t */\n\n\t\t/**\n\t\t * 2: ref.value = xxx\n\t\t */\n\n\t\t// \u6709\u53EF\u80FD\u5916\u90E8\u4F20\u5165\u54CD\u5E94\u5F0F\u5BF9\u8C61 newValue = reactive\u3001 ref\n\t\t// \u73B0\u5BF9\u5176\u7ED3\u6784\u6210\u539F\u59CB\u503C\n\t\tnewValue = this.__v_isShallow ? newValue : toRaw(newValue);\n\t\tif (hasChanged(newValue, this._rawValue)) {\n\t\t\tthis._rawValue = newValue;\n\t\t\tthis._value = this.__v_isShallow ? newValue : toReactive(newValue);\n\t\t\t// \u89E6\u53D1\u66F4\u65B0\n\t\t\ttriggerRefValue(this);\n\t\t}\n\t}\n}\n\n// \u6536\u96C6\u4F9D\u8D56\nexport function trackRefValue(ref: Ref<any>) {\n\t// \u5982\u679C\u662F\u5728effect\u4E2D\u8BBF\u95EE\n\tif (activeEffect) {\n\t\ttrackEffects(ref.dep || (ref.dep = createDep()));\n\t}\n}\n\n// \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\nexport function triggerRefValue(ref: Ref<any>) {\n\tconst dep = ref.dep;\n\tif (dep) {\n\t\ttriggerEffects(dep);\n\t}\n}\n\nexport function toRef(source: Record<string, any> | MaybeRef, key?: string) {\n\tif (isRef(source)) {\n\t\treturn source;\n\t} else if (isObject(source)) {\n\t\treturn propertyToRef(source, key);\n\t} else {\n\t\t// \u5305\u88C5\u6210 ref\n\t\treturn ref(source);\n\t}\n}\n\nexport function toRefs<T extends object>(object: T) {\n\tconst res: any = isArray(object) ? new Array(object.length) : {};\n\tfor (const key in object) {\n\t\tres[key] = propertyToRef(object, key);\n\t}\n\treturn res;\n}\n\nfunction propertyToRef(source: Record<string, any> | MaybeRef, key?: string) {\n\tconst value = source[key];\n\treturn isRef(value) ? value : new ObjectRefImpl(source, key);\n}\n\nclass ObjectRefImpl<T extends object, K extends keyof T> {\n\tpublic readonly __v_isRef = true;\n\tconstructor(private readonly _object: T, private readonly _key: K) {}\n\n\t// ref.value\n\tget value() {\n\t\t// _object\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8FD9\u91CC\u53D6\u503C\u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\t\treturn this._object[this._key];\n\t}\n\n\tset value(newValue) {\n\t\t// \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n\t\tthis._object[this._key] = newValue;\n\t}\n}\n\n// \u5BF9ref\u505A\u89E3\u5305\nexport function proxyRefs<T extends object>(objectWithRef: T) {\n\t// \u5982\u679C\u662Freactive \u76F4\u63A5\u8FD4\u56DE\u672C\u8EAB\n\treturn isReactive(objectWithRef)\n\t\t? objectWithRef\n\t\t: new Proxy(objectWithRef, {\n\t\t\t\tget(target, key, receiver) {\n\t\t\t\t\treturn unref(Reflect.get(target, key, receiver));\n\t\t\t\t},\n\t\t\t\tset(target, key, newValue, receiver) {\n\t\t\t\t\tconst oldValue = target[key];\n\t\t\t\t\t// \u5982\u679C\u8001\u503C\u662Fref\uFF0C\u5E76\u4E14newValue\u4E0D\u80FD\u662Fref\n\t\t\t\t\tif (isRef(oldValue) && !isRef(newValue)) {\n\t\t\t\t\t\toldValue.value = newValue;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn Reflect.set(target, key, newValue, receiver);\n\t\t\t\t}\n\t\t  });\n}\n", "import { hasChanged, isObject } from '@vue/shared';\nimport { track, trigger } from './effect';\nimport { ReactiveFlags, reactive, readonly, readonlyMap, reactiveMap, shallowReactiveMap } from './reactive';\nimport { isRef } from './ref';\n\nconst set = createSetter();\nfunction createSetter() {\n\treturn function set(target: object, key: string | symbol, value: unknown, receiver: object) {\n\t\tconst oldValue = target[key];\n\t\t// Reflect\u53CD\u5C04 \u5904\u7406\u4E86this\u6307\u5411\u95EE\u9898\n\t\tconst result = Reflect.set(target, key, value, receiver);\n\n\t\t// \u65B0\u503C\u8001\u503C\u4E0D\u76F8\u7B49\uFF0C\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\n\t\tif (hasChanged(value, oldValue)) {\n\t\t\t// \u89E6\u53D1\u66F4\u65B0\n\t\t\ttrigger(target, key);\n\t\t}\n\n\t\treturn result;\n\t};\n}\nconst get = createGetter(false, false);\n\nconst readonlyGet = createGetter(true, false);\n\nconst shallowReactiveGet = createGetter(false, true);\n\nfunction createGetter(isReadonly = false, shallow = false) {\n\treturn function get(target: object, key: string | symbol, receiver: object) {\n\t\tif (key === ReactiveFlags.IS_REACTIVE) {\n\t\t\t// \u8FD9\u91CC\u8868\u660Etarget\u662F\u4EE3\u7406\u5BF9\u8C61\n\t\t\treturn !isReadonly;\n\t\t} else if (key === ReactiveFlags.IS_READONLY) {\n\t\t\treturn isReadonly;\n\t\t} else if (\n\t\t\tkey === ReactiveFlags.RAW &&\n\t\t\treceiver === (isReadonly ? readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)\n\t\t) {\n\t\t\t// \u5982\u679C\u662F\u4EE3\u7406\u5BF9\u8C61 \u518D\u88AB\u4EE3\u7406\uFF0C\u5C31\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n\t\t\treturn target;\n\t\t}\n\n\t\tconst res = Reflect.get(target, key, receiver);\n\n\t\t// readonly \u4E0D\u6536\u96C6\u4F9D\u8D56\n\t\tif (!isReadonly) {\n\t\t\t// \u4F9D\u8D56\u6536\u96C6\n\t\t\ttrack(target, key);\n\t\t}\n\n\t\tif (shallow) {\n\t\t\t// shallow\u4E0D\u505A\u6DF1\u5C42\u6B21\u4EE3\u7406\n\t\t\treturn res;\n\t\t}\n\n\t\tif (isRef(res)) {\n\t\t\t// \u5982\u679Cvalue\u662FRef\u7C7B\u578B\uFF0C \u89E3\u5305 Ref\n\t\t\treturn res.value;\n\t\t}\n\n\t\t// \u5904\u7406\u6DF1\u5C42\u6B21\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u5982\u679C\u8FD4\u56DE\u503C\u662F\u5BF9\u8C61\uFF0C\u9700\u8981\u518D\u5BF9 \u5BF9\u8C61 \u505A\u4E00\u6B21\u4EE3\u7406\n\t\tif (isObject(res)) {\n\t\t\treturn isReadonly ? readonly(res) : reactive(res);\n\t\t}\n\n\t\treturn res;\n\t};\n}\n\nexport const mutableHandlers: ProxyHandler<object> = {\n\tset,\n\tget\n};\n\nexport const shallowReactiveHandlers: ProxyHandler<object> = {\n\tset,\n\tget: shallowReactiveGet\n};\n\nexport const readonlyHandlers: ProxyHandler<object> = {\n\t// \u53EA\u8BFB\u5C5E\u6027\u4E0D\u80FD\u88ABset\n\tset(target, key) {\n\t\tconsole.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n\t\treturn true;\n\t},\n\t// \u53EA\u8BFB\u5C5E\u6027\u4E0D\u80FD\u88AB\u5220\u9664\n\tdeleteProperty(target, key) {\n\t\tconsole.warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\n\t\treturn true;\n\t},\n\tget: readonlyGet\n};\n", "import { isObject } from '@vue/shared';\nimport { mutableHandlers, readonlyHandlers, shallowReactiveHandlers } from './baseHandlers';\n\nexport const enum ReactiveFlags {\n\tSKIP = '__v_skip',\n\tIS_REACTIVE = '__v_isReactive',\n\tIS_READONLY = '__v_isReadonly',\n\tIS_SHALLOW = '__v_isShallow',\n\tRAW = '__v_raw'\n}\n\nexport interface Target {\n\t[ReactiveFlags.SKIP]?: boolean;\n\t[ReactiveFlags.IS_REACTIVE]?: boolean;\n\t[ReactiveFlags.IS_READONLY]?: boolean;\n\t[ReactiveFlags.IS_SHALLOW]?: boolean;\n\t[ReactiveFlags.RAW]?: any;\n}\n\nexport const reactiveMap = new WeakMap<Target, any>();\nexport const readonlyMap = new WeakMap<Target, any>();\nexport const shallowReactiveMap = new WeakMap<Target, any>();\n\nexport const isReadonly = (value: unknown) => {\n\t// \u5C5E\u6027\u8BBF\u95EE \u89E6\u53D1 readonlyHandlers.get \u65B9\u6CD5\uFF0C\u5176\u5185\u90E8\u5224\u65AD\u4E86key === ReactiveFlags.IS_READONLY\n\treturn !!(value && (value as Target)[ReactiveFlags.IS_READONLY]);\n};\n\nexport const isReactive = (value: unknown): boolean => {\n\tif (isReadonly(value)) {\n\t\treturn isReactive((value as Target)[ReactiveFlags.RAW]);\n\t}\n\treturn !!(value && (value as Target)[ReactiveFlags.IS_REACTIVE]);\n};\n\nexport function isProxy(value: unknown): boolean {\n\treturn isReadonly(value) || isReactive(value);\n}\n\n// \u7B2C\u4E00\u6B21\u6267\u884C observed\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8BBF\u95EEReactiveFlags.RAW\u89E6\u53D1proxy set\u65B9\u6CD5\uFF0C\n// \u89E6\u53D1proxy set\u65B9\u6CD5\u8FD4\u56DEreadonlyMap \u6216\u8005 reactiveMap\u4FDD\u5B58\u7684\u6E90\u5BF9\u8C61\uFF0C\n// \u7B2C\u4E8C\u6B21\u6267\u884C\uFF0C\u6E90\u5BF9\u8C61\u4E2D\u6CA1\u6709ReactiveFlags.RAW\u5C5E\u6027\uFF0C\u76F4\u63A5\u8FD4\u56DE\u6E90\u5BF9\u8C61\nexport function toRaw<T>(observed: T): T {\n\tconst raw = observed && (observed as Target)[ReactiveFlags.RAW];\n\treturn raw ? toRaw(raw) : observed;\n}\n\n// \u8F6C\u6210\u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport function toReactive<T extends unknown>(value: T): T {\n\treturn isObject(value) ? reactive(value as any) : value;\n}\n\nexport function readonly(target: object) {\n\treturn createReactiveObject(target, true, readonlyHandlers, readonlyMap);\n}\n\nexport function reactive<T extends object>(target: T) {\n\t/**\n\t * @example\n\t * const state = reactive({})\n\t * const readonlyS = readonly(state)\n\t * \u5982\u679C\u662Freadonly\u8FD4\u56DE\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u5176\u672C\u8EAB\n\t */\n\tif (isReadonly(target)) {\n\t\treturn target;\n\t}\n\n\treturn createReactiveObject(target, false, mutableHandlers, reactiveMap);\n}\n\nexport function shallowReactive(target: object) {\n\treturn createReactiveObject(target, false, shallowReactiveHandlers, shallowReactiveMap);\n}\n\nexport function createReactiveObject(\n\ttarget: Target,\n\tisReadonly: boolean,\n\tbaseHandlers: ProxyHandler<any>,\n\tproxyMap: WeakMap<Target, any>\n) {\n\tif (!isObject(target)) {\n\t\treturn target;\n\t}\n\t// \u5224\u65AD\u5BF9\u8C61\u662F\u5426\u88AB\u4EE3\u7406\u8FC7\uFF0C\u5982\u679C\u662F\uFF0C\u8FD4\u56DE\u4EE3\u7406\u5BF9\u8C61\n\t/** \u573A\u666F\uFF1A\n\t *  const obj = {a: 1}\n\t * \tconst state = reactive(obj);\n\t\t\tconst state2 = reactive(obj);\n\t\t\tstate === state2  true\n\t */\n\tconst existingProxy = proxyMap.get(target);\n\tif (existingProxy) {\n\t\treturn existingProxy;\n\t}\n\n\t// \u5982\u679C\u4EE3\u7406\u5BF9\u8C61\u518D\u5305\u88C5\u6210reactive\uFF0C\u8FD9\u91CC\u53D6\u503C\u4F1A\u89E6\u53D1 proxy get\u65B9\u6CD5\n\t/** \u573A\u666F\uFF1A\n\t *  const obj = {a: 1}\n\t * \tconst state = reactive(obj);\n\t\t\tconst state2 = reactive(state);\n\t\t\tstate === state2  true\n\t */\n\n\t// \u6392\u9664 readonly(), readonly \u5305\u88C5\u7684\u662Fproxy\u5BF9\u8C61\uFF0C\u4E0D\u80FD\u8FD4\u56DE\u5DF2\u88AB\u4EE3\u7406\u5BF9\u8C61\uFF0C\u8981\u8FD4\u56DE\u65B0\u7684\u4EE3\u7406\u5BF9\u8C61\uFF0C\u62E6\u622Aset,delete,get\u65B9\u6CD5\n\tif (target[ReactiveFlags.IS_REACTIVE] && !isReadonly) {\n\t\treturn target;\n\t}\n\n\tconst proxy = new Proxy(target, baseHandlers);\n\n\t// \u7F13\u5B58\u4EE3\u7406\u5BF9\u8C61\n\tproxyMap.set(target, proxy);\n\treturn proxy;\n}\n", "import { NOOP, isFunction } from '@vue/shared';\nimport { ReactiveEffect, activeEffect, trackEffects, triggerEffects } from './effect';\nimport { Dep } from './dep';\n\nexport interface ComputedRef<T = any> extends WritableComputedRef<T> {\n\treadonly value: T;\n}\n\nexport interface WritableComputedRef<T> {\n\treadonly effect: ReactiveEffect<T>;\n}\n\nexport interface WritableComputedOptions<T> {\n\tget: ComputedGetter<T>;\n\tset: ComputedSetter<T>;\n}\n\nexport type ComputedGetter<T> = (...args: any[]) => T;\nexport type ComputedSetter<T> = (v: T) => void;\n\nclass ComputedRefImpl<T> {\n\t// \u6536\u96C6\u5F53\u524D\u7684effect\uFF0C \u4F5C\u7528\uFF1A\u5F53\u6539\u53D8\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\uFF0C\u4E5F\u8981\u89E6\u53D1effect\u4F9D\u8D56\u66F4\u65B0\n\tpublic dep: Dep = undefined;\n\n\t// \u5185\u90E8\u7F13\u5B58\u8BA1\u7B97\u8FC7\u540E\u7684\u503C\n\tprivate _value: T = undefined;\n\n\t// \u6807\u8BB0\u5F53\u524D\u662F\u5426\u88AB\u7F13\u5B58\u8FC7\uFF1A\u5982\u679C\u662Ftrue\uFF0C\u8868\u660E\u6CA1\u6709\u7528\u8FC7\uFF0C \u9700\u8981\u6267\u884Ceffect\u7684run\uFF0Cfalse\u8868\u660E\u7528\u8FC7\u4E86\uFF0C\u53D6_value\u7F13\u5B58\u7684\u503C\n\tpublic _dirty = true;\n\n\t// \u6536\u96C6\u4F9D\u8D56\n\tpublic readonly effect: ReactiveEffect<T>;\n\n\tconstructor(public getter: ComputedGetter<T>, private readonly _setter: ComputedSetter<T>) {\n\t\t// \u8FD9\u91CC\u7684 ReactiveEffect\u7B2C\u4E8C\u4E2A\u56DE\u8C03\u89E6\u53D1\u65F6\u673A\uFF1A\u5F53proxy\u5BF9\u8C61\u5C5E\u6027\u89E6\u53D1\u4E86set\n\t\t// getter\u91CC\u9762\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027 \u6536\u96C6\u5F53\u524D\u5185\u90E8\u7684effect\n\n\t\t/**\n\t\t * @example\n\t\t * computed(() => {\n\t\t * \t\treturn state.name + state.name2\n\t\t * })\n\t\t *\n\t\t * \u8FD9\u91CC\u7684name \u548C name2 \u90FD\u6536\u96C6\u4E86 this.effect\n\t\t * \u6B64\u65F6\u7684 weakMap\u7ED3\u6784\u5982\u4E0B\uFF1A { target: Map{name: Set<this.effect>, name2: Set<this.effect>} }\n\t\t */\n\t\tthis.effect = new ReactiveEffect(getter, () => {\n\t\t\t// \u8FD9\u91CC\u8BF4\u660E\u6709\u65B0\u7684\u4F9D\u8D56\u503C\u6709\u53D8\u5316\uFF0C\u91CD\u7F6E\u810F\u68C0\u67E5\n\t\t\tif (!this._dirty) {\n\t\t\t\tthis._dirty = true;\n\t\t\t\t// \u89E6\u53D1\u6536\u96C6\u7684effect\n\t\t\t\ttriggerEffects(this.dep);\n\t\t\t}\n\t\t});\n\t}\n\n\t// \u5BF9\u8BA1\u7B97\u5C5E\u6027\u53D6\u503C\n\t/**\n\t * @example\n\t * ```js\n\t * const fullName = computed(() => state.firstName + state.secoedName)\n\t * ```\n\t *\n\t * ```html\n\t * <template>{{fullName}}</template>\n\t * ```\n\t */\n\tget value() {\n\t\tif (activeEffect) {\n\t\t\t// \u5982\u679C\u6709activeEffect\uFF0C\u8BF4\u660E\u8FD9\u4E2A\u8BA1\u7B97\u5C5E\u6027\u5728effect\u4E2D\u4F7F\u7528\uFF0C\u8BA1\u7B97\u5C5E\u6027\u9700\u8981\u6536\u96C6\u8FD9\u4E2Aeffect\n\t\t\ttrackEffects(this.dep || (this.dep = new Set<ReactiveEffect>()));\n\t\t}\n\n\t\t// \u5982\u679C\u662F\u810F\u7684\uFF0C\u8868\u660E\u6CA1\u6709\u7528\u8FC7\uFF0C\u9700\u8981\u6267\u884Ceffect\u83B7\u53D6\u65B0\u7684\u503C\n\t\tif (this._dirty) {\n\t\t\t// \u6807\u8BB0\u4E3A\u7528\u8FC7\n\t\t\tthis._dirty = false;\n\t\t\tthis._value = this.effect.run();\n\t\t}\n\t\t// \u8BFB\u53D6\u7F13\u5B58\u7684\u503C\n\t\treturn this._value;\n\t}\n\n\t/**\n\t * @example\n\t * ```js\n\t * const fullName = computed(() => state.firstName + state.secoedName)\n\t * fullName.value = 'mini vue3'\n\t * \u5BF9\u8BA1\u7B97\u5C5E\u6027\u8D4B\u503C\uFF0C\u4E5F\u4F1A\u89E6\u53D1\u9875\u9762\u66F4\u65B0\n\t * ```\n\t */\n\tset value(newValue: T) {\n\t\tthis._setter(newValue);\n\t}\n}\n\nexport function computed<T>(getter: ComputedGetter<T>): ComputedRef<T>;\nexport function computed<T>(options: WritableComputedOptions<T>): WritableComputedRef<T>;\nexport function computed<T>(getterOrOptions: ComputedGetter<T> | WritableComputedOptions<T>) {\n\tlet setter: ComputedSetter<T>;\n\tlet getter: ComputedGetter<T>;\n\tconst onlyGetter = isFunction(getterOrOptions);\n\tif (onlyGetter) {\n\t\tgetter = getterOrOptions;\n\t\tsetter = NOOP;\n\t} else {\n\t\tsetter = getterOrOptions.set || NOOP;\n\t\tgetter = getterOrOptions.get;\n\t}\n\n\treturn new ComputedRefImpl(getter, setter);\n}\n", "import { EMPTY_OBJ, NOOP, isArray, isFunction, isMap, isObject, isPlainObject, isSet } from '@vue/shared';\nimport { queueJob } from '@vue/runtime-core';\nimport { ComputedRef } from './computed';\nimport { EffectScheduler, ReactiveEffect } from './effect';\nimport { isReactive } from './reactive';\nimport { Ref, isRef } from './ref';\nimport { callWithErrorHandling } from 'packages/runtime-core/src/errorHandling';\n\nconst INITIAL_WATCHER_VALUE = {};\n\nexport interface WatchOptionsBase {\n\tflush?: 'sync' | 'pre';\n}\n\nexport interface WatchOptions<Immediate = boolean> extends WatchOptionsBase {\n\timmediate?: Immediate;\n\tdeep?: boolean;\n}\n\nexport type WatchEffect = (onCleanup: OnCleanup) => void;\n\n// () => T\uFF1A getter\n// ComputedRef: \u8BA1\u7B97\u5C5E\u6027\n// Ref<T> ref\n// \u54CD\u5E94\u5F0F\u5BF9\u8C61\nexport type WatchSource<T = any> = Ref<T> | ComputedRef<T> | (() => T);\n\n// cleanupFn \u7528\u6237\u6267\u884C\u7684\u56DE\u8C03\ntype OnCleanup = (cleanupFn: () => void) => void;\n\nexport type WatchCallback<V = any, OV = any> = (value: V, oldValue: OV, onCleanup?: OnCleanup) => any;\n\nexport function watchEffect(effect: WatchEffect, options?: WatchOptions) {\n\tdoWatch(effect, null, options);\n}\n\n// watch \u53EF\u4EE5\u76D1\u542C ref\u3001 computed\u3001 reactive\u3001getter\n// \u5F53\u76D1\u542C\u6574\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61reactive\u65F6\uFF0C\u4F1A\u81EA\u52A8\u542F\u7528\u6DF1\u5C42\u6A21\u5F0F\uFF0C \u9012\u5F52\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u89E6\u53D1\u6BCF\u4E2A\u5C5E\u6027\u6536\u96C6effect\uFF0C\u6240\u4EE5\u4E0D\u5EFA\u8BAE\u76F4\u63A5\u76D1\u542C\u6574\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\uFF0C\u4F1A\u6709\u9690\u5F62\u7684\u6027\u80FD\u5F71\u54CD\n// \u63A8\u8350\u4F7F\u7528getter \u65B9\u6CD5 \u8BBF\u95EE\u6BCF\u4E2A\u5C5E\u6027\uFF1A watch(() => state.name, cb)\nexport function watch<T = any, Immediate extends Readonly<boolean> = false>(\n\tsource: T | WatchSource<T>,\n\tcb: WatchCallback,\n\toptions?: WatchOptions<Immediate>\n) {\n\treturn doWatch(source as any, cb, options);\n}\n\nfunction doWatch(\n\tsource: WatchSource | WatchSource[] | WatchEffect | object,\n\tcb: WatchCallback | null,\n\t{ immediate, deep, flush }: WatchOptions = EMPTY_OBJ\n) {\n\tlet getter: () => any;\n\n\tif (isRef(source)) {\n\t\t// \u5982\u679C\u662Fref\uFF0C\u89E6\u53D1\u5C5E\u6027value\u6536\u96C6\u4F9D\u8D56\n\t\tgetter = () => source.value;\n\t} else if (isReactive(source)) {\n\t\t/**\n\t\t * @example\n\t\t * const state = reactive({name : 1})\n\t\t * watch(state, val => {})\n\t\t */\n\t\t// \u9012\u5F52\u904D\u5386\u5BF9\u8C61\uFF0C\u4F9D\u6B21\u53D6\u503C\uFF0C\u5C5E\u6027\u5C31\u4F1A\u6536\u96C6\u5185\u90E8\u7684effect\n\t\tgetter = () => source;\n\t\tdeep = true;\n\t} else if (isArray(source)) {\n\t\tgetter = () =>\n\t\t\tsource.map((s: any) => {\n\t\t\t\tif (isRef(s)) {\n\t\t\t\t\treturn s.value;\n\t\t\t\t} else if (isReactive(s)) {\n\t\t\t\t\treturn traverse(s);\n\t\t\t\t} else if (isFunction(s)) {\n\t\t\t\t\treturn callWithErrorHandling(s);\n\t\t\t\t}\n\t\t\t});\n\t} else if (isFunction(source)) {\n\t\t// watch cb\n\t\tif (cb) {\n\t\t\t/**\n\t\t\t * @example\n\t\t\t * const state = reactive({name : 1})\n\t\t\t * watch(() => state.name, val => {})\n\t\t\t */\n\t\t\t// \u76F4\u63A5\u8D4B\u503C\n\t\t\tgetter = source as any;\n\t\t} else {\n\t\t\t/**\n\t\t\t * @example\n\t\t\t * watchEffect(onCleanup => {\n\t\t\t\t\t\tonCleanup(() => {});\n\t\t\t\t\t\tconsole.log('watchEffect', state.name);\n\t\t\t\t\t});\n\t\t\t */\n\n\t\t\t// \u6267\u884CwatchEffect\u7684\u4F20\u5165\u7684\u51FD\u6570\uFF0C\u67092\u4E2A\u529F\u80FD\uFF1A\n\t\t\t// 1\uFF1A\u5C5E\u6027\u6536\u96C6effect\uFF0C\u4E0B\u6B21proxy\u5C5E\u6027\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\uFF0C\u6267\u884C\u81EA\u5B9A\u4E49\u7684scheduler\n\t\t\t// 2\uFF1A\u62FF\u5230\u7528\u6237onCleanup\u7684\u56DE\u8C03\uFF0C\u5728\u4E0B\u6B21\u6267\u884C\u65F6\uFF0C\u8C03\u7528 \u7528\u6237\u7684onCleanup\u56DE\u8C03\n\t\t\tgetter = () => {\n\t\t\t\tif (cleanup) {\n\t\t\t\t\tcleanup();\n\t\t\t\t}\n\t\t\t\treturn source(onCleanup);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tgetter = NOOP;\n\t}\n\n\t// \u5F53\u76F4\u63A5\u4FA6\u542C\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61\u65F6\uFF0C\u4FA6\u542C\u5668\u4F1A\u81EA\u52A8\u542F\u7528\u6DF1\u5C42\u6A21\u5F0F\uFF0C\u5BF9\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6BCF\u4E2A\u5C5E\u6027\n\tif (cb && deep) {\n\t\tgetter = () => traverse(source);\n\t}\n\n\t// \u521D\u59CB\u5316undefined\uFF0C\u7B2C\u4E00\u6B21\u89E6\u53D1watch\u56DE\u8C03\uFF0ColdValue \u662F\u6CA1\u6709\u7684\n\tlet oldValue = INITIAL_WATCHER_VALUE;\n\n\t// \u6682\u5B58\u7528\u6237\u4F20\u5165\u8FDB\u53BB\u7684OnCleanup\u56DE\u8C03\u51FD\u6570\n\t// \u5728\u4E0B\u4E00\u6B21\u6267\u884Cwatch\u7684\u56DE\u8C03\u65F6\uFF0C\u6267\u884C\u4E00\u904Dcleanup\n\tlet cleanup: () => void;\n\tconst onCleanup: OnCleanup = (fn: () => void) => {\n\t\t// \u6267\u884Ccleanup\u64CD\u4F5C\u4E5F\u8981\u6267\u884Cstop\n\t\tcleanup = effect.stop = () => {\n\t\t\tfn();\n\t\t};\n\t};\n\n\t// \u81EA\u5B9A\u4E49 scheduler\uFF0C\u53EF\u4EE5\u63A7\u5236\u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\u65F6\u673A\n\tconst job = () => {\n\t\tif (!effect.active) {\n\t\t\treturn;\n\t\t}\n\t\tif (cb) {\n\t\t\t// \u6267\u884Cgetter\u65B9\u6CD5\uFF0C\u62FF\u5230\u6700\u65B0\u7684\u8FD4\u56DE\u503C\n\t\t\tconst newValue = effect.run();\n\n\t\t\tif (cleanup) {\n\t\t\t\tcleanup();\n\t\t\t}\n\n\t\t\t// \u4F20\u7ED9watch\u56DE\u8C03\n\t\t\tcb(newValue, oldValue, onCleanup);\n\t\t\t// \u66F4\u65B0\u8001\u503C\n\t\t\toldValue = newValue;\n\t\t} else {\n\t\t\t// watchEffect\n\t\t\teffect.run();\n\t\t}\n\t};\n\n\t// getter \u65B9\u6CD5\u91CC\u9762\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u6536\u96C6\u4E86\u8FD9\u4E2Aeffect\uFF0C\u5F53\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u53D1\u751Fset\uFF0C\u5C31\u4F1A\u89E6\u53D1\u8FD9\u91CC\u7684job\u65B9\u6CD5\uFF0C\n\t// job\u65B9\u6CD5\u91CC\u9762\u6267\u884Cgetter\u65B9\u6CD5\uFF0C\u62FF\u5230\u6700\u65B0\u7684\u503C\uFF0C\u7136\u540E\u5C06\u8001\u503C\uFF0C\u65B0\u503C\u629B\u51FAcb\uFF0C\u7528\u6237\u5C31\u80FD\u62FF\u5230\u65E7 \u65B0 \u503C\n\n\t// watch\u662F effect + \u81EA\u5B9A\u4E49scheduler, scheduler\u56DE\u8C03\u63A7\u5236cb\u56DE\u4F20\u6570\u503C\n\t// watchEffect \u5C31\u662Feffect\uFF0C\u5F53\u6570\u636E\u53D8\u5316\u65F6\uFF0C\u76F4\u63A5\u89E6\u53D1\u56DE\u8C03\u66F4\u65B0\n\n\tlet scheduler: EffectScheduler;\n\tif (flush === 'sync') {\n\t\t// \u540C\u6B65\u66F4\u65B0\n\t\tscheduler = job;\n\t} else {\n\t\t// \u9ED8\u8BA4\u662F\u5F02\u6B65\uFF0C\u591A\u6B21\u89E6\u53D1\u53EA\u4F1A\u6267\u884C\u4E00\u6B21\uFF0C \u6279\u5904\u7406\n\t\tscheduler = () => queueJob(job);\n\t}\n\n\tconst effect = new ReactiveEffect(getter, scheduler);\n\n\tif (cb) {\n\t\tif (immediate) {\n\t\t\t// \u7ACB\u5373\u89E6\u53D1\n\t\t\tjob();\n\t\t} else {\n\t\t\t// \u5982\u679C\u7528\u6237\u6CA1\u6709\u5199immediate\uFF0C\u4E3B\u52A8\u89E6\u53D1\uFF0C\n\t\t\t// \u8FD9\u91CC\u7A0B\u5E8F\u8981\u4E3B\u52A8\u89E6\u53D1getter\u62FF\u5230\u8001\u503C\uFF0C\u540C\u65F6\u56E0\u4E3A\u6709\u5C5E\u6027\u8BBF\u95EE\uFF0C\u89E6\u53D1\u5F53\u524D\u76D1\u542C\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027\u4F9D\u8D56\u6536\u96C6effect\uFF0C\u5F53\u5C5E\u6027\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1\u4F9D\u8D56effect\u66F4\u65B0, \u62FF\u5230\u65B0\u503C\n\t\t\toldValue = effect.run();\n\t\t}\n\t} else {\n\t\t// watchEffect \u9ED8\u8BA4\u6267\u884C\u4E00\u6B21\n\t\teffect.run();\n\t}\n\n\t// \u505C\u6B62\u4FA6\u542C\u5668\n\treturn () => effect.stop();\n}\n\nexport function traverse(value: unknown, seen?: Set<unknown>) {\n\t// reactive\u5BF9\u8C61\u91CC\u9762\u53EF\u4EE5\u6709\u5982\u4E0B\u503C\uFF1Aarray, set\u3001map\u3001\u666E\u901A\u5BF9\u8C61\uFF0C\u6240\u4EE5\u8981\u5206\u522B\u5904\u7406\n\n\tif (!isObject(value)) {\n\t\treturn value;\n\t}\n\tseen = seen || new Set();\n\tif (seen.has(value)) {\n\t\treturn value;\n\t}\n\tseen.add(value);\n\tif (isRef(value)) {\n\t\ttraverse(value.value, seen);\n\t} else if (isMap(value) || isSet(value)) {\n\t\tvalue.forEach((val: any) => {\n\t\t\ttraverse(val, seen);\n\t\t});\n\t} else if (isArray(value)) {\n\t\tfor (let index = 0; index < value.length; index++) {\n\t\t\ttraverse(value[index], seen);\n\t\t}\n\t} else if (isPlainObject(value)) {\n\t\tfor (const key in value) {\n\t\t\ttraverse(value[key], seen);\n\t\t}\n\t}\n\treturn value;\n}\n", "import { callWithErrorHandling } from './errorHandling';\n\nexport interface SchedulerJob extends Function {\n\tid?: number;\n\tactive?: boolean;\n}\n\nconst queue: SchedulerJob[] = [];\nlet isFlushing = false;\nconst resolvedPromise = Promise.resolve() as Promise<any>;\n\n// vue3 \u7684 nextTick \u6CA1\u6709\u50CFvue2\u90A3\u6837 \u4E00\u76F4\u964D\u7EA7\u5904\u7406\uFF0C\u4E0D\u8003\u8651\u517C\u5BB9\u95EE\u9898 \u76F4\u63A5promise\n// vue2: promise -> MutationObserver -> setTimeout ->\nexport function nextTick<T = void, R = void>(this: T, fn?: (this: T) => R) {\n\tconst p = resolvedPromise;\n\treturn fn ? p.then(this ? fn.bind(this) : fn) : p;\n}\n\nexport function queueJob(job: SchedulerJob) {\n\tif (!queue.length || !queue.includes(job)) {\n\t\tqueue.push(job);\n\t}\n\n\t// \u5F02\u6B65\u6267\u884C\u961F\u5217\u4E2D\u6240\u6709\u7684\u56DE\u8C03\n\tif (!isFlushing) {\n\t\tisFlushing = true;\n\t\tresolvedPromise.then(() => {\n\t\t\ttry {\n\t\t\t\tqueue.forEach(job => callWithErrorHandling(job, null));\n\t\t\t} finally {\n\t\t\t\t// \u540C\u4E00\u6279\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\u4E4B\u540E\uFF0C\u6E05\u7A7A\u961F\u5217\uFF0C\u91CD\u7F6E\u72B6\u6001\n\t\t\t\tisFlushing = false;\n\t\t\t\tqueue.length = 0;\n\t\t\t}\n\t\t});\n\t}\n}\n", "import { EMPTY_OBJ, NOOP, extend, hasOwn } from '@vue/shared';\nimport { track } from '@vue/reactivity';\nimport { ComponentInternalInstance } from './componentRenderUtils';\nimport { nextTick, queueJob } from './scheduler';\nimport { getExposeProxy, isStatefulComponent } from './component';\n\nconst enum AccessTypes {\n\tOTHER,\n\tSETUP,\n\tDATA,\n\tPROPS,\n\tCONTEXT\n}\n\nexport function getPublicInstance(i: ComponentInternalInstance | null) {\n\tif (i === null) {\n\t\treturn null;\n\t}\n\tif (isStatefulComponent(i)) {\n\t\treturn getExposeProxy(i) || i.proxy;\n\t}\n\treturn getPublicInstance(i.parent);\n}\n\nexport type PublicPropertiesMap = Record<string, (i: ComponentInternalInstance) => any>;\n\nexport const publicPropertiesMap = extend(Object.create(null), {\n\t// \u5217\u4E3E\u51E0\u4E2A\u5E38\u7528\u7684\u7684 \u5C5E\u6027\n\t$: i => i,\n\t$el: i => i.vnode.el,\n\t$data: i => i.data,\n\t$props: i => i.props,\n\t$attrs: i => i.attrs,\n\t$slots: i => i.slots,\n\t$refs: i => i.refs,\n\t$emit: i => i.emit,\n\n\t$root: i => getPublicInstance(i.root),\n\t$options: i => i.type,\n\t$forceUpdate: i => queueJob(i.update),\n\t$nextTick: i => nextTick.bind(i.proxy),\n\t// vue3\u4E0D\u652F\u6301\u8FD9\u4E2A\u5199\u6CD5\u4E86\n\t$watch: () => NOOP\n} as PublicPropertiesMap);\n\nexport const PublicInstanceProxyHandlers: ProxyHandler<any> = {\n\tget(instance: ComponentInternalInstance, key: string) {\n\t\tconst { accessCache, data, props, setupState } = instance;\n\n\t\tif (key[0] !== '$') {\n\t\t\t// \u83B7\u53D6data\u51FD\u6570\u4E2D\u7684\u503C\n\t\t\tif (data !== EMPTY_OBJ && hasOwn(data, key)) {\n\t\t\t\taccessCache[key] = AccessTypes.DATA;\n\t\t\t\treturn data[key];\n\t\t\t} else if (props !== EMPTY_OBJ && hasOwn(props, key)) {\n\t\t\t\treturn props[key];\n\t\t\t} else if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {\n\t\t\t\treturn setupState[key];\n\t\t\t}\n\t\t}\n\n\t\t// \u901A\u8FC7$\u7B26\u53F7\u8BBF\u95EE\u5C5E\u6027\n\t\t// $data $props $slots ...\n\t\tconst publicGetter = publicPropertiesMap[key];\n\t\tif (publicGetter) {\n\t\t\tif (key === '$attrs') {\n\t\t\t\t// \u89E6\u53D1\u6536\u96C6$attrs\n\t\t\t\ttrack(instance, key);\n\t\t\t}\n\t\t\treturn publicGetter(instance);\n\t\t}\n\t},\n\tset(instance: ComponentInternalInstance, key: string, newValue) {\n\t\tconst { data, props, setupState } = instance;\n\n\t\tif (data !== EMPTY_OBJ && hasOwn(data, key)) {\n\t\t\tdata[key] = newValue;\n\t\t\treturn true;\n\t\t} else if (hasOwn(props, key)) {\n\t\t\tconsole.warn('props is readonly');\n\t\t\treturn false;\n\t\t} else if (hasOwn(setupState, key)) {\n\t\t\tsetupState[key] = newValue;\n\t\t\treturn true;\n\t\t}\n\t}\n};\n", "import { shallowReactive, toRaw } from '@vue/reactivity';\nimport { hasOwn, isReservedProp } from '@vue/shared';\nimport { ComponentInternalInstance, Data } from './componentRenderUtils';\n\nexport function initProps(instance: ComponentInternalInstance, rawProps: Data | null, isStateful: number) {\n\tconst props: Data = {};\n\tconst attrs: Data = {};\n\n\t// rawProps \u662Fvnode\u4E0A\u4F20\u9012\u7684props\uFF0C\u901A\u5E38\u4E5F\u5C31\u662F\u7236\u7EC4\u4EF6\u4F20\u9012\u7ED9\u5B50\u7EC4\u4EF6\u7684props\n\tsetFullProps(instance, rawProps, props, attrs);\n\n\tif (isStateful) {\n\t\t// \u5C06props\u8F6C\u5316\u4E3A\u54CD\u5E94\u5F0F\uFF0Cprops\u4E5F\u662F\u6D45\u4EE3\u7406\u3002\u4E00\u662F\u8003\u8651\u5230\u6027\u80FD\uFF0C\u4E0D\u505A\u6DF1\u5EA6\u4EE3\u7406\u3002\u4E8C\u662F\u56E0\u4E3A\u7528\u6237\u4E00\u822C\u90FD\u662F\u76F4\u63A5\u66F4\u65B0props\u67D0\u4E2A\u5BF9\u8C61\uFF0C\u800C\u4E0D\u662F\u66F4\u65B0props\u5C5E\u6027\u4E2D\u7684\u67D0\u4E2A\u503C\n\t\tinstance.props = shallowReactive(props);\n\t} else {\n\t\tif (!instance.type.props) {\n\t\t\t// \u51FD\u6570\u5F0F\u7EC4\u4EF6\uFF0C\u5982\u679C\u6CA1\u6709props\uFF0C\u5C06attrs\u7ED9props\n\t\t\tinstance.props = attrs;\n\t\t} else {\n\t\t\t// \u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0D\u9700\u8981\u5C06props\u8F6C\u5316\u4E3A\u54CD\u5E94\u5F0F\n\t\t\tinstance.props = props;\n\t\t}\n\t}\n\tinstance.attrs = attrs;\n}\n\n// \u8FD9\u4E2A\u65B9\u6CD5\u5904\u7406 props \u548C attrs\n// \u5982\u679C\u7528\u6237\u4E3B\u52A8\u58F0\u660E\u4E86props\u5BF9\u8C61\uFF0C\u5E76\u4E14\u5728vnode\u4E0A\u7684props\u91CC\uFF0C\u90A3\u5C31\u5904\u7406\u6210instance\u7684props\uFF0C\u4E0D\u5728\u7684\u8BDD\u5C31\u88AB\u5F52\u7C7B\u5230attrs\u4E2D\nfunction setFullProps(instance: ComponentInternalInstance, rawProps: Data | null, props: Data, attrs: Data) {\n\t// propsOptions\u7528\u6237\u81EA\u5DF1\u5728\u7EC4\u4EF6\u5148\u5199\u7684props\n\tconst options = instance.propsOptions;\n\tif (rawProps) {\n\t\tfor (let key in rawProps) {\n\t\t\t// \u8DF3\u8FC7vue \u4E2D \u5C5E\u6027\u4FDD\u7559\u5173\u952E\u5B57\n\t\t\tif (isReservedProp(key)) continue;\n\n\t\t\tconst value = rawProps[key];\n\n\t\t\tif (hasOwn(options, key)) {\n\t\t\t\tprops[key] = value;\n\t\t\t} else {\n\t\t\t\t// \u6CA1\u6709\u5728\u7528\u6237\u7533\u660E\u7684props\u4E2D\uFF0C\u5219\u5F52\u7C7B\u4E3Aattrs\n\t\t\t\tattrs[key] = value;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function updateProps(instance: ComponentInternalInstance, rawProps: Data | null, rawPrevProps: Data | null) {\n\tconst { props, attrs } = instance;\n\tsetFullProps(instance, rawProps, props, attrs);\n\n\tfor (const key in rawProps) {\n\t\trawPrevProps[key] = rawProps[key];\n\t}\n\n\tfor (const key in rawPrevProps) {\n\t\tif (!hasOwn(rawProps, key)) {\n\t\t\tdelete rawPrevProps[key];\n\t\t}\n\t}\n}\n", "import { EMPTY_OBJ, capitalize } from '@vue/shared';\nimport { ComponentInternalInstance } from './componentRenderUtils';\nimport { callWithErrorHandling } from './errorHandling';\n\nexport function emit(instance: ComponentInternalInstance, event: string, ...args: any[]) {\n\tconst props = instance.vnode.props || EMPTY_OBJ;\n\n\tlet handlerName = `on${capitalize(event)}`;\n\tlet handler = props[handlerName];\n\tif (handler) {\n\t\tcallWithErrorHandling(handler, args);\n\t}\n\n\tconst onceHandler = props[handlerName + 'Once'];\n\tif (onceHandler) {\n\t\t// \u5982\u679C\u6CA1\u6709\u88AB\u8BB0\u5F55\n\t\tif (!instance.emitted) {\n\t\t\tinstance.emitted = {};\n\t\t} else if (instance.emitted[handlerName]) {\n\t\t\treturn;\n\t\t}\n\n\t\t// \u7F13\u5B58\u4E0B\uFF0C\u4E0B\u6B21\u5C31\u963B\u6B62\u89E6\u53D1\u4E8B\u4EF6\n\t\tinstance.emitted[handlerName] = true;\n\n\t\tcallWithErrorHandling(onceHandler, args);\n\t}\n}\n", "import { RendererElement, RendererNode, RendererInternals, RendererOptions } from '../renderer';\nimport { VNode, VNodeArrayChildren, VNodeProps } from '../vnode';\nimport { ComponentInternalInstance } from '../componentRenderUtils';\nimport { ShapeFlags, isString } from '@vue/shared';\n\nexport const isTeleport = (type: any): boolean => type.__isTeleport;\n\nexport const isTeleportDisabled = (props: VNode['props']) => props && props.disabled;\n\nexport interface TeleportProps {\n\tto: string | RendererElement | null | undefined;\n\tdisabled: boolean;\n}\n\nexport type TeleportVNode = VNode<RendererNode, TeleportProps>;\n\nexport const enum TeleportMoveTypes {\n\tTARGET_CHANGE, // target change\n\tTOGGLE, // enable / disable\n\tREORDER // moved in the main view\n}\n\nexport const TeleportImpl = {\n\t__isTeleport: true,\n\tprocess(\n\t\tn1: TeleportVNode | null,\n\t\tn2: TeleportVNode,\n\t\tcontainer: RendererElement,\n\t\tanchor: RendererNode | null,\n\t\tparentComponent: ComponentInternalInstance | null,\n\t\tinternals: RendererInternals\n\t) {\n\t\tconst {\n\t\t\tmc: mountComponent,\n\t\t\tpc: patchChildren,\n\t\t\to: { quertSelector, insert, createText }\n\t\t} = internals;\n\n\t\tconst { shapeFlag, children } = n2;\n\t\tconst disabled = isTeleportDisabled(n2.props);\n\n\t\tif (n1 == null) {\n\t\t\t// first mount\n\n\t\t\t// ??? \u4E3A\u5565\u7528\u7A7A\u6587\u672C\u505A\u8DDF\u8282\u70B9\n\n\t\t\t// teleport start\n\t\t\tconst placeholder = (n2.el = createText(''));\n\t\t\t// teleport end\n\t\t\tconst mainAnchor = (n2.anchor = createText(''));\n\n\t\t\tinsert(placeholder, container, anchor);\n\t\t\tinsert(mainAnchor, container, anchor);\n\n\t\t\tconst target = (n2.target = resolveTarget(n2.props, quertSelector));\n\t\t\tconst targetAnchor = (n2.targetAnchor = createText(''));\n\n\t\t\tif (target) {\n\t\t\t\t// targetAnchor\u8BB0\u5F55\u76EE\u6807\u8282\u70B9\n\t\t\t\tinsert(targetAnchor, target);\n\t\t\t}\n\n\t\t\tconst mount = (container: RendererElement, anchor: RendererNode | null) => {\n\t\t\t\t// teleport \u5B50\u5143\u7D20\u5FC5\u987B\u662F\u6570\u7EC4\n\t\t\t\tif (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t\t\tmountComponent(children as VNodeArrayChildren, container, anchor, parentComponent);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (disabled) {\n\t\t\t\t// \u5982\u679Cdisabled\uFF0C\u6DFB\u52A0\u5230\u4F20\u5165\u7684container\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\u662Fapp\u4E0B\n\t\t\t\tmount(container, mainAnchor);\n\t\t\t} else {\n\t\t\t\tmount(target, targetAnchor);\n\t\t\t}\n\t\t} else {\n\t\t\t// update\n\t\t\tn2.el = n1.el;\n\t\t\tconst target = (n2.target = n1.target);\n\t\t\tconst mainAnchor = (n2.anchor = n1.anchor);\n\t\t\tconst targetAnchor = (n2.targetAnchor = n1.targetAnchor);\n\n\t\t\t// \u770B\u4E0B\u4E4B\u524D\u7684\u5143\u7D20\n\t\t\tconst wasDisabled = isTeleportDisabled(n1.props);\n\n\t\t\tconst currentTarget = wasDisabled ? container : target;\n\t\t\tconst currentAnchor = wasDisabled ? mainAnchor : targetAnchor;\n\n\t\t\tpatchChildren(n1, n2, currentTarget, currentAnchor, parentComponent);\n\n\t\t\tif (disabled) {\n\t\t\t\t// TODO: disabled\u7684\u53D8\u5316\n\t\t\t} else {\n\t\t\t\t// target\u7684\u53D8\u5316\n\n\t\t\t\tif ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {\n\t\t\t\t\tconst newTarget = resolveTarget(n2.props, quertSelector);\n\n\t\t\t\t\tif (newTarget) {\n\t\t\t\t\t\tmoveTeleport(n2, newTarget, null, internals, TeleportMoveTypes.TARGET_CHANGE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tremove(vnode: VNode, { um: unmount, o: { remove: hostRemove } }: RendererInternals) {\n\t\tconst { shapeFlag, target, targetAnchor, props, anchor, children } = vnode;\n\n\t\t// \u6E05\u7A7A\u8BB0\u5F55\u4F4D\u7F6E\n\t\tif (target) {\n\t\t\thostRemove(targetAnchor);\n\t\t}\n\n\t\tif (!isTeleportDisabled(props)) {\n\t\t\t// \u6E05\u7A7A\u8BB0\u5F55\u4F4D\u7F6E\n\t\t\thostRemove(anchor);\n\t\t\tif (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t\t// \u79FB\u9664\u5B50\u5143\u7D20\n\t\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\t\tunmount(children[i] as VNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tmove: moveTeleport\n};\n\nfunction moveTeleport(\n\tvnode: VNode,\n\tcontainer: RendererElement,\n\tparentAnchor: RendererNode | null,\n\t{ o: { insert }, m: move }: RendererInternals,\n\tmoveType: TeleportMoveTypes = TeleportMoveTypes.REORDER\n) {\n\t// \u63D2\u5165\u5230\u65B0\u7684\u4F4D\u7F6E\n\tif (moveType === TeleportMoveTypes.TARGET_CHANGE) {\n\t\tinsert(vnode.targetAnchor, container, parentAnchor);\n\t}\n\n\tconst { shapeFlag, children, el, props } = vnode;\n\tconst isReorder = moveType === TeleportMoveTypes.REORDER;\n\n\t// \u5B50\u5143\u7D20\u90FD\u63D2\u5165\u5230\u81EA\u5DF1\u7684\u7236\u5143\u7D20\u91CC\u9762\n\tif (isReorder) {\n\t\tinsert(el, container, parentAnchor);\n\t}\n\n\tif (!isReorder || isTeleportDisabled(props)) {\n\t\t// \u79FB\u52A8\u5B50\u5143\u7D20\n\t\tif (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t(children as VNode[]).forEach((child: VNode) => move(child, container, parentAnchor));\n\t\t}\n\t}\n}\n\nexport const Teleport = TeleportImpl as unknown as {\n\t__isTeleport: true;\n\tnew (): {\n\t\t$props: VNodeProps & TeleportProps;\n\t\t$slots: {\n\t\t\tdefault(): VNode[];\n\t\t};\n\t};\n};\n\nexport function resolveTarget(props: TeleportProps, select: RendererOptions['quertSelector']) {\n\tconst targetSelector = props && props.to;\n\t// \u7528\u6237\u53EF\u4EE5\u4F20\u5165\u4E00\u4E2A\u5B57\u7B26\u4E32\n\tif (isString(targetSelector)) {\n\t\tif (!select) {\n\t\t\treturn null;\n\t\t}\n\t\treturn select(targetSelector as string);\n\t} else {\n\t\t// \u7528\u6237\u4E5F\u53EF\u4F20\u5165\u4E00\u4E2Adom\u8282\u70B9, \u90A3\u5C31\u7528\u8FD9\u4E2Adom\u8282\u70B9\n\t\treturn targetSelector;\n\t}\n}\n", "import { Ref } from '@vue/reactivity';\nimport { ShapeFlags, isArray, isFunction, isObject, isString } from '@vue/shared';\nimport { RendererNode } from './renderer';\nimport { Component } from './component';\nimport { ComponentInternalInstance } from './componentRenderUtils';\nimport { isTeleport } from './components/Teleport';\n\n// ref='xxx'\n// ref=\"ref('xxx)\"\n// ref=\"(ref('xxx' | toRefs(reactive))) => void\"\nexport type VNodeRef = string | Ref | ((ref: Element | null, refs: Record<string, any>) => void);\n\nexport type VNodeProps = {\n\tkey?: string | number | symbol;\n\tref?: VNodeRef;\n};\n\n/**\u5360\u4F4D */\nexport const Fragment = Symbol.for('v-fgt') as any as {\n\t__isFragment: true;\n\tnew (): {\n\t\t$props: VNodeProps;\n\t};\n};\n/**\u7EAF\u6587\u672C */\nexport const Text = Symbol.for('v-txt');\n/**\u6CE8\u91CA\u8282\u70B9 */\nexport const Comment = Symbol.for('v-cmt');\n\n/**\u865A\u62DFnode\u7684\u7C7B\u578B\uFF0C\u6587\u672C \u6216\u8005\u662Fnode */\nexport type VNodeTypes = string | VNode | Component | typeof Text | typeof Comment | typeof Fragment;\n\nexport type Data = Record<string, unknown>;\n\ntype VNodeChildAtom = VNode | string | number | boolean | null | undefined | void;\n\nexport type VNodeChild = VNodeChildAtom | VNodeArrayChildren;\n\nexport type VNodeArrayChildren = Array<VNodeChild>;\n\nexport type VNodeNormalizedChildren = string | VNodeArrayChildren | null;\n\nexport function isVNode(value: any): value is VNode {\n\treturn value ? value.__v_isVNode === true : false;\n}\n\nexport interface VNode<HostNode = RendererNode, ExtraProps = { [key: string]: any }> {\n\t/**\n\t * vnode\u6807\u8BC6\n\t */\n\t__v_isVNode: true;\n\n\t/**\n\t * vnode\u81EA\u5DF1\u7684\u7C7B\u578B\n\t */\n\ttype: VNodeTypes;\n\t/**\n\t * \u5C5E\u6027\n\t */\n\tprops: (VNodeProps & ExtraProps) | null;\n\t/**\n\t * \u5FAA\u73AF\u53D8\u91CF\uFF0C\u6307\u5B9A\u7684key\n\t */\n\tkey: string | number | symbol | null;\n\n\tref: VNodeRef | null;\n\n\t/**\n\t * \u5B69\u5B50\uFF0C\u5B69\u5B50\u7684\u7C7B\u578B\u53EF\u4EE5\u662F \u7A7A\u3001\u6587\u672C\u3001node\uFF0C\u4EE5\u53CA\u6570\u636E[\u6587\u672C]\u3001\u6570\u7EC4[node]\n\t */\n\tchildren: VNodeNormalizedChildren | null;\n\n\t// DOM\n\n\t// \u4FDD\u5B58\u5BF9\u5E94\u7684\u7EC4\u4EF6\u5B9E\u4F8B\n\tcomponent: ComponentInternalInstance | null;\n\n\t/**\n\t * \u6620\u5C04\u7684\u771F\u5B9E\u8282\u70B9\n\t */\n\tel: HostNode | null;\n\t/**\n\t * \u5BF9\u5E94\u7684\u4F4D\u7F6E\n\t */\n\tanchor: HostNode | null; // fragment anchor\n\n\t// teleport\n\ttarget: RendererNode | null;\n\n\t// teleport\n\ttargetAnchor: HostNode | null; // fragment anchor\n\n\t/**node\u5143\u7D20\u7C7B\u578Bflag */\n\t/**\u6807\u8BB0\u81EA\u5DF1\u662F\u4EC0\u4E48\u7C7B\u578B\u548C\u5B69\u5B50\u662F\u4EC0\u4E48\u7C7B\u578B */\n\tshapeFlag: number;\n}\n\n/**\u5904\u7406key */\nconst normalizeKey = ({ key }: VNodeProps): VNode['key'] => (key != null ? key : null);\n\nconst normalizeRef = ({ ref }: VNodeProps): VNode['ref'] => {\n\tif (typeof ref === 'number') {\n\t\tref = String(ref);\n\t}\n\treturn ref;\n};\n/**\n * \u521B\u5EFA\u865A\u62DFdom\uFF0C\u53EF\u80FD\u662F\u6587\u672C\u3001div\u666E\u901A\u5143\u7D20\u3001\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u3001\u6CE8\u91CA\u3001Fragment\u3001\u9759\u6001\u8282\u70B9\u3001Teleport\u3001Suspense\n */\nexport function createVNode(\n\ttype: VNodeTypes,\n\tprops: (VNodeProps & Data) | null = null,\n\tchildren: unknown = null\n): VNode {\n\t// \u6E90\u7801\u91CC\u9762\uFF1A\n\t// type: \u5982\u679C\u662FVNode \u9700\u8981cloneVNode\n\t// eg. :class=\"{a: xx, b: xxx}\" :class=\"['classA', {'classB': true }]\"\n\t// eg. :style=\"{'display': 'flex'}\" :style=\"[{'display': 'flex'}, { 'flex': 2 }]\"\n\t// props\u91CC\u9762\u5982\u679C\u6709class\u3001style \u4E5F\u9700\u8981\u62CD\u5E73\u5904\u7406\n\t// \u8FD9\u91CC\u4E3A\u4E86\u7B80\u4FBF\uFF1A\u5C31\u4E0D\u5904\u7406\u4E86\n\n\t// eg. h('div')  h('div', { props })  h('div', { props }, children)\n\t// \u5982\u679C\u6709\u503C\uFF0C\u4E00\u5B9A\u662F\u5143\u7D20\u7C7B\u578B\n\t// \u5982\u679C\u662F\u5BF9\u8C61\uFF0C\u5219\u4E3A\u7EC4\u4EF6\u7C7B\u578B\n\tconst shapeFlag = isString(type)\n\t\t? ShapeFlags.ELEMENT\n\t\t: isTeleport(type)\n\t\t? ShapeFlags.TELEPORT\n\t\t: isObject(type)\n\t\t? ShapeFlags.STATEFUL_COMPONENT\n\t\t: isFunction(type)\n\t\t? ShapeFlags.FUNCTIONAL_COMPONENT\n\t\t: 0;\n\n\treturn createBaseVNode(type, props, children, shapeFlag);\n}\n\nfunction createBaseVNode(\n\ttype: VNodeTypes,\n\tprops: (VNodeProps & Data) | null = null,\n\tchildren: any = null,\n\tshapeFlag = type === Fragment ? 0 : ShapeFlags.ELEMENT\n): VNode {\n\tconst vnode: VNode = {\n\t\t__v_isVNode: true,\n\t\ttype,\n\t\tprops,\n\t\tkey: props && normalizeKey(props),\n\t\tref: props && normalizeRef(props),\n\t\tchildren,\n\t\tel: null, // \u771F\u5B9E\u8282\u70B9 \u521D\u59CB\u5316\u4E3Anull\n\t\tanchor: null,\n\t\ttarget: null,\n\t\ttargetAnchor: null,\n\t\tcomponent: null,\n\t\tshapeFlag\n\t};\n\t// \u5904\u7406\u5B50\u7C7B\u578B\u548C\u81EA\u5DF1\u7684\u7C7B\u578B\n\t// h('div', props, 'xxx') \u6E32\u67D3\u4E3A <div ...props>xxx</div>\n\t// h('div', props, [h('span', props, 'yyyy')]) \u6E32\u67D3\u4E3A <div ...props><span ...props>yyyy</span></div>\n\tnormalizeChildren(vnode, children);\n\treturn vnode;\n}\n\n// \u5224\u65AD\u662F\u5426\u662F\u540C\u4E00\u4E2A\u865A\u62DF\u8282\u70B9\uFF0C \u56E0\u4E3A\u6BCF\u4E2A\u865A\u62DF\u8282\u70B9\u7684type\u548Ckey\u90FD\u662F\u552F\u4E00\u7684\nexport function isSameVNodeType(n1: VNode, n2: VNode) {\n\treturn n1.type === n2.type && n1.key === n2.key;\n}\n\n// eg. h('div', props, h('span', props))  h('div', props, [h('span', props)])\n// \u5904\u7406child \u8F6C\u51FAvnode\nexport function normalizeVNode(child: VNodeChild): VNode {\n\tif (child === null || typeof child === 'boolean') {\n\t\t// \u6CE8\u91CA\u8282\u70B9\n\t\treturn createVNode(Comment);\n\t} else if (isArray(child)) {\n\t\t// \u6570\u7EC4\u7684\u8BDD \u7236\u5143\u7D20\u5F04\u4E2A\u7A7A\u7684\u5360\u4F4D\u7B26\uFF1AFragment\uFF0Cchild copy\u4E00\u4EFD\n\t\treturn createVNode(Fragment, null, child.slice());\n\t} else if (typeof child === 'object') {\n\t\t// \u672C\u8EAB\u5C31\u662F vnode\n\t\t// TODO: cloneVNode\n\t\treturn cloneVNode(child);\n\t} else {\n\t\t// string numbers\n\t\treturn createVNode(Text, null, String(child));\n\t}\n}\n\n// TODO:\u5B9E\u73B0\nexport function cloneVNode(vnode: VNode): VNode {\n\treturn vnode;\n}\n\nexport function normalizeChildren(vnode: VNode, children: unknown) {\n\tlet type = 0;\n\tif (!children) {\n\t\tchildren = null;\n\t} else if (isArray(children)) {\n\t\ttype = ShapeFlags.ARRAY_CHILDREN;\n\t} else if (isObject(children)) {\n\t\tif (vnode.shapeFlag & ShapeFlags.ELEMENT) {\n\t\t\t// \u666E\u901A\u5143\u7D20 \u7684children \u662F\u63D2\u69FD\n\t\t\t// \u652F\u6301\u7528\u6237\u8FD9\u4E48\u5199: h('div', null, {default: () => 'slots'})\n\t\t\tconst slot = children.default;\n\t\t\tif (isFunction(slot)) {\n\t\t\t\tnormalizeChildren(vnode, slot());\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\ttype = ShapeFlags.SLOTS_CHILDREN;\n\t\t}\n\t} else if (isFunction(children)) {\n\t\t// \u9ED8\u8BA4\u63D2\u69FD\u540D\u79F0 default\n\t\tchildren = { default: children };\n\t\ttype = ShapeFlags.SLOTS_CHILDREN;\n\t} else {\n\t\tchildren = String(children);\n\t\ttype = ShapeFlags.TEXT_CHILDREN;\n\t}\n\n\tvnode.children = children as VNodeNormalizedChildren;\n\tvnode.shapeFlag |= type;\n}\n", "import { Data, VNodeChild, VNodeNormalizedChildren, normalizeVNode } from './vnode';\nimport { ComponentInternalInstance } from './componentRenderUtils';\nimport { ShapeFlags, isArray, isFunction } from '@vue/shared';\n\nconst normalizeSlotValue = (value: unknown) =>\n\t// children\u5FC5\u987B\u662F\u4E00\u4E2A\u6570\u7EC4 \u8DDFh\u51FD\u6570\u662F\u4E00\u4E2A\u9053\u7406\n\tisArray(value) ? value.map(normalizeVNode) : [normalizeVNode(value as VNodeChild)];\n\nconst normalizeObjectSlots = (children: any, slots: Data) => {\n\tfor (const key in children) {\n\t\tconst value = children[key];\n\t\tif (isFunction(value)) {\n\t\t\t// \u63D2\u69FD\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u51FD\u6570\n\t\t\t// e.g. default: () => h('div')\n\t\t\t// TODO: slots\u51FD\u6570\u7684\u53C2\u6570\u5904\u7406 ...args\n\t\t\tconst result = value();\n\t\t\t// TODO: withCtx\n\t\t\tslots[key] = () => normalizeSlotValue(result);\n\t\t} else if (value !== null) {\n\t\t\t// \u51FD\u6570\u8FD4\u56DE\u7684\u662F\u67D0\u4E2A\u503C\uFF0C \u800C\u4E0D\u662Fvnode\n\t\t\t// \u6BD4\u5982\u7528\u6237\u53EF\u4EE5\u8FD9\u4E48\u4F20\uFF1A h(Component, null, { default: '111' })\n\t\t\t// \u4F1A\u88AB\u5904\u7406\u6210: h(Component, null, { default: () => vnode })\n\t\t\t// \u8FD9\u91CC\u5904\u7406\u5C31\u80FD\u4FDD\u8BC1\u7528\u6237 \u8C03\u7528 slots[key] \u59CB\u7EC8\u90FD\u662F\u6709\u503C\u7684\uFF0C\u5E76\u4E14\u8FD8\u662F\u4E2A\u51FD\u6570\n\t\t\t// \u4F46Vue\u4E0D\u63A8\u8350\u8FD9\u4E48\u5199\uFF0C\u5B9E\u9645\u4F1A\u7ED9\u51FA\u4E00\u4E2AWarn\uFF0C\u4E3A\u4E86\u6027\u80FD\u8003\u8651\uFF0C\u66F4\u63A8\u8350\u4F7F\u7528 functional\n\t\t\tslots[key] = () => normalizeSlotValue(value);\n\t\t}\n\t}\n};\n\nconst normalizeVNodeSlots = (instance: ComponentInternalInstance, children: VNodeNormalizedChildren) => {\n\tconst normalized = normalizeSlotValue(children);\n\tinstance.slots.default = () => normalized;\n};\n\nexport function initSlots(instance: ComponentInternalInstance, children: VNodeNormalizedChildren) {\n\tif (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n\t\tnormalizeObjectSlots(children, instance.slots);\n\t} else {\n\t\tinstance.slots = {};\n\t\tif (children) {\n\t\t\t// \u5982\u679C\u4E0D\u662Fchild\u4E0D\u662F\u5BF9\u8C61\u7C7B\u578B\uFF0C\u4F46\u662F\u6709\u503C\uFF0C\u9700\u8981\u7ED9slot\u9ED8\u8BA4\u4E00\u4E2Adefault\u51FD\u6570\uFF0C\u8BE5\u51FD\u6570\u8FD4\u56DE\u503C\u662F\u5BF9children \u8F6C\u5316\u4E3Avnode\n\t\t\t// \u6BD4\u5982\uFF1A \u7528\u6237\u53EF\u4EE5\u8FD9\u4E48\u4F20\uFF1A h(Component, null, '111')\n\t\t\t// \u4F1A\u88AB\u5904\u7406\u6210  h(Component, null, { default: () => vnode )})\n\t\t\t// \u8FD9\u91CC\u5904\u7406\u5C31\u80FD\u4FDD\u8BC1\u7528\u6237 \u8C03\u7528 slots.default \u59CB\u7EC8\u90FD\u662F\u6709\u503C\u7684\uFF0C\u5E76\u4E14\u8FD8\u662F\u4E2A\u51FD\u6570\n\n\t\t\t// \u4F46Vue\u4E0D\u63A8\u8350\u8FD9\u4E48\u5199\uFF0C\u5B9E\u9645\u4F1A\u7ED9\u51FA\u4E00\u4E2AWarn\uFF0C\u4E3A\u4E86\u6027\u80FD\u8003\u8651\uFF0C\u66F4\u63A8\u8350\u4F7F\u7528 functional\n\t\t\tnormalizeVNodeSlots(instance, children);\n\t\t}\n\t}\n}\n\nexport function updateSlots(instance: ComponentInternalInstance, children: VNodeNormalizedChildren) {\n\tif (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n\t\tnormalizeObjectSlots(children, instance.slots);\n\t} else if (children) {\n\t\tnormalizeVNodeSlots(instance, children);\n\t}\n}\n", "// \u54B1\u7528any\u9876\u4E00\u4E0B\n\nimport { EMPTY_OBJ, NOOP, ShapeFlags, isFunction, isObject } from '@vue/shared';\nimport { ComponentInternalInstance, InternalRenderFunction } from './componentRenderUtils';\nimport { VNode } from './vnode';\nimport { callWithErrorHandling } from './errorHandling';\nimport { PublicInstanceProxyHandlers, publicPropertiesMap } from './componentPublicInstance';\nimport { proxyRefs, shallowReactive, track } from '@vue/reactivity';\nimport { initProps } from './componentProps';\nimport { emit } from './componentEmits';\nimport { initSlots } from './componentSlots';\n\nexport let currentInstance: ComponentInternalInstance | null = null;\n\nexport const getCurrentInstance: () => ComponentInternalInstance | null = () => currentInstance;\n\nexport const setCurrentInstance = (instance: ComponentInternalInstance) => (currentInstance = instance);\n\nexport const unsetCurrentInstance = () => (currentInstance = null);\n\nexport type Component = any;\n\nexport type LifecycleHook<Fn = Function> = Fn[] | null;\n\n// \u81EA\u589E\u7684\u7EC4\u4EF6\u6807\u8BC6\u7B26\nlet uid = 0;\n\n// \u521B\u5EFA\u7EC4\u4EF7\u5B9E\u4F8B\nexport function createComponentInstance(\n\tvnode: VNode,\n\tparent: ComponentInternalInstance | null\n): ComponentInternalInstance {\n\tconst { type } = vnode;\n\tconst instance: ComponentInternalInstance = {\n\t\tvnode,\n\t\tparent,\n\t\troot: null,\n\t\ttype,\n\t\tuid: uid++,\n\n\t\tdata: EMPTY_OBJ,\n\t\tprops: EMPTY_OBJ,\n\t\tattrs: EMPTY_OBJ,\n\t\tslots: EMPTY_OBJ,\n\t\trefs: EMPTY_OBJ,\n\n\t\tsetupState: EMPTY_OBJ,\n\n\t\t// ctx: EMPTY_OBJ,\n\n\t\taccessCache: EMPTY_OBJ,\n\n\t\t// \u4F20\u7ED9\u7EC4\u4EF6\u7684props\n\t\tpropsOptions: type.props || EMPTY_OBJ,\n\n\t\temit: null,\n\n\t\temitted: null,\n\n\t\tproxy: null,\n\t\tupdate: null,\n\n\t\trender: null,\n\n\t\tsubTree: null,\n\n\t\tnext: null,\n\n\t\teffect: null,\n\n\t\tisMounted: false,\n\n\t\texposed: null,\n\n\t\tattrsProxy: null,\n\t\texposeProxy: null,\n\n\t\tsetupContext: null,\n\n\t\t// lifecycle\n\t\tbc: null,\n\t\tc: null,\n\t\tbm: null,\n\t\tm: null,\n\t\tbu: null,\n\t\tu: null,\n\t\tum: null,\n\t\tbum: null,\n\t\tda: null,\n\t\ta: null\n\t};\n\n\tinstance.root = parent ? parent.root : instance;\n\tinstance.emit = emit.bind(null, instance);\n\n\treturn instance;\n}\n\nfunction createSetupContext(instance: ComponentInternalInstance) {\n\treturn {\n\t\tslots: instance.slots,\n\t\temit: instance.emit,\n\t\tget attrs() {\n\t\t\t// proxy attrs\n\t\t\treturn getAttrsProxy(instance);\n\t\t},\n\t\texpose: (exposed: Record<string, any>) => {\n\t\t\tinstance.exposed = exposed || {};\n\t\t}\n\t};\n}\n\nexport function isStatefulComponent(instance: ComponentInternalInstance) {\n\treturn instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT;\n}\n\nexport function setupComponent(instance: ComponentInternalInstance) {\n\tconst isStateful = isStatefulComponent(instance);\n\n\tinitProps(instance, instance.vnode.props, isStateful);\n\n\tinitSlots(instance, instance.vnode.children);\n\n\tconst setupResult = isStateful ? setupStatefulComponent(instance) : null;\n\treturn setupResult;\n}\n\nexport function setupStatefulComponent(instance: ComponentInternalInstance) {\n\tconst Component = instance.type;\n\t// vue3 setup\n\tconst { setup } = Component;\n\n\t// \u8BBF\u95EE\u7EC4\u4EF6\u7684props state setupState \u90FD\u662F\u901A\u8FC7\u4EE3\u7406\u7EC4\u4EF6\u5B9E\u4F8B\u6765\u505A\u3002\n\tinstance.proxy = new Proxy(instance, PublicInstanceProxyHandlers);\n\n\tif (setup) {\n\t\t// \u83B7\u53D6setup\u51FD\u6570\u5F62\u53C2\u7684length > 1\uFF0C\u4F20\u5165setupContext\n\t\t// \u6BD4\u5982\u7528\u6237\u4F1A\u8FD9\u6837 setup(props, context)  setup(props, { emit, expose })\n\t\t// \u5F53setup\u53EA\u6709\u4E00\u4E2A\u5F62\u53C2 \u65F6\uFF0C\u53EA\u4F20\u5165props\n\t\tconst setupContext = (instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null);\n\n\t\t// \u5173\u8054\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\n\t\t// \u5728\u751F\u547D\u5468\u671F\u4E2D\u8981\u5173\u8054\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\n\t\tsetCurrentInstance(instance);\n\t\tconst setupResult = callWithErrorHandling(setup, [instance.props, setupContext]);\n\t\t// \u6267\u884C\u5B8C\u7EC4\u4EF6\u7684setup\u4E4B\u540E\uFF0C\u91CD\u7F6E\u5F53\u524D\u5B9E\u4F8B\n\t\tunsetCurrentInstance();\n\t\thandleSetupResult(instance, setupResult);\n\n\t\t// \u5148\u4E0D\u8003\u8651async setup\n\t} else {\n\t\tif (Component.data && isFunction(Component.data)) {\n\t\t\t// \u7B80\u6613\u7684\u652F\u6301\u4E0Bvue2\u5199\u6CD5\n\t\t\t// data() { return {} }\n\t\t\t// props data\u90FD\u662F\u6D45\u4EE3\u7406\u3002\n\t\t\t// \u7ED1\u5B9Athis\u6307\u5411\n\t\t\tinstance.data = shallowReactive(Component.data.call(instance.proxy));\n\t\t}\n\n\t\tfinishComponentSetup(instance);\n\t}\n}\n\n// \u5904\u7406setup \u8FD4\u56DE\u7684\u503C\nexport function handleSetupResult(instance: ComponentInternalInstance, setupResult: unknown) {\n\tif (isFunction(setupResult)) {\n\t\t// setup\u53EF\u4EE5\u8FD4\u56DE\u4E00\u4E2Ah\u51FD\u6570\n\t\t/**\n\t\t * const Com = {\n\t\t * \tsetup() {\n\t\t * \t\treturn () => h('div')\n\t\t * \t}\n\t\t * }\n\t\t */\n\t\tinstance.render = setupResult as InternalRenderFunction;\n\t} else if (isObject(setupResult)) {\n\t\t// setup\u51FD\u6570\u4E5F\u8FD4\u56DE\u7684\u662F\u666E\u901A\u5BF9\u8C61 {}\n\t\t/**\n\t\t * setup() {\n\t\t * \tconst count = ref(0)\n\t\t * \treturn {\n\t\t * \t\tcount\n\t\t * \t}\n\t\t * }\n\t\t */\n\t\t// \u81EA\u52A8\u5BF9ref\u5BF9\u8C61\u8FDB\u884C\u89E3\u5305\uFF0C\u53EF\u4EE5\u518Dtemplate\u4E2D\u4E0D\u7528.value\u53D6\u503C\n\t\tinstance.setupState = proxyRefs(setupResult);\n\t}\n\tfinishComponentSetup(instance);\n}\n\n// \u4E13\u95E8\u5904\u7406render\nexport function finishComponentSetup(instance: ComponentInternalInstance) {\n\t// \u5904\u7406render\n\tif (!instance.render) {\n\t\tconst Component = instance.type;\n\t\t// \u62FF\u5230render\u51FD\u6570\n\t\tinstance.render = (Component.render || NOOP) as InternalRenderFunction;\n\t}\n}\n\nfunction getAttrsProxy(instance: ComponentInternalInstance) {\n\treturn (\n\t\tinstance.attrsProxy ||\n\t\t(instance.attrsProxy = new Proxy(instance.attrs, {\n\t\t\tget: (target, key: string) => {\n\t\t\t\t// \u5F53\u7528\u6237\u8BBF\u95EEattrs\uFF0C\u5C31\u4F1A\u5BF9$attrs\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\t\t\t\ttrack(instance, '$attrs');\n\t\t\t\treturn target[key];\n\t\t\t}\n\t\t}))\n\t);\n}\n\n// \u901A\u8FC7\u5BF9instance.exposed\u4EE3\u7406\uFF0C\u8FD9\u91CC\u5916\u90E8\u5C31\u53EF\u4EE5\u901A\u8FC7\u5BF9 ref \u8FDB\u884C\u8BBF\u95EE\u7EC4\u4EF6\u5B9E\u4F8B\nexport function getExposeProxy(instance: ComponentInternalInstance) {\n\tif (instance.exposed) {\n\t\treturn (\n\t\t\t// expose\u53D6\u503C\uFF0C\u5176\u5B9E\u5C31\u662F\u5BF9exposeProxy\n\t\t\tinstance.exposeProxy ||\n\t\t\t(instance.exposeProxy = new Proxy(instance.exposed, {\n\t\t\t\tget(target, key: string) {\n\t\t\t\t\tif (key in target) {\n\t\t\t\t\t\treturn target[key];\n\t\t\t\t\t} else if (key in publicPropertiesMap) {\n\t\t\t\t\t\t// \u62FF\u5230\u7EC4\u4EF6\u7684ref \u8FD8\u53EF\u4EE5\u5BF9\u7EC4\u4EF6\u7684\u5168\u5C40\u5C5E\u6027\u8FDB\u884C\u53D6\u503C\uFF0C\u6BD4\u5982 componentRef.value.$attrs  \u5C31\u4F1A\u6267\u884C\u5230\u8FD9\u91CC\n\t\t\t\t\t\treturn publicPropertiesMap[key](instance);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}))\n\t\t);\n\t}\n}\n", "import { ReactiveEffect, WatchOptions } from '@vue/reactivity';\nimport { Comment, VNode, VNodeChild, createVNode, normalizeVNode } from './vnode';\nimport { SchedulerJob, nextTick } from './scheduler';\nimport { ShapeFlags } from '@vue/shared';\nimport { LifecycleHooks } from './apiLifecycle';\nimport { LifecycleHook } from './component';\n\nexport type Data = Record<string, any>;\n\nexport type InternalRenderFunction = {\n\t($props: ComponentInternalInstance['props'], $data: ComponentInternalInstance['data']): VNodeChild;\n};\n\n// \u7EC4\u4EF6\u5916\u90E8\u5B9E\u4F8B -> \u7528\u6237\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u7684\u5C5E\u6027\nexport type ComponentPublicInstance<Props = {}, Data = {}> = {\n\t// $\u6307\u5411\u5185\u90E8\u7EC4\u4EF6\u5B9E\u4F8B\n\t$: ComponentInternalInstance;\n\n\t// \u72B6\u6001 props \u76F8\u5173\n\t$props: Props;\n\t$data: Data;\n\t$arrts: Data;\n\t$refs: Data;\n\t$slots: any;\n\n\t$options: Data;\n\n\t// \u5143\u7D20\u76F8\u5173\n\t$el: any;\n\t// root\n\t$root: ComponentPublicInstance;\n\t// \u7236\u5143\u7D20\n\t$parent: ComponentPublicInstance;\n\n\t// watch update emit\n\t$watch: (source: any, cb: () => any, options: WatchOptions) => any;\n\t$emit: () => void;\n\t$forceUpdate: () => void;\n\t$nextTick: typeof nextTick;\n};\n\n// \u7EC4\u4EF6\u5185\u90E8\u5B9E\u4F8B -> \u6846\u67B6\u5F00\u53D1\u7528\nexport interface ComponentInternalInstance {\n\tuid: number;\n\n\t// \u533A\u5206\u7EC4\u4EF6\u7C7B\u578B\u3001\u72B6\u6001\u7EC4\u4EF6 \u8FD8\u662F\u51FD\u6570\u7EC4\u4EF6\n\ttype: any;\n\n\t// \u7236\u7EC4\u4EF6\n\tparent: ComponentInternalInstance | null;\n\t// \u6839\u7EC4\u4EF6\n\troot: ComponentInternalInstance;\n\n\t// state\n\t// \u6700\u5E38\u7528\u7684\u51E0\u4E2A\n\tdata: Data;\n\tprops: Data;\n\tattrs: Data;\n\tslots: any;\n\trefs: Data;\n\n\t// setup\u51FD\u6570\u8FD4\u56DE\u7684\u6570\u636E\n\tsetupState: Data;\n\n\tpropsOptions: Data;\n\n\t// \u7F13\u5B58\n\taccessCache: Data | null;\n\temit: () => void;\n\n\t// \u8BB0\u5F55 .once event \u4E8B\u4EF6\uFF0C\u5F53\u6807\u8BB0\u4E3A.once\u65F6\uFF0C\u53EA\u4F1A\u89E6\u53D1\u4E00\u6B21\n\temitted: Record<string, boolean> | null;\n\n\tsetupContext: any;\n\n\t// \u5176\u5B9E\u5C31\u662F\u5F53\u524D\u7EC4\u4EF6 this\n\tproxy: ComponentPublicInstance | null;\n\n\t// \u7F13\u5B58expose\u629B\u51FA\u7684\u4E8B\u4EF6\n\texposed: Record<string, any> | null;\n\t// expose\u4EE3\u7406\u5BF9\u8C61\n\texposeProxy: Data | null;\n\n\t// ctx: Data;\n\trender: InternalRenderFunction | null;\n\n\t// \u8BBF\u95EEattrs\u5C31\u662F\u8BBF\u95EEattrsProxy\u4EE3\u7406\u5BF9\u8C61\n\tattrsProxy: Data | null;\n\n\t// \u7EC4\u4EF6\u5F3A\u5236\u66F4\u65B0\u7684\u65B9\u6CD5\n\t// \u6267\u884C\u5C31\u662F effect.run \u65B9\u6CD5\n\tupdate: SchedulerJob | null;\n\n\t// \u81EA\u5DF1\u5728\u7236\u7EC4\u4EF6\u7684vnode\n\tvnode: VNode;\n\n\t// \u7EC4\u4EF6\u66F4\u65B0\u65F6\uFF0C\u4FDD\u5B58\u65B0\u7684vnode\n\tnext: VNode | null;\n\n\t// \u81EA\u5DF1\u7684vnode\n\tsubTree: VNode;\n\n\t// \u7EC4\u4EF6\u5C31\u662F\u4E00\u4E2Aeffect\n\teffect: ReactiveEffect;\n\n\tisMounted: boolean;\n\n\t[LifecycleHooks.BEFORE_CREATE]: LifecycleHook;\n\n\t[LifecycleHooks.CREATED]: LifecycleHook;\n\n\t[LifecycleHooks.BEFORE_MOUNT]: LifecycleHook;\n\n\t[LifecycleHooks.MOUNTED]: LifecycleHook;\n\n\t[LifecycleHooks.BEFORE_UPDATE]: LifecycleHook;\n\n\t[LifecycleHooks.UPDATED]: LifecycleHook;\n\n\t[LifecycleHooks.BEFORE_UNMOUNT]: LifecycleHook;\n\n\t[LifecycleHooks.UNMOUNTED]: LifecycleHook;\n\n\t[LifecycleHooks.ACTIVATED]: LifecycleHook;\n\n\t[LifecycleHooks.DEACTIVATED]: LifecycleHook;\n}\n\nexport function renderComponentRoot(instance: ComponentInternalInstance): VNode {\n\tconst { type: Component, vnode, props, data, attrs, slots, setupState, emit, proxy, render } = instance;\n\tconst { shapeFlag } = vnode;\n\t// \u5224\u65AD\u662F\u72B6\u6001\u7EC4\u4EF6\u8FD8\u662F\u51FD\u6570\u7EC4\u4EF6\n\tlet result: VNode;\n\ttry {\n\t\tif (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n\t\t\t// \u6267\u884C\u7EC4\u4EF6\u7684render\u51FD\u6570\uFF0C\u62FF\u5230vnode\uFF0C\n\t\t\t// \u540C\u65F6\u7ED1\u5B9A\u54CD\u5E94\u5F0F\u6570\u636E\uFF0C\u56E0\u4E3A\u5728\u6A21\u677F\u4E2D\u4F1A\u8BBF\u95EEthis\u3001props\u3001state\u7B49\u54CD\u5E94\u5F0F\u6570\u636E\n\t\t\t// render\u51FD\u6570\u8FD4\u56DE\u7684\u5185\u5BB9\u8BBF\u95EE\u4E86\u5C5E\u6027\u7684get\uFF0C \u4F1A\u89E6\u53D1\u4F9D\u8D56\u6536\u96C6\n\t\t\tresult = normalizeVNode(render!.call(proxy, proxy, props, setupState, data));\n\t\t} else if (shapeFlag & ShapeFlags.FUNCTIONAL_COMPONENT) {\n\t\t\t// \u51FD\u6570\u7EC4\u4EF6\n\t\t\tlet render = Component;\n\t\t\tresult = normalizeVNode(render.length > 1 ? render(props, { attrs, slots, emit }) : render(props, null));\n\t\t}\n\t} catch (error) {\n\t\tconsole.log(error);\n\t\t// \u5982\u679C\u9519\u8BEF\uFF0C\u7528\u6CE8\u91CA\u8282\u70B9Comment \u6765\u515C\u5E95\uFF1F\uFF1F\uFF1F\u4E3A\u4EC0\u4E48\n\t\tresult = createVNode(Comment);\n\t}\n\treturn result;\n}\n\nexport function shouldUpdateComponent(prevVNode: VNode, nextVNode: VNode): boolean {\n\tconst { props: prevProps, children: prevChild } = prevVNode;\n\tconst { props: nextProps, children: nextChild } = nextVNode;\n\n\t// children\n\tif (prevChild || nextChild) {\n\t\t// $stable \u7528\u4E8E\u624B\u52A8\u6807\u8BB0\u6539 children \u662F\u5426\u80FD\u88AB\u66F4\u65B0\n\t\t// \u5F53\u4E3Atrue\u65F6\uFF0C\u4F1A\u8DF3\u8FC7\u66F4\u65B0\n\t\tif (!nextChild || !(nextChild as any).$stable) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tif (prevProps === nextProps) {\n\t\treturn false;\n\t}\n\n\t// \u5982\u679C\u6CA1\u6709\u8001\u5C5E\u6027\uFF0C\u76F4\u63A5\u5224\u65AD\u65B0\u5C5E\u6027\n\tif (!prevProps) {\n\t\treturn !!nextProps;\n\t}\n\n\t// \u6CA1\u6709\u65B0\u5C5E\u6027\uFF0C\u5C31\u66F4\u65B0\n\tif (!nextProps) {\n\t\treturn true;\n\t}\n\n\treturn hasPropsChanged(prevProps, nextProps);\n}\n\nexport function hasPropsChanged(prevProps: Data, nextProps: Data): boolean {\n\tconst newKeys = Object.keys(nextProps);\n\tconst oldKeys = Object.keys(prevProps);\n\t// \u5F53\u65B0\u8001\u5C5E\u6027\u7684key\u90FD\u4E0D\u4E00\u6837\uFF0C\u4E00\u5B9A\u662Ftrue\n\tif (newKeys.length !== oldKeys.length) {\n\t\treturn true;\n\t}\n\n\t// \u5F53\u65B0\u8001props\u5C5E\u6027\u6570\u91CF\u4E00\u81F4\u65F6\uFF0C\u5C31\u6BD4\u8F83\u5BF9\u5E94\u7684value\n\tfor (let i = 0; i < newKeys.length; i++) {\n\t\tconst key = newKeys[i];\n\t\tif (prevProps[key] !== nextProps[key]) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n", "import { ShapeFlags, isArray } from '@vue/shared';\nimport { isRef } from '@vue/reactivity';\nimport { VNode, VNodeRef } from './vnode';\nimport { getExposeProxy } from './component';\nimport { queueJob } from './scheduler';\n\nexport function setRef(rawRef: VNodeRef | VNodeRef[], oldRawRef: VNodeRef | VNodeRef[], vnode: VNode) {\n\tif (isArray(rawRef)) {\n\t\trawRef.forEach((r, i) => setRef(r, oldRawRef && (isArray(oldRawRef) ? oldRawRef[i] : oldRawRef), vnode));\n\t\treturn;\n\t}\n\n\t// 1: \u5982\u679C\u7EC4\u4EF6\u6267\u884C\u4E86expose\u51FD\u6570\uFF0C\u6B64\u65F6\u7684ref\u5C31\u662Fexpose\u7684\u4EE3\u7406\u5BF9\u8C61\n\t// 2: \u5982\u679C\u7EC4\u4EF6\u6CA1\u6709\u6267\u884Cexpose\u51FD\u6570\uFF0C\u90A3\u4E48\u4E5F\u53EF\u62FF\u5230\u7EC4\u4EF6\u5B9E\u4F8B\uFF0Cproxy\u5BF9\u8C61\u5C31\u662F\u5BF9\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u4EE3\u7406\n\tconst value =\n\t\tvnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT\n\t\t\t? getExposeProxy(vnode.component) || vnode.component.proxy\n\t\t\t: vnode.el;\n\n\tconst _isRef = isRef(rawRef);\n\n\tconst doSet = () => {\n\t\tif (_isRef) {\n\t\t\t// \u5904\u7406\u901A\u8FC7ref \u5C5E\u6027 \u62FF\u5230\u5B50\u7EC4\u4EF6\u7684\u5B9E\u4F8B\u5F15\u7528\n\t\t\trawRef.value = value;\n\t\t}\n\t};\n\n\tif (value) {\n\t\tqueueJob(doSet);\n\t}\n}\n", "import {\n\tData,\n\tVNode,\n\tVNodeArrayChildren,\n\tVNodeProps,\n\tisSameVNodeType,\n\tnormalizeVNode,\n\tText,\n\tComment,\n\tFragment\n} from '@vue/runtime-core';\nimport { EMPTY_OBJ, ShapeFlags, invokeArrayFns, isReservedProp } from '@vue/shared';\nimport { createComponentInstance, setupComponent } from './component';\nimport { ComponentInternalInstance, renderComponentRoot, shouldUpdateComponent } from './componentRenderUtils';\nimport { ReactiveEffect } from '@vue/reactivity';\nimport { SchedulerJob, queueJob } from './scheduler';\nimport { updateProps } from './componentProps';\nimport { updateSlots } from './componentSlots';\nimport { setRef } from './rendererTemplateRef';\nimport { TeleportImpl, TeleportVNode } from './components/Teleport';\n\nexport interface RendererInternals<HostNode = RendererNode, HostElement = RendererElement> {\n\tp: PatchFn;\n\tum: UnmountFn;\n\tr: RemoveFn;\n\tm: MoveFn;\n\tmt: MountComponentFn;\n\tmc: MountChildrenFn;\n\tpc: PatchChildrenFn;\n\tn: NextFn;\n\to: RendererOptions<HostNode, HostElement>;\n}\n\nexport interface Renderer<HostElement = RendererElement> {\n\trender: RootRenderFunction<HostElement>;\n}\n\n// \u589E\u5220\u6539\u67E5\nexport interface RendererOptions<HostNode = RendererNode, HostElement = RendererElement> {\n\tpatchProp(el: RendererElement, key: string, preValue: any, nextValue: any): void;\n\t/**\n\t * \u63D2\u5165 (\u589E\u52A0\u3001\u79FB\u52A8)\n\t * @param el \u5B50\u8282\u70B9\n\t * @param parent \u7236\u5143\u7D20\n\t * @param anchor \u63CF\u70B9 \u8282\u70B9\n\t */\n\tinsert(el: HostNode, parent: HostElement, anchor?: HostNode | null): void;\n\t/**\n\t * \u5220\u9664\n\t * @param el \u5B50\u8282\u70B9\n\t */\n\tremove(el: HostNode): void;\n\t/**\n\t * \u65B0\u589E\u4E00\u4E2A\u8282\u70B9\n\t * @param tagName tageName\n\t * @param props \u5C5E\u6027\n\t */\n\tcreateElement(tagName: string, props?: VNodeProps): HostElement;\n\n\t/**\n\t * \u521B\u5EFA\u6587\u672CNode\n\t * @param text \u6587\u672C\u5185\u5BB9\n\t */\n\tcreateText(text: string): Text;\n\n\t/**\n\t * \u8BBE\u7F6E\u8282\u70B9\u5185\u5BB9\n\t * @param el \u8282\u70B9\n\t * @param text \u6587\u672C\u5185\u5BB9\n\t */\n\tsetText(el: HostNode, text: string): void;\n\n\t/**\n\t * \u8BBE\u7F6E\u5143\u7D20\u7684textContent\n\t * @param el\n\t * @param text\n\t */\n\tsetElementText(el: HostElement, text: string): void;\n\n\t/**\n\t * \u6CE8\u91CA\u8282\u70B9\n\t * @param data \u6CE8\u91CA\u5185\u5BB9\n\t */\n\tcreateComment(data: string): Comment;\n\n\t/**\n\t * \u83B7\u53D6\u7236\u8282\u70B9\n\t * @param node \u5B50\u8282\u70B9\n\t */\n\tparentNode(child: HostNode): HostElement;\n\n\t/**\n\t * \u83B7\u53D6\u5144\u5F1F\u8282\u70B9\n\t * @param node\n\t */\n\tnextSibling(node: HostNode): HostNode;\n\n\tquertSelector(selector: string): HostElement;\n}\n\nexport interface RendererNode {\n\t[key: string]: any;\n}\n\nexport interface RendererElement extends RendererNode {}\n\nexport type RootRenderFunction<HostElement = RendererElement> = (vnode: VNode | null, container: HostElement) => void;\n\n/**\n * n1 \u6807\u8BC6\u5DF2\u7ECF\u8001\u8282\u70B9\uFF0Cn2\u6807\u8BC6\u65B0\u8282\u70B9  container\u6807\u8BC6\u6E32\u67D3\u8DDF\u5143\u7D20\n */\ntype PatchFn = (\n\tn1: VNode | null,\n\tn2: VNode,\n\tcontainer: RendererElement,\n\tanchor?: RendererNode | null,\n\tparentComponent?: ComponentInternalInstance | null\n) => void;\n\ntype NextFn = (vnode: VNode) => RendererNode;\n\ntype ProcessTextFn = (n1: VNode | null, n2: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\ntype ProcessCommentFn = (n1: VNode | null, n2: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\ntype ProcessElementFn = (\n\tn1: VNode | null,\n\tn2: VNode,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null,\n\tparentComponent?: ComponentInternalInstance | null\n) => void;\n\ntype ProcessComponentFn = (\n\tn1: VNode | null,\n\tn2: VNode,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null,\n\tparentComponent?: ComponentInternalInstance | null\n) => void;\n\ntype MountElementFn = (\n\tvnode: VNode,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null,\n\tparentComponent: ComponentInternalInstance | null\n) => void;\n\ntype PatchElementFn = (n1: VNode | null, n2: VNode, parentComponent: ComponentInternalInstance | null) => void;\n\ntype UnmountFn = (vnode: VNode) => void;\n\ntype RemoveFn = (vnode: VNode) => void;\n\ntype PatchPropsFn = (el: RendererElement, oldProps: Data, newProps: Data) => void;\n\ntype PatchChildrenFn = (\n\tn1: VNode | null,\n\tn2: VNode,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null,\n\tparentComponent: ComponentInternalInstance | null\n) => void;\n\ntype UnmountChildrenFn = (children: VNode[]) => void;\n\ntype MountChildrenFn = (\n\tchildren: VNodeArrayChildren,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null,\n\tparentComponent: ComponentInternalInstance | null,\n\tstart?: number\n) => void;\n\nexport type SetupRenderEffectFn = (\n\tinstance: ComponentInternalInstance,\n\tinitialVNode: VNode,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null\n) => void;\n\nexport type MountComponentFn = (\n\tinitialVNode: VNode,\n\tcontainer: RendererElement,\n\tanchor: RendererNode | null,\n\tparentComponent: ComponentInternalInstance\n) => void;\n\nexport type MoveFn = (vnode: VNode, container: RendererElement, anchor: RendererNode | null) => void;\n\nexport function createRenderer(options: RendererOptions) {\n\treturn baseCreateRenderer(options);\n}\n\nfunction baseCreateRenderer(options: RendererOptions) {\n\tconst {\n\t\tinsert: hostInsert,\n\t\tremove: hostRemove,\n\t\tpatchProp: hostPatchProp,\n\t\tcreateElement: hostCreateElement,\n\t\tcreateText: hostCreateText,\n\t\tcreateComment: hostCreateComment,\n\t\tsetText: hostSetText,\n\t\tsetElementText: hostSetElementText,\n\t\tparentNode: hostParentNode,\n\t\tnextSibling: hostNextSibling\n\t} = options;\n\n\t// \u6302\u8F7D\u5B50\u5143\u7D20\n\t// \u9012\u5F52\u5904\u7406children\n\t// eg. h('div', props, [h('span', props)])\n\tconst mountChildren: MountChildrenFn = (children, el, anchor, parentComponent, start = 0) => {\n\t\tfor (let i = start; i < children.length; i++) {\n\t\t\t// \u8FD9\u91CC\u7684child\u53EF\u80FD\u662F\u666E\u901A\u6587\u672C(string, number)\uFF0C\u4E5F\u53EF\u80FD\u662Fvnode\uFF0C\u4E5F\u53EF\u80FD\u662F [h('span'), h('div')]\n\t\t\tconst child = normalizeVNode(children[i]);\n\t\t\t// \u9012\u5F52\u5904\u7406\u6BCF\u4E2A\u5B50\u5143\u7D20\n\t\t\tpatch(null, child, el, anchor, parentComponent);\n\t\t}\n\t};\n\n\t// \u5378\u8F7D\u6240\u6709\u5B50\u5143\u7D20\n\tconst unmountChildren: UnmountChildrenFn = childrens => {\n\t\tfor (let i = 0; i < childrens.length; i++) {\n\t\t\tunmount(childrens[i]);\n\t\t}\n\t};\n\n\tfunction patchKeyedChildren(\n\t\tc1: VNode[],\n\t\tc2: VNodeArrayChildren,\n\t\tcontainer: RendererElement,\n\t\tparentComponent: ComponentInternalInstance | null\n\t) {\n\t\tlet i = 0;\n\t\t// \u6700\u5927\u957F\u5EA6\n\t\tconst l1 = c1.length;\n\t\tconst l2 = c2.length;\n\n\t\tlet e1 = l1 - 1; // \u8001\u7684\u6700\u540E\u4E00\u4E2A\n\t\tlet e2 = l2 - 1; // \u65B0\u503C\u6700\u540E\u4E00\u4E2A\n\n\t\t// ------- \u5F00\u59CB\u90E8\u5206\u76F8\u540C\u7684vnode \u6BD4\u8F83\n\n\t\t// 1\uFF1A \u4ECE\u5934\u5F00\u59CB\u67E5\u627E\n\n\t\t// a b c\n\t\t// a b c d\n\n\t\t// \u5F53\u8FBE\u5230 \u8001\u503C \u6216\u8005 \u65B0\u503C \u4EFB\u4F55\u4E00\u4E2A \u5C31\u7ED3\u675F\u5FAA\u73AF\n\t\twhile (i <= e1 && i <= e2) {\n\t\t\tconst n1 = c1[i];\n\t\t\t// n2 copy\u4E00\u4E0B\uFF0C\u907F\u514D\u76F4\u63A5\u4FEE\u6539\u7528\u6237\u4F20\u5165\u7684\u65B0\u503C\n\t\t\tconst n2 = normalizeVNode(c2[i]);\n\n\t\t\tif (isSameVNodeType(n1, n2)) {\n\t\t\t\t// \u8868\u793A\u662F\u540C\u4E00\u4E2A\u8282\u70B9\uFF0C\u9012\u5F52\u5904\u7406, \u6BD4\u8F83\u5185\u90E8\n\t\t\t\tpatch(n1, n2, container, null, parentComponent);\n\t\t\t} else {\n\t\t\t\t// \u5F53\u9047\u5230\u4E0D\u540C\u7684\u8282\u70B9\u65F6\uFF0C\u7ED3\u675F\u5FAA\u73AF\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\n\t\t// ------- \u7ED3\u5C3E\u90E8\u5206\u76F8\u540C\u7684vnode \u6BD4\u8F83\n\n\t\t// 2\uFF1A\u4ECE\u540E\u9762\u5F00\u59CB\u67E5\u627E\n\n\t\t//     b c\n\t\t// a f b c\n\n\t\twhile (i <= e1 && i <= e2) {\n\t\t\tconst n1 = c1[e1];\n\t\t\t// n2 copy\u4E00\u4E0B\uFF0C\u907F\u514D\u76F4\u63A5\u4FEE\u6539\u7528\u6237\u4F20\u5165\u7684\u65B0\u503C\n\t\t\tconst n2 = normalizeVNode(c2[e2]);\n\t\t\tif (isSameVNodeType(n1, n2)) {\n\t\t\t\tpatch(n1, n2, container, null, parentComponent);\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// \u8FD9\u79CD\u60C5\u51B5\u4E0B \u5FAA\u73AF\u56E0\u5B50 i \u4E0D\u53D8\n\t\t\t// \u8001\u503C \u65B0\u503C \u540C\u65F6\u5F80\u524D\u63A8\u8FDB\n\t\t\te1--;\n\t\t\te2--;\n\t\t}\n\n\t\t// \u516C\u5171\u5E8F\u5217 \u5143\u7D20\u7684\u6302\u8F7D\n\t\t//  a b c\n\t\t//  a b c d\n\t\t//  i = 3; e1 = 2; e2 = 3;\n\n\t\t//      a c\n\t\t//  f e a c\n\t\t// i = 0; e1 = -1; e2 = 1;\n\n\t\t// \u6302\u8F7D\u65B0\u503C\u8981\u6EE1\u8DB3\u4E00\u4E0B\u6761\u4EF6\uFF1A\n\t\t// 1\uFF1A\u65B0\u503C\u4E00\u5B9A\u6BD4\u8001\u503C\u957F\uFF0C\u53EF\u4EE5\u7528 i \u6765\u5224\u65AD\uFF0C \u6B64\u65F6 i \u4E00\u5B9A\u662F\u5927\u4E8E \u8001\u503C e1\u7684\u957F\u5EA6\n\t\t// 2\uFF1A\u5FAA\u73AF\u56E0\u5B50 i \u8981\u5728\u65B0\u503C\u7684\u8303\u56F4\u5185\n\n\t\tif (i > e1) {\n\t\t\tif (i <= e2) {\n\t\t\t\t//  \u6302\u8F7D\u65B0\u503C\n\t\t\t\t// \u600E\u4E48\u83B7\u53D6\u63D2\u5165\u63CF\u70B9\uFF1F\n\t\t\t\t// 1\uFF1A\u5148\u83B7\u53D6\u4E0B\u4E00\u4E2A\u5143\u7D20\n\t\t\t\t// 2\uFF1A\u5982\u679C\u4E0B\u4E00\u4E2A\u5143\u7D20 \u4ECD\u7136\u5C0F\u4E8E\u65B0\u503C\u7684\u6700\u5927\u957F\u5EA6\uFF0C\u8BF4\u660E\u662F\u5411\u524D\u63D2\u5165\uFF0C\u5426\u5219\u5C31\u662F\u5411\u540E\u63D2\u5165\uFF0C\u5411\u540E\u63D2\u5165\u76F4\u63A5\u4F20null\u5373\u53EF\n\t\t\t\tconst nextPos = e2 + 1;\n\t\t\t\tconst anchor = nextPos < l2 ? (c2[nextPos] as VNode).el : null;\n\t\t\t\twhile (i <= e2) {\n\t\t\t\t\tpatch(null, normalizeVNode(c2[i]), container, anchor, parentComponent);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// \u516C\u5171\u5E8F\u5217 \u5143\u7D20\u7684\u5378\u8F7D\n\n\t\t//  a b c\n\t\t//  a b\n\t\t//  i = 2; e1 = 2; e2 = 1;\n\n\t\t//  a b c d\n\t\t//      c d\n\t\t//  i = 0; e1 = 1; e2 = -1;\n\n\t\t// \u6EE1\u8DB3\u8FD9\u4E2A\u6761\u4EF6\uFF1A\n\t\t// 1: \u65B0\u503C\u6BD4\u8001\u503C \u77ED \u53EF\u4EE5\u7528 i \u6765\u5224\u65AD , \u6B64\u65F6 i \u5927\u4E8E\u65B0\u503C\u7684\u957F\u5EA6\uFF0C\u5C0F\u4E8E\u8001\u503C\u7684\u957F\u5EA6\n\t\t// 2: \u5FAA\u73AF\u56E0\u5B50 i \u8981\u5728\u65B0\u503C\u7684\u8303\u56F4\u5185\n\t\telse if (i > e2) {\n\t\t\tif (i <= e1) {\n\t\t\t\twhile (i <= e1) {\n\t\t\t\t\tunmount(c1[i]);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// ------- \u4E24\u7AEF\u76F8\u540C\uFF0C\u4E2D\u95F4\u90E8\u4F4D\u4E0D\u540C\u7684vnode \u6BD4\u8F83\n\n\t\t\t//  a b [c d e] f g\n\t\t\t//  a b [e d c h] f g\n\t\t\t// \u4E2D\u95F4\u7684\u4E0D\u540C\n\t\t\t//  i = 2; e1 = 4; e2 = 5;\n\n\t\t\t// \u6B65\u9AA4\uFF1A\n\t\t\t// 1\uFF1A \u7B2C\u4E00\u4E2A\u5148\u904D\u5386\u65B0\u5E8F\u5217\uFF0C\u83B7\u53D6\u5230keyToNewIndexMap\n\t\t\t// 2\uFF1A \u904D\u5386\u8001\u5E8F\u5217\u4ECEkeyToNewIndexMap\u4E2D\u67E5\u627E\u662F\u5426\u6709\u65B0\u5E8F\u5217\u7684\u503C\uFF0C\u5B58\u5728\u5C31\u590D\u7528\uFF0C\u4E0D\u5B58\u5728\u5C31\u5220\u9664\n\n\t\t\tconst s1 = i; // \u8001\u7684 i \u6BD4\u8F83\u7684\u4F4D\u7F6E\n\t\t\tconst s2 = i; // \u65B0\u7684 i \u6BD4\u8F83\u7684\u4F4D\u7F6E\n\n\t\t\t// \u5B58\u50A8\u65B0\u503C\u7684 \u6620\u5C04\uFF0Ckey\u662F vnode\u7684key, value\u662F index\n\t\t\t// {vnode.key: index}\n\t\t\tconst keyToNewIndexMap: Map<string | number | symbol, number> = new Map();\n\n\t\t\t// \u65B0\u5E8F\u5217\u7684\u5FAA\u73AF\n\t\t\tfor (i = s2; i <= e2; i++) {\n\t\t\t\tconst nextChild = (c2[i] = normalizeVNode(c2[i]));\n\n\t\t\t\tif (nextChild.key !== null) {\n\t\t\t\t\tkeyToNewIndexMap.set(nextChild.key, i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \u8001\u5E8F\u5217\u5FAA\u73AF\n\t\t\tfor (i = s1; i <= e1; i++) {\n\t\t\t\tconst prevChild = c1[i];\n\t\t\t\t// \u4ECE\u6620\u5C04\u8868\u4E2D\u67E5\u627E\u662F\u5426\u6709 \u5728 \u8001\u7684\u5E8F\u5217\u4E2D \u6709\u65B0\u5E8F\u5217\u7684\u503C\n\t\t\t\tconst newIndex = keyToNewIndexMap.get(prevChild.key);\n\n\t\t\t\t// \u4E0D\u5B58\u5728: \u8BF4\u660E\u65B0\u7684\u91CC\u9762\u6CA1\u6709\uFF0C\u5C31\u8981\u5220\u9664\u8BE5vnode\n\t\t\t\tif (newIndex === undefined) {\n\t\t\t\t\tunmount(prevChild);\n\t\t\t\t} else {\n\t\t\t\t\t// \u5B58\u5728\u5C31\u590D\u7528\u8BE5vnode, \u8FDB\u884Cpatch\n\t\t\t\t\tpatch(prevChild, c2[newIndex] as VNode, container, parentComponent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: \u65B0\u5143\u7D20\u7684\u79FB\u52A8\u3001\u63D2\u5165\n\n\t\t\t//  a b [c d e] f g\n\t\t\t//  a b [e d c h] f g\n\n\t\t\tlet patched = 0;\n\t\t\t// \u5C06\u8981\u88ABpatch\u7684\u5143\u7D20\u957F\u5EA6\uFF1A\u5C31\u662F\u4ECEe -> h\n\t\t\tconst toBePatched = e2 - s2 + 1;\n\n\t\t\t// \u8BB0\u5F55\u88AB\u65B0\u5143\u7D20 \u5BF9\u5E94\u8001\u5143\u7D20 \u7684\u4F4D\u7F6E\uFF0C\u9ED8\u8BA4\u521D\u59CB\u5316\u4E3A0\n\t\t\tconst newIndexToOldIndexMap = new Array(toBePatched).fill(0);\n\n\t\t\t// \u5FAA\u73AF\u8001\u5143\u7D20\u5E8F\u5217\n\t\t\tfor (i = s1; i <= e1; i++) {\n\t\t\t\t// \u83B7\u53D6vnode\n\t\t\t\tconst prevChild = c1[i];\n\t\t\t\t// \u65B0\u5143\u7D20\u6BD4\u8001\u5143\u7D20\u5C11\n\n\t\t\t\t//  a b [c d e] f g\n\t\t\t\t//  a b f g\n\t\t\t\tif (patched >= toBePatched) {\n\t\t\t\t\tunmount(prevChild);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * \u603B\u4F53\u6765\u8BF4\u662F\u5B50\u5143\u7D20\u67093\u79CD\u60C5\u51B5\uFF1A\u6587\u672C \u6570\u7EC4 \u7A7A\n\t * \u4E0B\u9762\u53EF\u4EE5\u7EC6\u52069\u79CD\u573A\u666F\n\t * \u6BD4\u5BF9\u5B50\u5143\u7D20\uFF1A \u6709\u4EE5\u4E0B\u51E0\u79CD\u60C5\u51B5\uFF1A\n\t *       \u65B0           \u65E7          diff\n\t * 1:   \u6587\u672C          \u6570\u7EC4        \u5220\u9664\u65E7\u5B50\u5143\u7D20\uFF0C\u8BBE\u7F6E\u65B0\u7684\u6587\u672C\u5185\u5BB9\n\t * 2:   \u6587\u672C          \u6587\u672C        \u66F4\u65B0\u6587\u672C\n\t * 3:   \u6587\u672C          \u7A7A          \u66F4\u65B0\u6587\u672C\n\t * 4:   \u6570\u7EC4          \u6570\u7EC4        diff\n\t * 5:   \u6570\u7EC4          \u6587\u672C        \u6E05\u7A7A\u6587\u672C\uFF0C\u6E32\u67D3\u65B0\u7684\u6570\u7EC4children\n\t * 6:   \u6570\u7EC4          \u7A7A          \u76F4\u63A5\u6E32\u67D3\u6570\u7EC4children\n\t * 7:  \t\u7A7A            \u6570\u7EC4        \u5220\u9664\u6240\u6709\u5B50\u5143\u7D20\n\t * 8:   \u7A7A           \u6587\u672C         \u6E05\u7A7A\u6587\u672C\n\t * 9:   \u7A7A            \u7A7A          \u5FFD\u7565 \u4E0D\u5904\u7406\n\t */\n\tconst patchChildren: PatchChildrenFn = (n1, n2, container, anchor, parentComponent) => {\n\t\t// \u8001\u7684\u5B50\u5143\u7D20\n\t\tconst c1 = n1.children;\n\t\tconst prevShapFlags = n1 ? n1.shapeFlag : 0;\n\n\t\t// \u65B0\u7684\u5B50\u5143\u7D20\n\t\tconst c2 = n2.children;\n\n\t\tconst { shapeFlag } = n2;\n\n\t\t// \u5982\u679C\u65B0children\u662F\u6587\u672C -> \u5BF9\u5E94\u524D\u4E09\u79CD\u60C5\u51B5\n\t\tif (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n\t\t\t// \u8001\u503C\u662F\u6570\u7EC4 -> \u5BF9\u5E94\u7B2C1\u79CD\u60C5\u51B5\n\t\t\tif (prevShapFlags & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t\t// \u5220\u9664\u65E7\u7684\u5B50\u5143\u7D20\uFF0C\u8BBE\u7F6E\u65B0\u7684\u6587\u672C\u5185\u5BB9\n\t\t\t\tunmountChildren(c1 as VNode[]);\n\t\t\t}\n\n\t\t\t// \u7B2C\u4E00\u79CD\u60C5\u51B5\uFF0C\u65E7\u503C\u5DF2\u7ECF\u88AB\u5220\u9664\u5B50\u8282\u70B9\u4E86\uFF0C\u5269\u4E0B2\u30013\u76F4\u63A5\u66FF\u6362\u66F4\u65B0\u5373\u53EF\n\t\t\tif (c1 !== c2) {\n\t\t\t\thostSetElementText(container, c2 as string);\n\t\t\t}\n\t\t} else {\n\t\t\t// \u5BF9\u5E94\u540E\u9762\u51E0\u79CD\u60C5\u51B5: \u65B0\u503C\u662F\uFF1A \u6570\u7EC4\uFF0C \u7A7A\n\t\t\tif (prevShapFlags & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t\tif (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t\t\t// \u65B0\u8001\u503C \u90FD\u662F \u6570\u7EC4 -> \u5BF9\u5E94\u7B2C4\u79CD\u60C5\u51B5\n\t\t\t\t\t// \u91CD\u70B9\uFF1A \u5168\u91CF diff\n\t\t\t\t\t// \u8FD9\u91CC\u662F\u60C5\u51B5\u6700\u590D\u6742\u7684\uFF0C\u4E5F\u662F\u6700\u559C\u6B22\u95EE\u8003\u70B9\u7684\uFF1A\n\t\t\t\t\t// 1\uFF1A\u4E3A\u5565\u5FAA\u73AF\u8981\u6307\u5B9Akey\n\t\t\t\t\tpatchKeyedChildren(c1 as VNode[], c2 as VNodeArrayChildren, container, parentComponent);\n\t\t\t\t} else {\n\t\t\t\t\t// \u8FD9\u4E2A\u5206\u652F\u5BF9\u5E94\u7B2C7\u79CD\u60C5\u51B5\uFF0C\u56E0\u4E3A\u7B2C1\u79CD\u60C5\u51B5\u8D70\u4E86\u4E0A\u9762\u7684if\u5206\u652F\n\t\t\t\t\t// \u65B0\u503C\u662F\u7A7A\u7684\uFF0C\u76F4\u63A5\u5378\u8F7D\u8001\u503C\n\t\t\t\t\tunmountChildren(c1 as VNode[]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// \u8FD9\u4E2A\u52062\u79CD\u60C5\u51B5\uFF1A\u65E7\u503C\u662F\u7A7A\uFF08\u5BF9\u5E94\u7684\u65B0\u503C\u662F\u6587\u672C\u6216\u8005\u662F\u6570\u7EC4\uFF09-> \u5982\u679C\u65B0\u503C\u662F\u6587\u672C\uFF0C\u4F1A\u8D70\u8FDB\u4E00\u4E2Aif\u5224\u65AD\uFF1B \u65B0\u503C\u662F\u6570\u7EC4\uFF0C\u6302\u8F7D\u65B0\u7684\u5143\u7D20\n\t\t\t\t// \u6216\u8005\u65E7\u503C\u662F\u6587\u672C\uFF08\u5BF9\u5E94\u7684\u65B0\u503C\u6587\u672C\u6216\u8005\u662F\u6570\u7EC4\uFF09-> \u5378\u8F7D \u65E7\u7684\u6587\u672C\u5185\u5BB9\uFF0C\u6302\u8F7D\u65B0\u7684\u5143\u7D20\n\n\t\t\t\t// \u5378\u8F7D\u65E7\u7684\u6587\u672C\u5185\u5BB9\n\t\t\t\tif (prevShapFlags & ShapeFlags.TEXT_CHILDREN) {\n\t\t\t\t\t// \u8BBE\u7F6E\u7A7A\u6570\u636E\u5C31\u884C\n\t\t\t\t\thostSetElementText(container, '');\n\t\t\t\t}\n\n\t\t\t\tif (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t\t\t// \u6302\u8F7D\u65B0\u7684\u5143\u7D20\n\t\t\t\t\tmountChildren(c2 as VNodeArrayChildren, container, anchor, parentComponent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// \u521D\u6B21\u6E32\u67D3\n\tconst mountElement: MountElementFn = (vnode, container, anchor, parentComponent) => {\n\t\t// \u771F\u5B9E\u8282\u70B9\n\t\tlet el: RendererElement;\n\n\t\tconst { type, shapeFlag, props, children } = vnode;\n\t\t// type ->  div  span .... \u666E\u901A\u5143\u7D20\n\t\tel = vnode.el = hostCreateElement(type as string);\n\n\t\tif (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n\t\t\t// eg. h('div', props, 'xxx')\n\t\t\thostSetElementText(el, children as string);\n\t\t} else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n\t\t\t// eg. h('div', props, [h('span', props)])\n\t\t\t// h('div', props, ['xxx', 'ccccc'])\n\t\t\tmountChildren(children as VNodeArrayChildren[], el, parentComponent, null);\n\t\t}\n\n\t\t// \u5904\u7406props\n\t\tif (props) {\n\t\t\tfor (const key in props) {\n\t\t\t\tif (!isReservedProp(key)) {\n\t\t\t\t\thostPatchProp(el, key, null, props[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// \u5728container\u4E0A\u63D2\u5165\u6539\u771F\u5B9E\u8282\u70B9\n\t\thostInsert(el, container, anchor);\n\t};\n\n\t// \u5168\u91CFdiff props\n\t// full diff props\n\tconst patchProps: PatchPropsFn = (el, oldProps, newProps) => {\n\t\t// \u4E0D\u76F8\u7B49\n\t\tif (oldProps !== newProps) {\n\t\t\t// \u8001\u503C\u5B58\u5728\n\t\t\tif (oldProps !== EMPTY_OBJ) {\n\t\t\t\tfor (const key in oldProps) {\n\t\t\t\t\t// \u5224\u65AD\u662F\u5426\u5B58\u5728vue\u4FDD\u7559\u7684key, \u5728\u65B0\u7684props\u4E2D\u4E5F\u4E0D\u5B58\u5728\uFF0C\u9700\u8981\u4FDD\u7559\n\t\t\t\t\tif (!isReservedProp(key) && !(key in newProps)) {\n\t\t\t\t\t\thostPatchProp(el, key, oldProps[key], null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// \u5B58\u5728\u65B0\u503C\n\t\t\t\tfor (const key in newProps) {\n\t\t\t\t\t// \u5B58\u5728vue\u4FDD\u7559\u7684key\uFF0C \u8DF3\u8FC7\u672C\u6B21\u5FAA\u73AF\uFF0C \u628Apatch\u5EF6\u8FDF\u5728\u6700\u540E\u6267\u884C\uFF0C\u63D0\u5347patch\u6548\u7387\n\t\t\t\t\tif (isReservedProp(key)) continue;\n\t\t\t\t\tconst prev = oldProps[key];\n\t\t\t\t\tconst next = newProps[key];\n\t\t\t\t\t// \u5254\u9664 :value=\"\" v-model:value=\"\"\n\t\t\t\t\tif (prev !== next && key !== 'value') {\n\t\t\t\t\t\thostPatchProp(el, key, prev, next);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// next: {value: ''}  old: {value: ''}\n\t\t\t\tif ('value' in newProps) {\n\t\t\t\t\thostPatchProp(el, 'value', oldProps.value, newProps.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// diff\n\tconst patchElement: PatchElementFn = (n1, n2, parentComponent) => {\n\t\t// \u5C06\u8001\u7684el\u66FF\u6362\u6210\u65B0\u7684el\n\t\tconst el = (n2.el = n1.el);\n\t\tconst oldProps = n1.props || EMPTY_OBJ;\n\t\tconst newProps = n2.props || EMPTY_OBJ;\n\n\t\t// 1: children\n\t\tpatchChildren(n1, n2, el, null, parentComponent);\n\n\t\t// 2: props\n\t\t// TODO: \u8FD9\u91CC\u53EF\u4EE5\u6839\u636E \u7F16\u8BD1\u9636\u6BB5 \u8BBE\u7F6E patchFlag \u6765\u5224\u65AD\u662F\u66F4\u65B0class style props\u3001\u52A8\u6001props\n\t\t// \u8FD9\u91CC\u5148\u5168\u91CFdiff props, \u540E\u7EED\u7F16\u8BD1\u9636\u6BB5\u53EF\u4EE5\u7ED3\u5408\u8D77\u6765 \u5224\u65AD patchFlag\n\t\tpatchProps(el, oldProps, newProps);\n\t};\n\n\tconst processElement: ProcessElementFn = (n1, n2, container, anchor, parentComponent) => {\n\t\tif (n1 == null) {\n\t\t\t// \u521D\u6B21\u6E32\u67D3\n\t\t\tmountElement(n2, container, anchor, parentComponent);\n\t\t} else {\n\t\t\t// diff\n\t\t\tpatchElement(n1, n2, parentComponent);\n\t\t}\n\t};\n\n\tconst processText: ProcessTextFn = (n1, n2, el, anchor) => {\n\t\tif (n1 === null) {\n\t\t\t// \u6302\u8F7D\n\t\t\thostInsert((n2.el = hostCreateText((n2.children || '') as string)), el, anchor);\n\t\t} else {\n\t\t\t// \u66F4\u65B0\n\t\t\tconst el = (n2.el = n1.el);\n\t\t\tif (n2.children !== n1.children) {\n\t\t\t\thostSetText(el, n2.children as string);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst processComment: ProcessCommentFn = (n1, n2, container, anchor) => {\n\t\tif (n1 === null) {\n\t\t\thostInsert((n2.el = hostCreateComment((n2.children as string) || '')), container, anchor);\n\t\t} else {\n\t\t\tn2.el = n1.el;\n\t\t\t// \u4E0D\u652F\u6301\u52A8\u6001 \u6CE8\u91CA\u8282\u70B9\n\t\t}\n\t};\n\n\tconst processFragment = (\n\t\tn1: VNode | null,\n\t\tn2: VNode,\n\t\tcontainer: RendererElement,\n\t\tanchor: RendererNode | null,\n\t\tparentComponent: ComponentInternalInstance | null\n\t) => {\n\t\t// \u5982\u679C\u662F\u7B2C\u4E00\u6B21\u6E32\u67D3\uFF0Cn2.el \u9ED8\u8BA4\u662F\u521B\u5EFA\u4E00\u4E2Atext\u6587\u672C\n\t\t// patch\u66F4\u65B0\u65F6\uFF1An2.el = n1\n\t\tconst fragmentStartAnchor = (n2.el = n1 ? n1.el : hostCreateText(''))!;\n\t\tconst fragmentEndAnchor = (n2.anchor = n1 ? n1.anchor : hostCreateText(''))!;\n\t\tif (n1 === null) {\n\t\t\t// \u7236\u5143\u7D20\u9ED8\u8BA4\u662F\u7A7A\u6587\u672C\n\t\t\thostInsert(fragmentStartAnchor, container, anchor);\n\t\t\thostInsert(fragmentEndAnchor, container, anchor);\n\n\t\t\t// fragmnet \u5B50\u5143\u7D20\u5FC5\u987B\u662Fchildren\n\t\t\tmountChildren(n2.children as VNodeArrayChildren, container, fragmentEndAnchor, parentComponent);\n\t\t} else {\n\t\t\t// patch\n\t\t\tpatchChildren(n1, n2, container, fragmentEndAnchor, parentComponent);\n\t\t}\n\t};\n\n\tconst processComponent: ProcessComponentFn = (n1, n2, container, anchor, parentComponent) => {\n\t\tif (n1 === null) {\n\t\t\t// n1\u4E3Anull, \u4EE3\u8868\u6302\u8F7D\u7EC4\u4EF6\n\t\t\tmountComponent(n2, container, anchor, parentComponent);\n\t\t} else {\n\t\t\t// \u7EC4\u4EF6\u7684props\u53D1\u751F\u53D8\u5316\uFF0C\u66F4\u65B0\u7EC4\u4EF6\n\t\t\tupdateComponent(n1, n2);\n\t\t}\n\t};\n\n\t// \u7EC4\u4EF6\u66F4\u65B0\u524D\u505A\u7684\u4E00\u4E9B\u64CD\u4F5C\uFF1A\u66F4\u65B0props \u66F4\u65B0children\n\n\tconst updateComponentPreRender = (instance: ComponentInternalInstance, nextVNode: VNode) => {\n\t\t// \u65B0\u7684vnode\u4FDD\u5B58\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\n\t\tnextVNode.component = instance;\n\t\t// \u65E7\u7684proos\n\t\tconst prevProps = instance.vnode.props;\n\t\t// \u5B9E\u4F8B\u4E0A\u7684vnode\u4FDD\u5B58\u6700\u65B0\u7684\n\t\tinstance.vnode = nextVNode;\n\n\t\t// \u6E05\u7A7Anext\uFF0C\u9632\u6B62\u540E\u7EED\u4E00\u76F4\u4EE5\u4E3A\u6709next\u8282\u70B9\uFF0C\u5BFC\u81F4\u8D70\u66F4\u65B0\u65B9\u6CD5\n\t\tinstance.next = null;\n\t\tupdateProps(instance, nextVNode.props, prevProps);\n\t\tupdateSlots(instance, nextVNode.children);\n\t};\n\n\t// \u91CD\u70B9: \u7EC4\u4EF6\u5173\u8054effect\n\t// \u7EC4\u88C5\u54CD\u5E94\u5F0F\u6570\u636E\uFF0C\u7ED1\u5B9Aeffect\n\tconst setupRenderEffect: SetupRenderEffectFn = (instance, initialVNode, container, anchor) => {\n\t\t// \u9ED8\u8BA4\u4F1A\u6267\u884C\u4E00\u6B21\u53D1\u65B9\u6CD5\n\t\tconst componentUpdateFn = () => {\n\t\t\t// \u7B2C\u4E00\u6B21\u6267\u884C\n\t\t\tif (!instance.isMounted) {\n\t\t\t\t// \u751F\u547D\u5468\u671F\u51FD\u6570\n\t\t\t\t// beforeMount\n\t\t\t\tconst { bm, m } = instance;\n\t\t\t\tif (bm) {\n\t\t\t\t\tinvokeArrayFns(bm);\n\t\t\t\t}\n\n\t\t\t\t// 1. \u6E32\u67D3\u7EC4\u4EF6\u5185\u5BB9\n\t\t\t\tconst subTree = (instance.subTree = renderComponentRoot(instance));\n\n\t\t\t\t// patch children\n\t\t\t\tpatch(null, subTree, container, anchor, instance);\n\n\t\t\t\t// \u4FDD\u5B58\u771F\u5B9Edom\u8282\u70B9\n\t\t\t\tinitialVNode.el = subTree.el;\n\n\t\t\t\t// \u751F\u547D\u5468\u671F\u51FD\u6570\n\t\t\t\t// mounted\n\t\t\t\tif (m) {\n\t\t\t\t\tinvokeArrayFns(m);\n\t\t\t\t}\n\n\t\t\t\t// 2. \u6302\u8F7D\u7EC4\u4EF6\u6210\u529F\n\t\t\t\tinstance.isMounted = true;\n\t\t\t} else {\n\t\t\t\tlet { next, vnode, bu, u } = instance;\n\t\t\t\t// \u8BF4\u660E\u7EC4\u4EF6props\u53D1\u751F\u4E86\u66F4\u65B0\n\t\t\t\tif (next) {\n\t\t\t\t\t// \u62FF\u5230\u771F\u5B9Edom\u5143\u7D20\n\t\t\t\t\tnext.el = vnode.el;\n\t\t\t\t\tupdateComponentPreRender(instance, next);\n\t\t\t\t} else {\n\t\t\t\t\t// \u5982\u679C\u6CA1\u6709\uFF0C\u66F4\u65B0\u6210\u6700\u65B0\u7684vnode\n\t\t\t\t\tnext = vnode;\n\t\t\t\t}\n\n\t\t\t\t// lifecycle \u94A9\u5B50\n\t\t\t\t// beforeUpdate\n\n\t\t\t\tif (bu) {\n\t\t\t\t\tinvokeArrayFns(bu);\n\t\t\t\t}\n\n\t\t\t\t// \u5F53\u7EC4\u4EF6\u5185\u90E8\u7684\u54CD\u5E94\u5F0F\u6570\u636E\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u6267\u884C\n\t\t\t\tconst nextTree = renderComponentRoot(instance);\n\t\t\t\t// \u83B7\u53D6\u8001\u8282\u70B9\n\t\t\t\tconst prevTree = instance.subTree;\n\t\t\t\t// \u66F4\u65B0\u8001\u8282\u70B9\n\t\t\t\tinstance.subTree = nextTree;\n\n\t\t\t\tpatch(prevTree, nextTree, hostParentNode(prevTree.el!), getNextHostNode(prevTree), instance);\n\n\t\t\t\t// \u4FDD\u5B58\u4E0B\u6700\u65B0\u7684el\n\t\t\t\tnext.el = nextTree.el;\n\n\t\t\t\t// lifecycle \u94A9\u5B50\n\t\t\t\t// updated\n\t\t\t\tif (u) {\n\t\t\t\t\tinvokeArrayFns(u);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// \u91CD\u70B9: \u521B\u5EFAeffect\n\t\tconst effect = (instance.effect = new ReactiveEffect(componentUpdateFn, () => queueJob(update)));\n\n\t\tconst update: SchedulerJob = (instance.update = () => effect.run());\n\n\t\t// \u6807\u8BB0\u4E0Bjob id \u8DDF\u7EC4\u4EF6uid\u5173\u8054\n\t\tupdate.id = instance.uid;\n\n\t\t// \u9ED8\u8BA4\u6267\u884C\u4E00\u6B21\n\t\tupdate();\n\t};\n\n\t// \u521D\u6B21\u6302\u8F7D\u7EC4\u4EF6\n\tconst mountComponent: MountComponentFn = (initialVNode, container, anchor, parentComponent) => {\n\t\tconst instance = (initialVNode.component = createComponentInstance(initialVNode, parentComponent));\n\n\t\tsetupComponent(instance);\n\n\t\tsetupRenderEffect(instance, initialVNode, container, anchor);\n\t};\n\n\t// \u7EC4\u4EF6\u7684props\u53D8\u66F4\u5BFC\u81F4\u7EC4\u4EF6\u66F4\u65B0\n\tconst updateComponent = (n1: VNode, n2: VNode) => {\n\t\t// \u7EC4\u4EF6\u7684props\u66F4\u65B0\uFF0C\u6BD4\u8F83\u65B0\u65E7props\u53D8\u5316\uFF0C\u6267\u884C\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A\u7684update\u65B9\u6CD5\uFF0C\n\t\t// \u5C31\u4F1A\u6267\u884C\u5230ReactiveEffect\u7684fn\u65B9\u6CD5\n\t\t// n2\u65B0\u7684vnode\u4E2D\u4FDD\u5B58\u65E7\u7684vnode\u7EC4\u4EF6\u5B9E\u4F8B, \u540C\u65F6\u62FF\u5230\u7EC4\u4EF6\u5B9E\u4F8B\n\t\tconst instance = (n2.component = n1.component);\n\t\t// \u5728\u6267\u884Cupdate\u4E4B\u524D\uFF0C\u9700\u8981\u5224\u65AD\u4E0B\u5C5E\u6027\u6709\u6CA1\u6709\u53D8\u5316\n\t\tif (shouldUpdateComponent(n1, n2)) {\n\t\t\t// next\u4FDD\u5B58\u4E0B\u65B0\u7684vnode\uFF0C\u8FD9\u4E2A\u5C5E\u6027\u4F1A\u5728 effect \u4E2D\u7528\u5230\n\t\t\tinstance.next = n2;\n\t\t\tinstance.update();\n\t\t} else {\n\t\t\t// \u6CA1\u6709\u53D8\u5316\u65F6\uFF0C \u4FDD\u5B58\u4E0B\u5C31\u5F97vnode\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\n\t\t\t// \u5B9E\u4F8Bvnode\u5C5E\u6027\u66F4\u65B0\u6210\u65B0\u7684vnode\n\t\t\tn2.el = n1.el;\n\t\t\tinstance.vnode = n2;\n\t\t}\n\t};\n\n\tconst patch: PatchFn = (n1, n2, container, anchor = null, parentComponent) => {\n\t\t// \u76F8\u540C\u7684\u8282\u70B9\uFF0C\u76F4\u63A5\u8FD4\u56DE\n\t\tif (n1 === n2) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (n1 && !isSameVNodeType(n1, n2)) {\n\t\t\t// \u83B7\u53D6\u8001\u8282\u70B9\u76F8\u90BB\u7684\u8282\u70B9\n\t\t\tanchor = getNextHostNode(n1);\n\t\t\t// \u5B58\u5728\u8001\u8282\u70B9\uFF0C\u5E76\u4E14\u65B0\u8282\u70B9\u548C\u8001\u8282\u70B9\u4E0D\u4E00\u6837\uFF0C\u5378\u8F7D\u8001\u8282\u70B9\n\n\t\t\tunmount(n1);\n\n\t\t\t// \u5220\u9664n1, \u4EE3\u8868\u4E3A\u521D\u6B21\u6E32\u67D3\n\t\t\tn1 = null;\n\t\t}\n\t\tconst { type, ref, shapeFlag } = n2;\n\n\t\tswitch (type) {\n\t\t\tcase Text:\n\t\t\t\tprocessText(n1, n2, container, anchor);\n\t\t\t\tbreak;\n\t\t\tcase Comment:\n\t\t\t\tprocessComment(n1, n2, container, anchor);\n\t\t\t\tbreak;\n\t\t\tcase Fragment:\n\t\t\t\tprocessFragment(n1, n2, container, anchor, parentComponent);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// \u8FD9\u91CC\u5148\u5904\u7406\u666E\u901A\u5143\u7D20 div  span ul\n\t\t\t\tif (shapeFlag & ShapeFlags.ELEMENT) {\n\t\t\t\t\t// \u666E\u901A\u5143\u7D20\n\t\t\t\t\tprocessElement(n1, n2, container, anchor, parentComponent);\n\t\t\t\t} else if (shapeFlag & ShapeFlags.COMPONENT) {\n\t\t\t\t\t// \u7EC4\u4EF6\n\t\t\t\t\tprocessComponent(n1, n2, container, anchor, parentComponent);\n\t\t\t\t} else if (shapeFlag & ShapeFlags.TELEPORT) {\n\t\t\t\t\t(type as typeof TeleportImpl).process(\n\t\t\t\t\t\tn1 as TeleportVNode,\n\t\t\t\t\t\tn2 as TeleportVNode,\n\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\tanchor,\n\t\t\t\t\t\tparentComponent,\n\t\t\t\t\t\tinternals\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (ref != null && parentComponent) {\n\t\t\tsetRef(ref, n1 && n1.ref, n2 || n1);\n\t\t}\n\t};\n\n\tconst unmountComponent = (instance: ComponentInternalInstance) => {\n\t\tconst { update, bum, um, subTree } = instance;\n\n\t\t// beforeUnmount\n\t\tif (bum) {\n\t\t\tinvokeArrayFns(bum);\n\t\t}\n\n\t\t// \u5F53\u7EC4\u4EF6\u5B58\u5728update\u5C5E\u6027\uFF0C\u8868\u660E\u6539\u7EC4\u4EF6\u662F\u5904\u4E8E\u6FC0\u6D3B\u72B6\u6001\uFF0C\u4E5F\u5C31\u662F\u6302\u8F7D\u72B6\u6001\n\t\tif (update) {\n\t\t\t// \u5931\u6D3B\u54CD\u5E94\u5F0F\n\t\t\tupdate.active = false;\n\t\t\tunmount(subTree);\n\t\t}\n\n\t\t// unmount\n\t\tif (um) {\n\t\t\tinvokeArrayFns(um);\n\t\t}\n\t};\n\n\t// \u5220\u9664\u5143\u7D20\n\tconst unmount: UnmountFn = vnode => {\n\t\tconst { shapeFlag, type } = vnode;\n\n\t\tif (shapeFlag & ShapeFlags.COMPONENT) {\n\t\t\tunmountComponent(vnode.component!);\n\t\t} else if (shapeFlag & ShapeFlags.TELEPORT) {\n\t\t\t(type as typeof TeleportImpl).remove(vnode, internals);\n\t\t} else {\n\t\t\tremove(vnode);\n\t\t}\n\t};\n\n\tconst remove: RemoveFn = vnode => {\n\t\tconst { type, el, anchor } = vnode;\n\n\t\tconst performRemove = () => {\n\t\t\thostRemove(el);\n\t\t};\n\n\t\tif (type === Fragment) {\n\t\t\tremoveFragment(el, anchor);\n\t\t} else {\n\t\t\t// \u4FDD\u6301\u8DDF\u6E90\u7801\u4E00\u81F4\n\t\t\tperformRemove();\n\t\t}\n\t};\n\n\tconst removeFragment = (current: RendererNode, end: RendererNode) => {\n\t\tlet next: RendererNode;\n\n\t\t// \u4ECE\u524D\u5F80\u540E\u904D\u5386\uFF0C\u5F53\u5FAA\u73AF\u7684\u8282\u70B9\u7B49\u4E8E\u6700\u540E\u4E00\u4E2A\u65F6\uFF0C\u8BF4\u660E\u4E2D\u95F4\u7684children\u5DF2\u7ECF\u5168\u90E8\u5220\u9664\u5B8C\u4E86\u3002\u6700\u540E\u5220\u9664end\u8282\u70B9\n\t\twhile (current !== end) {\n\t\t\tnext = hostNextSibling(current);\n\t\t\thostRemove(current);\n\t\t\tcurrent = next;\n\t\t}\n\n\t\thostRemove(end);\n\t};\n\n\tconst getNextHostNode: NextFn = vnode => {\n\t\tif (vnode.shapeFlag & ShapeFlags.COMPONENT) {\n\t\t\treturn getNextHostNode(vnode.component!.subTree);\n\t\t}\n\t\treturn hostNextSibling(vnode.anchor || vnode.el);\n\t};\n\n\tconst move: MoveFn = (vnode, container, anchor) => {\n\t\tconst { type, shapeFlag, el, children } = vnode;\n\t\tif (shapeFlag & ShapeFlags.COMPONENT) {\n\t\t\tmove(vnode.component.subTree, container, anchor);\n\t\t\treturn;\n\t\t}\n\n\t\tif (type === Fragment) {\n\t\t\t// \u5C06el\u771F\u5B9E\u8282\u70B9\u63D2\u5165\u65B0\u7684container\n\t\t\thostInsert(el, container, anchor);\n\n\t\t\t(children as VNode[]).forEach((child: VNode) => move(child, container, anchor));\n\n\t\t\t// \u8BB0\u5F55 anchor\n\t\t\thostInsert(vnode.anchor, container, anchor);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (shapeFlag & ShapeFlags.TELEPORT) {\n\t\t\t(type as typeof TeleportImpl).move(vnode, container, anchor, internals);\n\t\t\treturn;\n\t\t} else {\n\t\t\thostInsert(el, container, anchor);\n\t\t}\n\t};\n\n\tconst render: RootRenderFunction = (vnode, container) => {\n\t\tif (vnode == null) {\n\t\t\t// \u6CA1\u6709\u65B0\u8282\u70B9 \u4F46\u662F\u6709\u65E7\u7684\u8282\u70B9\uFF0C\u8981\u5220\u9664 \u5378\u8F7D\u6389\n\t\t\tif (container._vnode) {\n\t\t\t\tunmount(container._vnode);\n\t\t\t}\n\t\t} else {\n\t\t\tpatch(container._vnode || null, vnode, container, null, null);\n\t\t}\n\t\t// \u4FDD\u5B58\u8001\u8282\u70B9\n\t\tcontainer._vnode = vnode;\n\t};\n\n\tconst internals = {\n\t\tp: patch,\n\t\tum: unmount,\n\t\tm: move,\n\t\tr: remove,\n\t\tmt: mountComponent,\n\t\tmc: mountChildren,\n\t\tpc: patchChildren,\n\t\tn: getNextHostNode,\n\t\to: options\n\t};\n\n\treturn {\n\t\trender\n\t};\n}\n", "import { isArray, isObject } from '@vue/shared';\nimport { VNode, createVNode, isVNode } from './vnode';\n\n// h\u51FD\u6570\u6709\u4EE5\u4E0B\u51E0\u79CD\u4F20\u5165\u65B9\u5F0F\n\n// \u7EAF\u6587\u672C\n// h('div')\n\n//  type + \u5C5E\u6027\n// h('div', {})\n\n// type + children\n// h('div', [])\n// h('div', 'text')\n// h('div', h('span'))\n\n// type + \u5C5E\u6027 + children\n// h('div', {}, '')\n// h('div', {}, h('span'))   // vnode children\n// h('div', {}, [''])        // \u6570\u7EC4\u6587\u672Cchildren\n// h('div', {}, [h('span')]) // \u6570\u7EC4 vnode children\n\n// Components\n// h(Components, () => {}) default slots\n// h(Component, {}, () => {}) // default slot\n// h(Component, {}, {}) // named slots\n\nexport function h(type: any, propsOrChildren?: any, children?: any, ..._: any[]): VNode {\n\t// \u5224\u65AD\u53C2\u6570\u957F\u5EA6\n\n\tconst l = arguments.length;\n\n\t// type\u662F\u4E00\u5B9A\u6709\u7684\n\tif (l === 2) {\n\t\t// \u53C2\u6570\u4E3A2\u4E2A\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570 \u6709\u53EF\u80FD\u662Fchildren (\u6587\u672C\u3001vnode), \u4E5F\u6709\u53EF\u80FD\u662Fprops\n\t\t// children:  h('div', '')  h('div', [])\n\t\t// props: h('div', {})\n\t\tif (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n\t\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F vnode\n\t\t\t// h('div', h('span'))\n\t\t\tif (isVNode(propsOrChildren)) {\n\t\t\t\treturn createVNode(type, null, [propsOrChildren]);\n\t\t\t}\n\t\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5C5E\u6027\n\t\t\t// h('div', {})\n\t\t\treturn createVNode(type, propsOrChildren);\n\t\t} else {\n\t\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662Fchildren\n\t\t\t// h('div', 'xxx')\n\t\t\treturn createVNode(type, null, propsOrChildren);\n\t\t}\n\t} else {\n\t\t// 3\u79CD\u60C5\u51B5\n\t\t// h('div')\n\t\t// h('div', {}, '')\n\t\t// h('div', {}, '', '')\n\n\t\tif (l > 3) {\n\t\t\t// h('div', {}, '', '')\n\t\t\t// \u53D6\u540E\u4E24\u4E2A\uFF0C\u591A\u4F59\u7684\u53C2\u6570\u90FD\u8F6C\u6210\u6570\u7EC4\n\t\t\tchildren = Array.prototype.slice.call(arguments, 2);\n\t\t} else if (l === 3 && isVNode(children)) {\n\t\t\t// h('div', {}, h('span'))\n\t\t\tchildren = [children];\n\t\t}\n\t\treturn createVNode(type, propsOrChildren, children);\n\t}\n}\n", "import { currentInstance, setCurrentInstance, unsetCurrentInstance } from './component';\nimport { ComponentInternalInstance } from './componentRenderUtils';\nimport { callWithErrorHandling } from './errorHandling';\n\nexport const enum LifecycleHooks {\n\tBEFORE_CREATE = 'bc',\n\tCREATED = 'c',\n\tBEFORE_MOUNT = 'bm',\n\tMOUNTED = 'm',\n\tBEFORE_UPDATE = 'bu',\n\tUPDATED = 'u',\n\tBEFORE_UNMOUNT = 'bum',\n\tUNMOUNTED = 'um',\n\tDEACTIVATED = 'da',\n\tACTIVATED = 'a'\n}\n\nfunction injectHook(\n\ttype: LifecycleHooks,\n\thook: Function,\n\ttarget: ComponentInternalInstance | null = currentInstance\n): Function | null {\n\tif (target) {\n\t\tconst hooks = target[type] || (target[type] = []);\n\t\tconst wrappedHook = (...args: unknown[]) => {\n\t\t\t// \u56E0\u4E3A\u7528\u6237\u4F1A\u5728\u751F\u547D\u5468\u671F\u94A9\u5B50\u91CC\u8BBF\u95EE\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\uFF0C\u8FD9\u91CC\u8981\u7ED1\u5B9A\u4E0B\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\n\n\t\t\t// \u7528\u6237\u5199\u7684\u751F\u547D\u5468\u671F\u7684\u94A9\u5B50\u51FD\u6570\uFF0C\u5C31\u662F\u6267\u884CwrappedHook\uFF0C\u8FD9\u91CC\u5E94\u7528\u95ED\u5305\uFF0C\u4ECE\u7236\u4F5C\u7528\u57DF\u62FF\u5230\u4E86target\uFF0C\u5F15\u7528\u4E86\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8Btarget\uFF0C\n\t\t\t// \u6240\u4EE5\u7528\u6237\u80FD\u5728\u751F\u547D\u5468\u671F\u94A9\u5B50\u4E2D\u62FF\u5230\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\n\t\t\tsetCurrentInstance(target);\n\n\t\t\tconst res = callWithErrorHandling(hook, args);\n\t\t\t// \u5F53\u6267\u884C\u5B8C\u94A9\u5B50\u51FD\u6570\u540E\uFF0C\u91CD\u7F6E\u5F53\u524D\u7EC4\u4EF6\u5B9E\u4F8B\n\t\t\tunsetCurrentInstance();\n\t\t\treturn res;\n\t\t};\n\n\t\t// \u7528\u6237\u53EF\u4EE5\u5199\u591A\u4E2A\u751F\u547D\u5468\u671F\u51FD\u6570\uFF0C\u8FD9\u91CC\u7EDF\u4E00\u653E\u5728\u961F\u5217\u4E2D\u3002\u5728\u7EC4\u4EF6\u7684\u6302\u8F7D\u3001\u66F4\u65B0\u3001\u5378\u8F7D\u65B9\u6CD5\u4E2D\u4F9D\u6B21\u6267\u884C\n\t\thooks.push(wrappedHook);\n\t\treturn wrappedHook;\n\t}\n}\n\nexport const createHook =\n\t(lifecycle: LifecycleHooks) =>\n\t(hook: Function, target: ComponentInternalInstance | null = currentInstance) =>\n\t\tinjectHook(lifecycle, (...arrgs: unknown[]) => hook(...arrgs), target);\n\nexport const onBeforeMount = createHook(LifecycleHooks.BEFORE_MOUNT);\nexport const onMounted = createHook(LifecycleHooks.MOUNTED);\nexport const onBeforeUpdate = createHook(LifecycleHooks.BEFORE_UPDATE);\nexport const onUpdated = createHook(LifecycleHooks.UPDATED);\nexport const onBeforeUnmount = createHook(LifecycleHooks.BEFORE_UNMOUNT);\nexport const onUnmounted = createHook(LifecycleHooks.UNMOUNTED);\n", "import { RendererOptions } from '@vue/runtime-core';\n\n// \u589E\u5220\u6539\u67E5\nexport const nodeOps: Omit<RendererOptions<Node, Element>, 'patchProp'> = {\n\t// \u589E\u52A0\u3001\u63D2\u5165\n\tinsert(child, parent, anchor) {\n\t\tparent.insertBefore(child, anchor || null);\n\t},\n\t// \u5220\u9664\n\tremove(child) {\n\t\tconst parent = child.parentNode;\n\t\tif (parent) {\n\t\t\tparent.removeChild(child);\n\t\t}\n\t},\n\tcreateElement(tagName) {\n\t\treturn document.createElement(tagName);\n\t},\n\tcreateText(text: string) {\n\t\treturn document.createTextNode(text);\n\t},\n\tcreateComment(data) {\n\t\treturn document.createComment(data);\n\t},\n\tsetText(el, text) {\n\t\tel.nodeValue = text;\n\t},\n\tsetElementText(el, text) {\n\t\tel.textContent = text;\n\t},\n\tparentNode(node) {\n\t\treturn node.parentNode as Element;\n\t},\n\tnextSibling(node) {\n\t\treturn node.nextSibling;\n\t},\n\tquertSelector(selector) {\n\t\treturn document.querySelector(selector);\n\t}\n};\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchClass(el: Element, value: string) {\n\tif (isNoEmptyValue(value)) {\n\t\t// \u76F4\u63A5\u8986\u76D6\n\t\tel.className = value;\n\t} else {\n\t\t// \u5220\u9664class\u5C5E\u6027\n\t\tel.removeAttribute('class');\n\t}\n}\n", "import { isString } from '@vue/shared';\n\ntype Style = string | Record<string, string | string[]> | null;\n\nexport function patchStyle(el: Element, prev: Style, next: Style) {\n\tconst style = (el as HTMLElement).style;\n\tconst isCssString = isString(next);\n\tconst isPrevCssString = isString(prev);\n\n\t// eg. <div :style={}></div> style\u662F\u4E2A\u5BF9\u8C61\n\n\t// \u5B58\u5728\u65B0\u503C\uFF0C\u5E76\u4E14\u662F\u5BF9\u8C61\n\tif (next && !isCssString) {\n\t\tif (prev && !isPrevCssString) {\n\t\t\t// \u8BF4\u660E\u8001\u503C \u548C\u65B0\u503C\u90FD\u662F\u5BF9\u8C61\n\t\t\tfor (const key in prev) {\n\t\t\t\t// \u8001\u503C \u5728\u65B0\u7684\u503C\u91CC\u9762\u6CA1\u6709\uFF0C\u5220\u9664\u8001\u503C\n\t\t\t\tif (next[key] == null) {\n\t\t\t\t\tstyle[key] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// \u8BBE\u7F6E\u65B0\u7684\u503C\n\t\tfor (const key in next) {\n\t\t\tstyle[key] = next[key];\n\t\t}\n\t} else {\n\t\t// eg. <div style=\"\"></div>\n\t\t// \u65B0\u503C\u662Fstring\n\t\tif (isCssString) {\n\t\t\t// \u6BD4\u8F83\u4E0B\u662F\u5426\u76F8\u7B49\n\t\t\tif (prev != next) {\n\t\t\t\tstyle.cssText = next;\n\t\t\t}\n\t\t} else if (prev) {\n\t\t\t// \u65B0\u503C\u662Fnull\uFF0C\u800C\u4E14\u5B58\u5728\u8001\u503C\uFF0C\u5220\u6389\u8001\u503C\n\t\t\tel.removeAttribute('style');\n\t\t}\n\t}\n}\n", "// \u4E8B\u4EF6fn\u7684\u7C7B\u578B\ntype EventValue = Function | ((e: Event) => void);\n\n// invoker.value = fn\nexport interface Invoker extends EventListener {\n\tvalue: EventValue;\n}\n\n// invoker \u8BB0\u5F55\u4E8B\u4EF6\u7684\u5BF9\u8C61\uFF0C\u5176value\u5C5E\u6027\u4FDD\u5B58\u7740\u5BF9\u7528\u6237\u4E8B\u4EF6\u7684\u5F15\u7528\uFF0C\n// \u5F53\u65B0\u7684\u503C\u8FC7\u6765\uFF0C \u53EA\u9700\u8981\u66FF\u6362value\u5C5E\u6027\u5373\u523B\n\nexport function patchEvent(\n\tel: Element & { _vei?: Record<string, Invoker | undefined> },\n\tkey: string,\n\tnextValue: EventValue | null\n) {\n\t// \u53BB\u6389on, \u4E8B\u4EF6\u540D\u79F0\u8F6C\u5C0F\u5199\n\t// onXxxx -> xxxx\n\tconst name = key.slice(2).toLowerCase();\n\n\t// _vei = vue event invokers \u7ED9element\u5143\u7D20\u6269\u5C55\u4E00\u4E2A_vei\u5BF9\u8C61\uFF0C\u5176\u4F5C\u7528\u5C31\u662F\u6682\u5B58invokers\n\t// \u6BCF\u5F53\u6709\u65B0\u7684fn\u8FDB\u6765\uFF0C\u5C31\u4F1A\u5148\u4ECE\u5143\u7D20\u4E0A\u53D6\u4E00\u904Dinvokers\uFF0C\u6CA1\u6709\u7684\u8BDD\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\n\t// \u6570\u636E\u7ED3\u6784\u5982\u4E0B\uFF1A\n\t// _vei = invokers = {\u4E8B\u4EF6\u540D\u79F0: invoker = fn}\n\t// fn\u51FD\u6570\u4E0A\u6709value\u5C5E\u6027 \u6620\u5C04\u7684\u662Ffn\u672C\u8EAB\n\tconst invokers = el._vei || (el._vei = {});\n\n\t// \u83B7\u53D6\u7F13\u5B58\u7684invokers\n\tconst existingInvoker = invokers[name];\n\n\t// \u5B58\u5728\u65B0\u503C \u4E5F\u5B58\u5728\u8001\u503C\n\tif (nextValue && existingInvoker) {\n\t\t// \u66FF\u6362\u8001\u503C\n\t\texistingInvoker.value = nextValue;\n\t} else {\n\t\t// \u6709\u53EF\u80FD\u65B0\u503C\u6CA1\u6709\uFF0C\u4E5F\u6709\u53EF\u80FD\u8001\u503C\u6CA1\u6709\n\n\t\tif (nextValue) {\n\t\t\t// \u5B58\u5728\u65B0\u503C\uFF0C\u4E0D\u5B58\u5728\u8001\u503C\n\t\t\t// \u8BBE\u7F6E\u65B0\u503C\u7684\u4E8B\u4EF6\u76D1\u542C\uFF0C \u7F13\u5B58invokers\n\t\t\tconst invoker = (invokers[name] = createInvoker(nextValue));\n\n\t\t\t// \u8BBE\u7F6E\u4E8B\u4EF6\u76D1\u542C\n\t\t\tel.addEventListener(name, invoker);\n\t\t} else if (existingInvoker) {\n\t\t\t// \u65B0\u503C\u662F\u6CA1\u6709\u7684\uFF0C\u4F46\u662F\u5B58\u5728\u8001\u503C\uFF0C\u610F\u5473\u7740\u8FD9\u6B21\u66F4\u65B0\uFF0Cfn\u4F20\u5165\u4E86null\uFF0C\u5C31\u9700\u8981\u79FB\u9664\u6389\u8001\u503C\u4E8B\u4EF6\n\t\t\tel.removeEventListener(name, existingInvoker);\n\t\t\t// \u5220\u9664\u7F13\u5B58\u7684invoker\n\t\t\tinvokers[name] = null;\n\t\t}\n\t}\n}\n\n/**\n *  invoker = fn\n * \tinvoker.value = invoker\n *\n * \tinvoker.value === invoker  true\n */\nfunction createInvoker(initialValue: EventValue): Invoker {\n\t// \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684invoker\u51FD\u6570\uFF0C \u5F53invoker\u6267\u884C\u7684\u65F6\u5019\uFF0C\u5C31\u662F\u6267\u884CinitialValue\u51FD\u6570\n\t// invoker.value === initialValue  true\n\tconst invoker: Invoker = (e: Event) => invoker.value(e);\n\t// \u8BBE\u7F6E\u65B0\u503C\n\tinvoker.value = initialValue;\n\treturn invoker;\n}\n", "import { isNoEmptyValue } from '@vue/shared';\n\nexport function patchAttrs(el: Element, key: string, nextValue: any) {\n\tif (isNoEmptyValue(nextValue)) {\n\t\tel.setAttribute(key, nextValue);\n\t} else {\n\t\tel.removeAttribute(key);\n\t}\n}\n", "// \u8BBE\u7F6E\u5143\u7D20\u7684\u5C5E\u6027 class  style props event\n\nimport { RendererOptions } from '@vue/runtime-core';\nimport { patchClass } from './modules/class';\nimport { patchStyle } from './modules/style';\nimport { isOn } from '@vue/shared';\nimport { patchEvent } from './modules/events';\nimport { patchAttrs } from './modules/attrs';\n\nexport const patchProp: RendererOptions['patchProp'] = (el: Element, key: string, preValue: any, nextValue: any) => {\n\tif (key === 'class') {\n\t\tpatchClass(el, nextValue);\n\t} else if (key === 'style') {\n\t\tpatchStyle(el, preValue, nextValue);\n\t} else if (isOn(key)) {\n\t\tpatchEvent(el, key, nextValue);\n\t} else {\n\t\tpatchAttrs(el, key, nextValue);\n\t}\n};\n", "import { extend } from '@vue/shared';\nimport { nodeOps } from './nodeOps';\nimport { patchProp } from './patchProp';\nimport { Renderer, RootRenderFunction, createRenderer } from '@vue/runtime-core';\n\nconst rendererOptions = extend(nodeOps, { patchProp });\n\nlet renderer: Renderer<Element | ShadowRoot>;\n\n// \u61D2\u52A0\u8F7D\nfunction ensureRenderer() {\n\treturn renderer || (renderer = createRenderer(rendererOptions));\n}\n\nexport const render = ((...args) => {\n\tensureRenderer().render(...args);\n}) as RootRenderFunction<ShadowRoot>;\n\nexport * from '@vue/runtime-core';\n"],
  "mappings": "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",
  "names": ["effect", "effect", "ref", "set", "isReadonly", "get", "ReactiveFlags", "isReadonly", "effect", "job", "container", "anchor", "ref", "emit", "render", "el", "effect", "ref", "render", "LifecycleHooks"]
}
